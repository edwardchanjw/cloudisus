(function(){typeof console=="undefined"&&(console={log:function(){}});var x={"extends":function(b,c){c.prototype=new b},stackCounterLimit:1E3,stackCounter:0};x.recur=function(b){x.stackCounter===x.stackCounterLimit?(x.stackCounter=0,setTimeout(b,0)):(x.stackCounter++,b())};x.clone=function(b){return JSON.parse(JSON.stringify(b))};x.shuffle=function(b){for(var c,e,m=b.length;m;c=parseInt(Math.random()*m),e=b[--m],b[m]=b[c],b[c]=e);return b};x.include=function(b,c,e){for(var m=b.length-1;m>=0;m--){var i=
!1,i=e==null?b[m]===c:e(b[m],c)===0;if(i===!0)return!0}return!1};x.remove=function(b,c){for(var e=[],m=0;m<b.length;m++)b[m]!==c&&e.push(b[m]);return e};x.repeat=function(b,c,e,m,i){arguments.length===4&&(i={});b<c?(i._i=b,e(function(h,e){x.recur(function(){x.repeat(b+1,c,h,m,e)})},i)):m(i)};Utilsmeanwhile=function(b,c,e,m){arguments.length===3&&(m={});m._stack_counter==null&&(m._stack_counter=0);b===!0?c(function(c,b,m){m._stack_counter%40==39?(m._stack_counter+=1,setTimeout(function(){Utilsmeanwhile(c,
b,e,m)},0)):(m._stack_counter+=1,Utilsmeanwhile(c,b,e,m))},m):e(m)};x.seq=function(){var b=arguments;return function(c){x.repeat(0,b.length,function(c,m){var i=arguments.callee;b[m._i](function(){c(i,m)})},function(){c()})}};x.partition=function(b,c){for(var e=b.length%c,m=[],i=0;i<e;i++)m.push(null);e=[];for(i=0;i<b.length;i++)m.push(b[i]),m.length%c==0&&(e.push(m),m=[]);return e};x.keys=function(b){var c=[],e;for(e in b)c.push(e);return c};x.iso8601=function(b){function c(c){return c<10?"0"+c:c}
return b.getUTCFullYear()+"-"+c(b.getUTCMonth()+1)+"-"+c(b.getUTCDate())+"T"+c(b.getUTCHours())+":"+c(b.getUTCMinutes())+":"+c(b.getUTCSeconds())+"Z"};x.parseStrictISO8601=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),c=0,e=new Date(b[1],0,1);if(b[3])e.setMonth(b[3]-1);else throw"missing ISO8061 component";if(b[5])e.setDate(b[5]);else throw"missing ISO8061 component";if(b[7])e.setHours(b[7]);
else throw"missing ISO8061 component";if(b[8])e.setMinutes(b[8]);else throw"missing ISO8061 component";if(b[10])e.setSeconds(b[10]);else throw"missing ISO8061 component";b[12]&&e.setMilliseconds(Number("0."+b[12])*1E3);b[14]&&(c=Number(b[16])*60+Number(b[17]),c*=b[15]=="-"?1:-1);c-=e.getTimezoneOffset();time=Number(e)+c*6E4;b=new Date;b.setTime(Number(time));return b};x.parseISO8601=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),
c=0,e=new Date(b[1],0,1);b[3]&&e.setMonth(b[3]-1);b[5]&&e.setDate(b[5]);b[7]&&e.setHours(b[7]);b[8]&&e.setMinutes(b[8]);b[10]&&e.setSeconds(b[10]);b[12]&&e.setMilliseconds(Number("0."+b[12])*1E3);b[14]&&(c=Number(b[16])*60+Number(b[17]),c*=b[15]=="-"?1:-1);c-=e.getTimezoneOffset();time=Number(e)+c*6E4;b=new Date;b.setTime(Number(time));return b};x.parseISO8601Components=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?")),
c,e,m,i,h,j,g,q;c=Number(b[1]);e=b[3]-1;m=Number(b[5]);i=Number(b[7]);h=Number(b[8]);j=Number(b[10]);b[12]&&(g=Number("0."+b[12])*1E3);b[13]==="Z"?q=0:b[14]?(q=0,b[17]&&(q=Number(b[17])),q+=Number(b[15])*60,q*=b[14]=="-"?-1:1):b[14]==null&&b[11]&&(q=Number(b[12])*60);return{year:isNaN(c)?null:c,month:isNaN(e)?null:e,date:isNaN(m)?null:m,hours:isNaN(i)?null:i,minutes:isNaN(h)?null:h,seconds:isNaN(j)?null:j,millisecs:isNaN(g)?null:g,timezone:isNaN(q)?null:q}};x.compareDateComponents=function(b,c){var e=
x.parseISO8601Components(b),m=x.parseISO8601Components(c);return e.timezone==null&&m.timezone==null||e.timezone!=null&&m.timezone!=null?(da=x.parseISO8601(b),db=x.parseISO8601(c),da.getTime()==db.getTime()?0:da.getTime()<db.getTime()?-1:1):e.timezone!=null&&m.timezone==null?(da=x.parseISO8601(b),db=x.parseISO8601(c),ta=da.getTime(),tb=db.getTime(),e=50400,ta<tb&&ta<tb+e?-1:ta>tb&&ta>tb-e?1:null):(da=x.parseISO8601(b),db=x.parseISO8601(c),ta=da.getTime(),tb=db.getTime(),e=50400,ta<tb&&ta+e<tb?-1:ta>
tb&&ta+e>tb?1:null)};x.lexicalFormLiteral=function(b,c){var e=b.value,m=b.lang,i=b.type,h=null;if(e!=null&&i!=null&&typeof i!="string"){e=i.value;if(e==null)e=i.suffix,i=c.namespaces[i.prefix],b.type=i+e,e=i+e;h=e.indexOf("hexBinary")!=-1?'"'+b.value.toLowerCase()+'"^^<'+e+">":'"'+b.value+'"^^<'+e+">"}else h=m==null&&i==null?'"'+e+'"':i==null?'"'+e+'"@'+m:i.indexOf("hexBinary")!=-1?'"'+b.value.toLowerCase()+'"^^<'+i+">":'"'+b.value+'"^^<'+i+">";return h};x.lexicalFormBaseUri=function(b,c){var e=null;
if(b.value==null)var e=b.prefix,m=b.suffix,i=c.namespaces[e],e=i!=null?i+m:e+":"+m;else e=b.value;if(e===null)return null;else e.indexOf(":")==-1&&(e=(c.base||"")+e);return e};x.lexicalFormTerm=function(b,c){if(b.token==="uri")return{uri:x.lexicalFormBaseUri(b,c)};else if(b.token==="literal")return{literal:x.lexicalFormLiteral(b,c)};else if(b.token==="blank")return{blank:"_:"+b.value};else throw"Error, cannot get lexical form of unknown token: "+b.token;};x.normalizeUnicodeLiterals=function(b){for(var c=
b.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],e={},m=0;m<c.length;m++)e[c[m]]==null&&(e[c[m]]=!0,b=b.replace(RegExp("\\"+c[m],"g"),eval("'"+c[m]+"'")));return b};x.hashTerm=function(b){try{if(b==null)return"";if(b.token==="uri")return"u"+b.value;else if(b.token==="blank")return"b"+b.value;else if(b.token==="literal")return l="l"+b.value,l+=b.type||"",l+=b.lang||"",l}catch(c){if(typeof b==="object"){var e="";for(p in b)e=e+p+b[p];return e}return b}};var O={Tree:function(b){if(arguments.length!=0)this.order=
b,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),this.comparator=function(c,b){return c<b?-1:c>b?1:0},this.merger=null}};O.Tree.prototype._allocateNode=function(){return new O.Node};O.Tree.prototype._diskWrite=function(){};O.Tree.prototype._diskRead=function(b){return b};O.Tree.prototype._diskDelete=function(){};O.Tree.prototype._updateRootNode=function(b){return b};O.Tree.prototype.clear=function(){this.root=this._allocateNode();
this.root.isLeaf=!0;this.root.level=0;this._updateRootNode(this.root)};O.Tree.prototype.search=function(b,c){for(var e=!0,m=this.root;e;){for(var i=0;i<m.numberActives&&this.comparator(b,m.keys[i].key)===1;)i++;if(i<m.numberActives&&this.comparator(m.keys[i].key,b)===0)return c!=null&&c==!0?!0:m.keys[i].data;else m.isLeaf===!0?e=!1:m=this._diskRead(m.children[i])}return null};O.Tree.prototype.walk=function(b){this._walk(b,this.root)};O.Tree.prototype._walk=function(b,c){if(c.isLeaf)for(var e=0;e<
c.numberActives;e++)b(c.keys[e]);else{for(e=0;e<c.numberActives;e++)this._walk(b,this._diskRead(c.children[e])),b(c.keys[e]);this._walk(b,this._diskRead(c.children[c.numberActives]))}};O.Tree.prototype.walkNodes=function(b){this._walkNodes(b,this.root)};O.Tree.prototype._walkNodes=function(b,c){if(c.isLeaf)b(c);else{b(c);for(var e=0;e<c.numberActives;e++)this._walkNodes(b,this._diskRead(c.children[e]));this._walkNodes(b,this._diskRead(c.children[c.numberActives]))}};O.Tree.prototype._splitChild=function(b,
c,e){var m=this._allocateNode();m.isLeaf=e.isLeaf;m.level=e.level;m.numberActives=this.order-1;var i=e.keys[this.order-1];e.keys[this.order-1]=null;for(var h=0;h<this.order-1;h++)m.keys[h]=e.keys[h+this.order],e.keys[h+this.order]=null,e.isLeaf||(m.children[h]=e.children[h+this.order],e.children[h+this.order]=null);e.isLeaf||(m.children[h]=e.children[h+this.order],e.children[h+this.order]=null);e.numberActives=this.order-1;for(h=b.numberActives+1;h>c+1;h--)b.children[h]=b.children[h-1];b.children[c+
1]=m;for(h=b.numberActives;h>c;h--)b.keys[h]=b.keys[h-1];b.keys[c]=i;b.numberActives++;this._diskWrite(m);this._diskWrite(b);this._diskWrite(e)};O.Tree.prototype.insert=function(b,c){if(this.root.numberActives===2*this.order-1){var e=this._allocateNode();e.isLeaf=!1;e.level=this.root.level+1;e.numberActives=0;e.children[0]=this.root;this._splitChild(e,0,this.root);this.root=e;this._updateRootNode(this.root);this._insertNonFull(e,b,c)}else this._insertNonFull(this.root,b,c)};O.Tree.prototype._insertNonFull=
function(b,c,e){for(var m=b.numberActives-1;!b.isLeaf;){for(;m>=0&&this.comparator(c,b.keys[m].key)===-1;)m--;m++;var i=this._diskRead(b.children[m]);i.numberActives===2*this.order-1&&(this._splitChild(b,m,i),this.comparator(c,b.keys[m].key)===1&&m++);b=this._diskRead(b.children[m]);m=b.numberActives-1}for(;m>=0&&this.comparator(c,b.keys[m].key)===-1;)b.keys[m+1]=b.keys[m],m--;b.keys[m+1]={key:c,data:e};b.numberActives++;this._diskWrite(b)};O.Tree.prototype["delete"]=function(b){for(var c=this.root,
e=null,m=!0,i=null,h=null,j=null,g=!0;g===!0;){for(g=!1;m===!0;){q=0;if(c.numberActives===0)return!1;for(;q<c.numberActives&&this.comparator(b,c.keys[q].key)===1;)q++;i=q;q<c.numberActives&&this.comparator(b,c.keys[q].key)===0&&(m=!1);if(m===!0){if(c.isLeaf===!0)return!1;e=c;c=this._diskRead(c.children[q]);if(c===null)return!1;i===e.numberActives?(h=this._diskRead(e.children[i-1]),j=null):i===0?(h=null,j=this._diskRead(e.children[1])):(h=this._diskRead(e.children[i-1]),j=this._diskRead(e.children[i+
1]));c.numberActives===this.order-1&&e!=null&&(j!=null&&j.numberActives>this.order-1?this._moveKey(e,q,-1):h!=null&&h.numberActives>this.order-1?this._moveKey(e,q,1):h!=null&&h.numberActives===this.order-1?c=this._mergeSiblings(e,q,-1):j!=null&&j.numberActives===this.order-1&&(c=this._mergeSiblings(e,q,1)))}}if(c.isLeaf&&c.numberActives>this.order-1)return this._deleteKeyFromNode(c,i),!0;if(c.isLeaf&&c===this.root)return this._deleteKeyFromNode(c,i),!0;if(c.isLeaf===!1)if(e=q=null,(q=this._diskRead(c.children[i])).numberActives>
this.order-1)b=this._getMaxKeyPos(q),b=b.node.keys[b.index],c.keys[i]=b,this._diskWrite(c),c=q,b=b.key,m=g=!0;else if((q=this._diskRead(c.children[i+1])).numberActives>this.order-1)b=this._getMinKeyPos(q),b=b.node.keys[b.index],c.keys[i]=b,this._diskWrite(c),c=q,b=b.key,m=g=!0;else if((q=this._diskRead(c.children[i])).numberActives===this.order-1&&(e=this._diskRead(c.children[i+1])).numberActives===this.order-1){m=this._mergeNodes(q,c.keys[i],e);c.children[i]=m;i++;for(var q=i;q<c.numberActives;q++)c.children[q]=
c.children[q+1],c.keys[q-1]=c.keys[q];c.children[q]=null;c.keys[q-1]=null;c.numberActives--;if(c.numberActives===0&&this.root===c)this.root=m;this._diskWrite(c);c=m;m=g=!0}c.isLeaf&&c.numberActives>this.order-1&&m===!1&&this._deleteKeyFromNode(c,i);if(g===!1)return!0}};O.Tree.prototype._moveKey=function(b,c,e){e===1&&c--;var m=this._diskRead(b.children[c]),i=this._diskRead(b.children[c+1]);if(e==-1){m.keys[m.numberActives]=b.keys[c];m.children[m.numberActives+1]=i.children[0];i.children[0]=null;m.numberActives++;
b.keys[c]=i.keys[0];for(e=1;e<i.numberActives;e++)i.keys[e-1]=i.keys[e],i.children[e-1]=i.children[e];i.children[i.numberActives-1]=i.children[i.numberActives];i.numberActives--}else{i.children[i.numberActives+1]=i.children[i.numberActives];for(e=i.numberActives;e>0;e--)i.children[e]=i.children[e-1],i.keys[e]=i.keys[e-1];i.keys[0]=null;i.children[0]=null;i.children[0]=m.children[m.numberActives];i.keys[0]=b.keys[c];i.numberActives++;m.children[m.numberActives]=null;b.keys[c]=m.keys[m.numberActives-
1];m.keys[m.numberActives-1]=null;m.numberActives--}this._diskWrite(m);this._diskWrite(i);this._diskWrite(b)};O.Tree.prototype._mergeSiblings=function(b,c){var e,m,i;c===b.numberActives?(c--,m=this._diskRead(b.children[b.numberActives-1]),i=this._diskRead(b.children[b.numberActives])):(m=this._diskRead(b.children[c]),i=this._diskRead(b.children[c+1]));var h=this._allocateNode();h.isLeaf=m.isLeaf;h.level=m.level;for(e=0;e<this.order-1;e++)h.keys[e]=m.keys[e],h.children[e]=m.children[e];h.keys[this.order-
1]=b.keys[c];h.children[this.order-1]=m.children[this.order-1];for(e=0;e<this.order-1;e++)h.keys[e+this.order]=i.keys[e],h.children[e+this.order]=i.children[e];h.children[2*this.order-1]=i.children[this.order-1];b.children[c]=h;for(e=c;e<b.numberActives;e++)b.keys[e]=b.keys[e+1],b.children[e+1]=b.children[e+2];h.numberActives=m.numberActives+i.numberActives+1;b.numberActives--;for(e=b.numberActives;e<2*this.order-1;e++)b.keys[e]=null;if(b.numberActives===0&&this.root===b)this.root=h,h.isLeaf=h.level?
!1:!0;this._diskWrite(h);this.root===h&&this._updateRootNode(this.root);this._diskWrite(b);this._diskDelete(m);this._diskDelete(i);return h};O.Tree.prototype._deleteKeyFromNode=function(b,c){var e=2*this.order-1;if(b.numberActives<e)e=b.numberActives;var m;if(b.isLeaf===!1)return!1;for(m=c;m<e-1;m++)b.keys[m]=b.keys[m+1];b.keys.pop();b.numberActives--;this._diskWrite(b);return!0};O.Tree.prototype._mergeNodes=function(b,c,e){var m,i;m=this._allocateNode();m.isLeaf=!0;for(i=0;i<b.numberActives;i++)m.keys[i]=
b.keys[i],m.children[i]=b.children[i];m.children[b.numberActives]=b.children[b.numberActives];m.keys[b.numberActives]=c;for(i=0;i<e.numberActives;i++)m.keys[i+b.numberActives+1]=e.keys[i],m.children[i+b.numberActives+1]=e.children[i];m.children[2*this.order-1]=e.children[e.numberActives];m.numberActives=b.numberActives+e.numberActives+1;m.isLeaf=b.isLeaf;m.level=b.level;this._diskWrite(m);return m};O.Tree.prototype.audit=function(b){var c=[],e=[],m=this,i=function(h){for(var i=0;i<e.length;i++)if(m.comparator(e[i],
h)===0){var g=" !!! duplicated key "+h;b===!0&&console.log(g);c.push(g)}},h=null,m=this;this.walkNodes(function(j){b===!0&&(console.log("--- Node at "+j.level+" level"),console.log(" - leaf? "+j.isLeaf),console.log(" - num actives? "+j.numberActives),console.log(" - keys: "));for(var g=j.numberActives;g<j.keys.length;g++)j.keys[g]!=null&&b===!0&&(console.log(" * warning : redundant key data"),c.push(" * warning : redundant key data"));for(g=j.numberActives+1;g<j.children.length;g++)j.children[g]!=
null&&b===!0&&(console.log(" * warning : redundant children data"),c.push(" * warning : redundant key data"));if(j.isLeaf===!1)for(g=0;g<j.numberActives;g++){var q=m._diskRead(j.children[g]).keys[m._diskRead(j.children[g]).numberActives-1].key,o=m._diskRead(j.children[g+1]).keys[0].key;b===!0&&console.log("   "+j.keys[g].key+"("+q+","+o+")");if(m.comparator(j.keys[g].key,q)===-1){var t=" !!! value max left "+q+" > key "+j.keys[g].key;b===!0&&console.log(t);c.push(t)}m.comparator(j.keys[g].key,o)===
1&&(t=" !!! value min right "+o+" < key "+j.keys[g].key,b===!0&&console.log(t),c.push(t));i(j.keys[g].key);e.push(j.keys[g].key)}else{h===null?h=j.level:h!=j.level&&(t=" !!! Leaf node with wrong level value",b===!0&&console.log(t),c.push(t));for(g=0;g<j.numberActives;g++)b===!0&&console.log(" "+j.keys[g].key),i(j.keys[g].key),e.push(j.keys[g].key)}j!=m.root&&(j.numberActives>2*m.order-1&&(b===!0&&(t=" !!!! MAX num keys restriction violated "),console.log(t),c.push(t)),j.numberActives<m.order-1&&(b===
!0&&(t=" !!!! MIN num keys restriction violated "),console.log(t),c.push(t)))});return c};O.Tree.prototype._getMaxKeyPos=function(b){for(var c={};;){if(b===null)break;if(b.isLeaf===!0){c.node=b;c.index=b.numberActives-1;break}else c.node=b,c.index=b.numberActives-1,b=this._diskRead(b.children[b.numberActives])}return c};O.Tree.prototype._getMinKeyPos=function(b){for(var c={};;){if(b===null)break;if(b.isLeaf===!0){c.node=b;c.index=0;break}else c.node=b,c.index=0,b=this._diskRead(b.children[0])}return c};
O.Node=function(){this.numberActives=0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};var W={NodeKey:function(b,c){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.order=c}};W.NodeKey.prototype.comparator=function(b){for(var c=0;c<this.order.length;c++){var e=this.order[c];if(b[e]==null)break;else if(this[e]<b[e])return-1;else if(this[e]>b[e])return 1}return 0};W.Pattern=function(b){this.subject=b.subject;this.predicate=b.predicate;this.object=
b.object;this.graph=b.graph;this.indexKey=[];this.keyComponents={};for(var c=[],e=[],b=["subject","predicate","object","graph"],m=0;m<b.length;m++)typeof this[b[m]]==="string"?(e.push(b[m]),this.keyComponents[b[m]]=null):(c.push(b[m]),this.keyComponents[b[m]]=this[b[m]],this.indexKey.push(b[m]));this.order=c.concat(e);this.key=new W.NodeKey(this.keyComponents,this.order)};var ba={Tree:function(b,c){if(arguments!=0)this.componentOrder=b.componentOrder,O.Tree.call(this,b.order,b.name,b.persistent,b.cacheMaxSize),
this.comparator=function(c,b){for(var i=0;i<this.componentOrder.length;i++){var h=this.componentOrder[i],j=c[h],h=b[h];if(j<h)return-1;else if(j>h)return 1}return 0},this.rangeComparator=function(c,b){for(var i=0;i<this.componentOrder.length;i++){var h=this.componentOrder[i];if(b[h]==null||c[h]==null)break;else if(c[h]<b[h])return-1;else if(c[h]>b[h])return 1}return 0},c!=null&&c(this)}};x["extends"](O.Tree,ba.Tree);ba.Tree.prototype.insert=function(b,c){O.Tree.prototype.insert.call(this,b,null);
c&&c(!0);return!0};ba.Tree.prototype.search=function(b,c){var e=O.Tree.prototype.search.call(this,b,!0);c&&c(e);return e};ba.Tree.prototype.range=function(b,c){var e=null,e=typeof this.root==="string"?this._rangeTraverse(this,this._diskRead(this.root),b):this._rangeTraverse(this,this.root,b);c&&c(e);return e};ba.Tree.prototype._rangeTraverse=function(b,c,e){for(var e=e.key,m=[],i=[c],h;i.length>0;){c=i.shift();for(h=0;h<c.numberActives&&b.rangeComparator(c.keys[h].key,e)===-1;)h++;if(c.isLeaf===!0)for(;h<
c.numberActives&&b.rangeComparator(c.keys[h].key,e)===0;)m.push(c.keys[h].key),h++;else{var j=b._diskRead(c.children[h]);for(i.push(j);;)if(h<c.numberActives&&b.rangeComparator(c.keys[h].key,e)===0)m.push(c.keys[h].key),h++,j=b._diskRead(c.children[h]),i.push(j);else break}}return m};var Y={QuadBackend:function(b,c){if(arguments!=0){this.indexMap={};this.treeOrder=b.treeOrder;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph",
"predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var e=0;e<this.indices.length;e++){var m=this.indices[e],i=new ba.Tree({order:this.treeOrder,componentOrder:this.componentOrders[m],persistent:b.persistent,name:(b.name||"")+m,cacheMaxSize:b.cacheMaxSize});this.indexMap[m]=i}c&&c(this)}}};Y.QuadBackend.prototype.clear=function(){for(var b=
0;b<this.indices.length;b++)this.indexMap[this.indices[b]].clear()};Y.QuadBackend.prototype._indexForPattern=function(b){for(var b=b.indexKey,c=this.indices,e=0;e<c.length;e++)for(var m=c[e],i=this.componentOrders[m],h=0;h<i.length;h++){if(x.include(b,i[h])===!1)break;if(h==b.length-1)return m}return"SPOG"};Y.QuadBackend.prototype.index=function(b,c){for(var e=0;e<this.indices.length;e++)this.indexMap[this.indices[e]].insert(b);c&&c(!0);return!0};Y.QuadBackend.prototype.range=function(b,c){var e=
this.indexMap[this._indexForPattern(b)].range(b);c&&c(e);return e};Y.QuadBackend.prototype.search=function(b,c){var e=this.indexMap[this.indices[0]].search(b);c&&c(e!=null);return e!=null};Y.QuadBackend.prototype["delete"]=function(b,c){for(var e,m=0;m<this.indices.length;m++)e=this.indices[m],e=this.indexMap[e],e["delete"](b);c&&c(!0);return!0};var K={Lexicon:function(b){this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};this.defaultGraphOid=
0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid};this.oidCounter=1;this.knownGraphs={};b!=null&&b(this)}};K.Lexicon.prototype.registerGraph=function(b){b!=this.defaultGraphOid&&(this.knownGraphs[b]=!0);return!0};K.Lexicon.prototype.registeredGraphs=function(b){var c=[],e;for(e in this.knownGraphs)b===!0?c.push(this.OIDToUri["u"+e]):c.push(e);return c};
K.Lexicon.prototype.registerUri=function(b){if(b===this.defaultGraphUri)return this.defaultGraphOid;else{if(this.uriToOID[b]==null){var c=this.oidCounter;this.oidCounter++;this.uriToOID[b]=[c,0];this.OIDToUri["u"+c]=b}else{var e=this.uriToOID[b],c=e[0];this.uriToOID[b]=[c,e[1]+1]}return c}};K.Lexicon.prototype.resolveUri=function(b){return b===this.defaultGraphUri?this.defaultGraphOid:(b=this.uriToOID[b],b!=null?b[0]:-1)};K.Lexicon.prototype.resolveUriCost=function(b){return b===this.defaultGraphUri?
this.defaultGraphOid:(b=this.uriToOID[b],b!=null?b[1]:-1)};K.Lexicon.prototype.registerBlank=function(){var b=this.oidCounter;this.oidCounter++;b=""+b;this.OIDToBlank[b]=!0;return b};K.Lexicon.prototype.resolveBlank=function(){var b=this.oidCounter;this.oidCounter++;return""+b};K.Lexicon.prototype.resolveBlankCost=function(){return 0};K.Lexicon.prototype.registerLiteral=function(b){if(this.literalToOID[b]==null){var c=this.oidCounter;this.oidCounter++;this.literalToOID[b]=[c,0];this.OIDToLiteral["l"+
c]=b}else{var e=this.literalToOID[b],c=e[0];this.literalToOID[b]=[c,e[1]+1]}return c};K.Lexicon.prototype.resolveLiteral=function(b){b=this.literalToOID[b];return b!=null?b[0]:-1};K.Lexicon.prototype.resolveLiteralCost=function(b){b=this.literalToOID[b];return b!=null?b[1]:0};K.Lexicon.prototype.parseLiteral=function(b){var c=b.lastIndexOf("@");if(c!=-1&&b[c-1]==='"'&&b.substring(c,b.length).match(/^@[a-zA-Z\-]+$/g)!=null){var e=b.substring(1,c-1),b=b.substring(c+1,b.length);return{token:"literal",
value:e,lang:b}}c=b.lastIndexOf("^^");if(c!=-1&&b[c-1]==='"'&&b[c+2]==="<"&&b[b.length-1]===">")return e=b.substring(1,c-1),b=b.substring(c+3,b.length-1),{token:"literal",value:e,type:b};e=b.substring(1,b.length-1);return{token:"literal",value:e}};K.Lexicon.prototype.parseUri=function(b){return{token:"uri",value:b}};K.Lexicon.prototype.retrieve=function(b){try{if(b===this.defaultGraphOid)return{token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0};else{var c=this.OIDToUri["u"+
b];if(c!=null)return this.parseUri(c);else{var e=this.OIDToLiteral["l"+b];if(e!=null)return this.parseLiteral(e);else if(this.OIDToBlank[""+b]!=null)return{token:"blank",value:"_:"+b};else throw"Null value for OID";}}}catch(m){throw console.log("error in lexicon retrieving OID:"),console.log(b),m.message||m.stack?(m.message&&console.log(m.message),m.stack&&console.log(m.stack)):console.log(m),Error("Unknown retrieving OID in lexicon:"+b);}};K.Lexicon.prototype.clear=function(){this.uriToOID={};this.OIDToUri=
{};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={}};K.Lexicon.prototype.unregister=function(b,c){try{return this.unregisterTerm(b.subject.token,c.subject),this.unregisterTerm(b.predicate.token,c.predicate),this.unregisterTerm(b.object.token,c.object),b.graph!=null&&this.unregisterTerm(b.graph.token,c.graph),!0}catch(e){return console.log("Error unregistering quad"),console.log(e.message),!1}};K.Lexicon.prototype.unregisterTerm=function(b,c){if(b==="uri"){if(c!=this.defaultGraphOid){var e=
"u"+c,m=this.OIDToUri[e],i=this.uriToOID[m],h=i[1];if(""+i[0]===""+c)h===0?(delete this.OIDToUri[e],delete this.uriToOID[m],delete this.knownGraphs[c]):this.uriToOID[m]=[c,h-1];else throw"Not matching OID : "+c+" vs "+i[0];}}else if(b==="literal")if(this.oidCounter++,e="l"+c,m=this.OIDToLiteral[e],i=this.literalToOID[m],h=i[1],""+i[0]===""+c)h===0?(delete this.OIDToLiteral[e],delete this.literalToOID[m]):this.literalToOID[m]=[c,h-1];else throw"Not matching OID : "+c+" vs "+i[0];else b==="blank"&&
delete this.OIDToBlank[""+c]};var T={};T.load=function(b,c,e){jQuery.ajax({url:b,headers:{Accept:c},success:function(c,b,h){if((""+h.status)[0]=="2"){for(var b=h.getAllResponseHeaders().split("\n"),h={},j=0;j<b.length;j++){var g=b[j].split(":");h[g[0]]=g[1]}e(!0,{headers:h,data:c})}},error:function(b){(""+b.status)[0]=="3"?redirection==0?e(!1,500):(b=b.getAllResponseHeaders().Location||b.getAllResponseHeaders().location,b!=null?T.load(b,c,e,redirection-1):e(!1,500)):e(!1,b.statusCode())}})};var za=
null;(function(){var b=function(c,b){c.stack="";for(var h in b)c[h]=b[h]};if(typeof window!=="undefined"){var c=window.jsonld=window.jsonld||{};Exception=function(c){b(this,c)};if(!Object.keys)Object.keys=function(c){if(c!==Object(c))throw new TypeError("Object.keys called on non-object");var b=[],h;for(h in c)Object.prototype.hasOwnProperty.call(c,h)&&b.push(h);return b};if(!Array.prototype.filter)Array.prototype.filter=function(c,b){if(this==null)throw new TypeError;var h=Object(this),e=h.length>>>
0;if(typeof c!="function")throw new TypeError;for(var m=[],j=0;j<e;j++)if(j in h){var i=h[j];c.call(b,i,j,h)&&m.push(i)}return m}}else typeof module!=="undefined"&&module.exports&&(c={},Exception=function(c){b(this,c);this.stack=Error().stack});za=c;var e={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",
vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},m={xsd:"http://www.w3.org/2001/XMLSchema#"},i={"boolean":m.xsd+"boolean","double":m.xsd+"double",integer:m.xsd+"integer"},h=function(c,
b,h){b in c?c[b].constructor===Array?c[b].push(h):c[b]=[c[b],h]:c[b]=h},j=function(c){var b;if(c.constructor===Object){b={};var h=Object.keys(c).sort(),e;for(e in h){var m=h[e];b[m]=j(c[m])}}else if(c.constructor===Array)for(e in b=[],c)b[e]=j(c[e]);else b=c;return b},g=function(c){var b={"@id":"@id","@language":"@language","@literal":"@literal","@type":"@type"};if(c){var h={},e;for(e in c)c[e].constructor===String&&c[e]in b&&(h[c[e]]=e);for(e in h)b[e]=h[e]}return b},q=function(c,b){var h=null;b in
c&&(c[b].constructor===String?h=c[b]:c[b].constructor===Object&&"@id"in c[b]&&(h=c[b]["@id"]));return h},o=function(c,b,h){var e=null,m;for(m in c)if(m.length>0&&m[0]!=="@"&&b===q(c,m)){e=m;h!==null&&(h[m]=j(c[m]));break}e===null&&b==="@type"&&(e=g(c)["@type"]);if(e===null)for(m in c)if(m.length>0&&m[0]!=="@"){var i=q(c,m);if(i!==null&&b.indexOf(i)===0&&b.length>i.length){e=m+":"+b.substr(i.length);h!==null&&(h[m]=j(c[m]));break}}e===null&&(e=b);return e},t=function(c,b,h){var e=b,m=g(c),i=b.indexOf(":");
if(i!==-1)m=b.substr(0,i),m in c&&(e=q(c,m)+b.substr(i+1),h!==null&&(h[m]=j(c[m])));else if(b in c)e=q(c,b),h!==null&&(h[b]=j(c[b]));else for(var o in m)if(b===m[o]){e=o;break}return e},u=function(c){var b=!1;c!==null&&c.constructor===Object&&!("@literal"in c)&&(b=Object.keys(c).length>1||!("@id"in c));return b};c.normalize=function(c){return(new B).normalize(c)};c.expand=function(c){return(new B).expand({},null,c)};c.compact=function(b,h){var e=null;if(h!==null){var h=c.expand(h),m;h.constructor===
Array?(e=[],m=h):m=[h];b.constructor===Array&&(b=c.mergeContexts({},b));for(var i in m){var g={},n=(new B).compact(j(b),null,m[i],g);if(Object.keys(g).length>0){var q=g,g={},o=Object.keys(q).sort(),t=void 0;for(t in o){var u=o[t];g[u]=q[u]}q=Object.keys(n);q.sort();q.unshift("@context");n["@context"]=g;var g={},x;for(x in q)o=q[x],g[o]=n[o];n=g}e===null?e=n:e.push(n)}}return e};c.mergeContexts=function(b,h){b.constructor===Array&&(b=c.mergeContexts({},b));var e=j(b);if(h.constructor===Array)for(var m in h)e=
c.mergeContexts(e,h[m]);else{for(var i in h)if(i.indexOf("@")!==0)for(var g in e)if(e[g]===h[i]){delete e[g];break}for(i in h)e[i]=j(h[i])}return e};c.expandTerm=t;c.compactIri=function(c,b){return o(c,b,null)};c.frame=function(c,b,h){return(new B).frame(c,b,h)};c.toTriples=function(b,h,e){var m=null,b=c.normalize(b),e=e||null;e===null&&(m=[],e=function(c,b,e){m.push({subject:x.lexicalFormTerm(c),predicate:x.lexicalFormTerm(b),object:x.lexicalFormTerm(e),graph:h})});var j=!1,i;for(i in b){var g=b[i],
n=g["@id"],n=n[0]=="_"?{token:"blank",value:n.split(":")[1]}:{token:"uri",value:n},q;for(q in g)if(q!=="@id"){var o=g[q];o.constructor!==Array&&(o=[o]);for(var t in o)if(j=o[t],q==="@type"?(q="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",j={token:"uri",value:j}):typeof j==="string"?j={token:"literal",value:j}:j["@id"]!=null?j=j["@id"][0]=="_"?{token:"blank",value:j["@id"].split(":")[1]}:{token:"uri",value:j["@id"]}:j["@type"]!=null?j={token:"literal",value:j["@literal"],type:j["@type"]}:j["@language"]!=
null&&(j={token:"literal",value:j["@literal"],lang:j["@language"]}),j=e(n,{token:"uri",value:q},j)===!1)break;if(j)break}if(j)break}return m};c.resolve=function(c,b,h){var e={},m=function(c,b){if(c.constructor===Array)for(var h in c)m(c[h]);else if(c.constructor===Object)for(var j in c)if(j==="@context")if(c[j].constructor===Array){var i=c[j];for(h in i)i[h].constructor===String&&(b?i[h]=e[i[h]]:e[i[h]]={})}else c[j].constructor===String&&(b?c[j]=e[c[j]]:e[c[j]]={})};m(c,!1);var j=Object.keys(e).length,
i=null;if(j===0)h(c,i);else for(var g in e)b(g,function(b,n){--j;if(b===null)i=i||[],i.push({url:g,error:n});else try{e[g]=b.constructor===String?JSON.parse(b)["@context"]:b["@context"]}catch(q){i=i||[],i.push({url:g,error:q})}j===0&&(i===null&&m(c,!0),h(c,i))})};var B=function(){};B.prototype.compact=function(c,b,h,e){var m,q=g(c);if(h===null)m=null,this.getCoerceType(c,b,e);else if(h.constructor===Array){m=[];for(var t in h)m.push(this.compact(c,b,h[t],e))}else if(h.constructor===Object&&"@id"in
h&&h["@id"].constructor===Array)m={},m[q["@id"]]=this.compact(c,b,h["@id"],e);else if(u(h)){m={};for(var x in h)if(h[x]!=="@context"&&(q=o(c,x,e),q!==x||!(q in m)))m[q]=this.compact(c,x,h[x],e)}else{b=this.getCoerceType(c,b,e);t=null;h.constructor===Object?"@language"in h||(t="@type"in h?h["@type"]:"@id"in h?"@id":b):h.constructor===String&&(t=b);if(b===null&&(t===i["boolean"]||t===i.integer||t===i["double"]))b=t;if(b!==null)if(t===null)throw{message:"Cannot coerce type when a language is specified. The language information would be lost."};
else if(t!==b)throw new Exception({message:"Cannot coerce type because the type does not match.",type:t,expected:b});else h.constructor===Object?"@id"in h?m=h["@id"]:"@literal"in h&&(m=h["@literal"]):m=h,b===i["boolean"]?m=m==="true"||m!=0:b===i["double"]?m=parseFloat(m):b===i.integer&&(m=parseInt(m));else if(h.constructor===Object)for(x in m={},h)m[q[x]]=h[x];else m=j(h);t==="@id"&&(m.constructor===Object?m[q["@id"]]=o(c,m[q["@id"]],e):m=o(c,m,e))}return m};B.prototype.expand=function(b,e,m){var q;
if(m===null)q=null;else if(e===null&&m.constructor===String)q=t(b,m,null);else if(m.constructor===Array){q=[];for(var o in m)q.push(this.expand(b,e,m[o]))}else if(m.constructor===Object){"@context"in m&&(b=c.mergeContexts(b,m["@context"]));q={};for(var u in m)u==="@embed"||u==="@explicit"||u==="@default"||u==="@omitDefault"?h(q,u,j(m[u])):u!=="@context"&&h(q,t(b,u,null),this.expand(b,u,m[u]))}else{o=this.getCoerceType(b,e,null);q=g(b);if(o===null&&(m.constructor===Number||m.constructor===Boolean))o=
m.constructor===Boolean?i["boolean"]:(""+m).indexOf(".")==-1?i.integer:i["double"];e===q["@id"]||e===q["@type"]?q=t(b,m,null):o!==null?(q={},o==="@id"?q["@id"]=t(b,m,null):(q["@type"]=o,o===i["double"]&&(m=m.toExponential(6).replace(/(e(?:\+|-))([0-9])$/,"$10$2")),q["@literal"]=""+m)):q=""+m}return q};B.prototype.normalize=function(c){var b=[];if(c!==null){this.ng={tmp:null,c14n:null};var h=this.expand(e,null,c);this.nameBlankNodes(h);c={};M(null,null,h,c);for(var m in c){var h=c[m],j={},i=Object.keys(h).sort(),
g;for(g in i){var n=i[g];j[n]=h[n]}b.push(j)}this.canonicalizeBlankNodes(b);b.sort(function(c,b){return D(c["@id"],b["@id"])})}return b};B.prototype.getCoerceType=function(c,b,h){var e=null,b=t(c,b,null);b==="@id"||b==="@type"?e="@id":(b=o(c,b,null),b in c&&c[b].constructor===Object&&"@type"in c[b]&&(e=t(c,c[b]["@type"],h),h!==null&&(h[b]=j(c[b]))));return e};var C=function(c){return c.indexOf("_:")===0},E=function(c){return c.constructor===Object&&"@id"in c&&C(c["@id"])},D=function(c,b){var h=0;
if(c.constructor===Array&&b.constructor===Array)for(var e=0;e<c.length&&h===0;++e)h=D(c[e],b[e]);else h=c<b?-1:c>b?1:0;return h},F=function(c,b,h){var e=0;h in c?e=h in b?D(c[h],b[h]):-1:h in b&&(e=1);return e},J=function(c,b){var h=0;c.constructor===String?h=b.constructor!==String?-1:D(c,b):b.constructor===String?h=1:(h=F(c,b,"@literal"),h===0&&("@literal"in c?(h=F(c,b,"@type"),h===0&&(h=F(c,b,"@language"))):h=D(c["@id"],b["@id"])));return h},G=function(c,b){var h=0,e;for(e in c)if(e!=="@id"){h=
D(c[e].constructor===Array?c[e].length:1,b[e].constructor===Array?b[e].length:1);if(h===0){var m=c[e],j=b[e];m.constructor!==Array&&(m=[m],j=[j]);m=m.filter(function(c){return!E(c)});j=j.filter(function(c){return!E(c)});h=D(m.length,j.length)}if(h===0){m.sort(J);j.sort(J);for(var i=0;i<m.length&&h===0;++i)h=J(m[i],j[i])}if(h!==0)break}return h},O=function(c){var b=-1,h={next:function(){++b;return h.current()},current:function(){return"_:"+c+b},inNamespace:function(b){return b.indexOf("_:"+c)===0}};
return h},P=function(c,b,h){if(c!==null)if(c.constructor===Array)for(var e in c)P(c[e],b,h);else if(c.constructor===Object){"@id"in c?c["@id"].constructor==Array?P(c["@id"],b,h):u(c)&&(b[c["@id"]]=c):u(c)&&(!("@id"in c)||E(c))&&h.push(c);for(var m in c)P(c[m],b,h)}},M=function(c,b,h,e){var m=null;if(h!==null)if(h.constructor===Array)for(var i in h)M(c,b,h[i],e);else if(h.constructor===Object)if("@literal"in h||b==="@type")m=j(h);else if(h["@id"].constructor===Array){if(c!==null)throw{message:"Embedded graph literals cannot be flattened."};
for(var g in h["@id"])M(c,b,h["@id"][g],e)}else{h["@id"]in e?i=e[h["@id"]]:(i={"@id":h["@id"]},e[h["@id"]]=i);var m={"@id":i["@id"]},n;for(n in h)g=h[n],g!==null&&n!=="@id"&&(n in i?i[n].constructor!==Array&&(i[n]=[i[n]]):i[n]=[],M(i[n],n,g,e),i[n].length===1&&(i[n]=i[n][0]))}else m=h;m!==null&&c!==null&&(c.constructor===Array?(b=!1,m.constructor===Object&&"@id"in m&&(b=c.filter(function(c){return c.constructor===Object&&"@id"in c&&c["@id"]===m["@id"]}).length>0),b||c.push(m)):c[b]=m)};B.prototype.nameBlankNodes=
function(c){var b=this.ng.tmp=O("tmp"),h={},e=[];P(c,h,e);for(var m in e)if(c=e[m],!("@id"in c)){for(;b.next()in h;);c["@id"]=b.current();h[b.current()]=c}};B.prototype.renameBlankNode=function(c,b){var h=c["@id"];c["@id"]=b;var e=this.subjects;e[b]=e[h];delete e[h];this.edges.refs[b]=this.edges.refs[h];this.edges.props[b]=this.edges.props[h];delete this.edges.refs[h];delete this.edges.props[h];var m=this.edges.refs[b].all,j;for(j in m){var i=m[j].s;i===h&&(i=b);var g=e[i],n=this.edges.props[i].all,
q;for(q in n)if(n[q].s===h){n[q].s=b;var i=n[q].p,i=g[i].constructor===Object?[g[i]]:g[i].constructor===Array?g[i]:[],o;for(o in i)i[o].constructor===Object&&"@id"in i[o]&&i[o]["@id"]===h&&(i[o]["@id"]=b)}}n=this.edges.props[b].all;for(j in n){var i=n[j].s,m=this.edges.refs[i].all,t;for(t in m)if(m[t].s===h)m[t].s=b}};B.prototype.canonicalizeBlankNodes=function(c){this.renamed={};this.mappings={};this.serializations={};var b=this.edges={refs:{},props:{}},h=this.subjects={},e=[],m;for(m in c){var i=
c[m]["@id"];h[i]=c[m];b.refs[i]={all:[],bnodes:[]};b.props[i]={all:[],bnodes:[]};C(i)&&e.push(c[m])}this.collectEdges();var c=this.ng.c14n=O("c14n"),j=this.ng.tmp;for(m in e){var g=e[m],i=g["@id"];if(c.inNamespace(i)){for(;j.next()in h;);this.renameBlankNode(g,j.current());i=g["@id"]}this.serializations[i]={props:null,refs:null}}for(var j=!0,n=this;e.length>0;){j&&(j=!1,e.sort(function(c,b){return n.deepCompareBlankNodes(c,b)}));var g=e.shift(),i=g["@id"],g=["props","refs"],q;for(q in g){var o=g[q];
if(this.serializations[i][o]===null){var t={};t[i]="s1"}else t=this.serializations[i][o].m;var u=Object.keys(t);u.sort(function(c,b){return D(t[c],t[b])});var x=[];for(m in u){var B=u[m];!c.inNamespace(i)&&B in h&&(this.renameBlankNode(h[B],c.next()),x.push(B))}u=e;e=[];for(m in u){var B=u[m],H=B["@id"];if(!c.inNamespace(H)){for(var E in x)this.markSerializationDirty(H,x[E],o)&&(j=!0);e.push(B)}}}}for(var F in b.props)if(b.props[F].bnodes.length>0){var g=h[F],G;for(G in g)G.indexOf("@")!==0&&g[G].constructor===
Array&&g[G].sort(J)}};MappingBuilder=function(){this.count=1;this.processed={};this.mapping={};this.adj={};this.keyStack=[{keys:["s1"],idx:0}];this.done={};this.s=""};MappingBuilder.prototype.copy=function(){var c=new MappingBuilder;c.count=this.count;c.processed=j(this.processed);c.mapping=j(this.mapping);c.adj=j(this.adj);c.keyStack=j(this.keyStack);c.done=j(this.done);c.s=this.s;return c};MappingBuilder.prototype.mapNode=function(c){c in this.mapping||(this.mapping[c]=c.indexOf("_:c14n")===0?"c"+
c.substr(6):"s"+this.count++);return this.mapping[c]};MappingBuilder.prototype.serialize=function(c,b){if(this.keyStack.length>0)for(var h=this.keyStack.pop();h.idx<h.keys.length;++h.idx){var e=h.keys[h.idx];if(!(e in this.adj)){this.keyStack.push(h);break}if(e in this.done)this.s+="_"+e;else{this.done[e]=!0;var m=e,e=this.adj[e],i=e.i;if(i in c){var j=c[i],g="",n=!0,q=void 0;for(q in j)if(q!=="@id"){n?n=!1:g+="|";g+="<"+q+">";var o=j[q].constructor===Array?j[q]:[j[q]],t;for(t in o){var u=o[t];u.constructor===
Object?"@id"in u?g+=C(u["@id"])?"_:":"<"+u["@id"]+">":(g+='"'+u["@literal"]+'"',"@type"in u?g+="^^<"+u["@type"]+">":"@language"in u&&(g+="@"+u["@language"])):g+='"'+u+'"'}}m+="["+g+"]";j=!0;m+="[";var i=b.refs[i].all,x;for(x in i)j?j=!1:m+="|",m+="<"+i[x].p+">",m+=C(i[x].s)?"_:":"<"+i[x].s+">";m+="]"}m+=e.k.join("");this.s+=m;this.keyStack.push({keys:e.k,idx:0});this.serialize(c,b)}}};B.prototype.markSerializationDirty=function(c,b,h){var e=!1,c=this.serializations[c];c[h]!==null&&b in c[h].m&&(c[h]=
null,e=!0);return e};var K=function(c,b){var h=0;return h=c.length==b.length?D(c,b):c.length>b.length?D(c.substr(0,b.length),b):D(c,b.substr(0,c.length))};B.prototype.serializeCombos=function(c,b,h,e,m,i,g){if(g.length>0){i=j(i);i[e.mapNode(g[0].s)]=g[0].s;for(var n=e.copy(),g=g.slice(1),q=Math.max(1,g.length),o=0;o<q;++o){var t=o===0?e:n.copy();this.serializeCombos(c,b,h,t,m,i,g);g.unshift.apply(g,g.splice(1,g.length))}}else if(g=Object.keys(i).sort(),e.adj[h]={i:b,k:g,m:i},e.serialize(this.subjects,
this.edges),c[m]===null||K(e.s,c[m].s)<=0){for(n in g)this.serializeBlankNode(c,i[g[n]],e,m);e.serialize(this.subjects,this.edges);if(c[m]===null||K(e.s,c[m].s)<=0&&e.s.length>=c[m].s.length)c[m]={s:e.s,m:e.mapping}}};B.prototype.serializeBlankNode=function(c,b,h,e){if(!(b in h.processed)){h.processed[b]=!0;var m=h.mapNode(b),i=h.copy(),j=this.edges[e][b].bnodes,g={},n=[],q;for(q in j)j[q].s in h.mapping?g[h.mapping[j[q].s]]=j[q].s:n.push(j[q]);j=Math.max(1,n.length);for(q=0;q<j;++q){var o=q===0?
h:i.copy();this.serializeCombos(c,b,m,o,e,g,n)}}};B.prototype.deepCompareBlankNodes=function(c,b){var h=0,e=c["@id"],m=b["@id"];if(e===m)h=0;else if(h=this.shallowCompareBlankNodes(c,b),h===0)for(var i=["props","refs"],g=0;h===0&&g<i.length;++g){var h=i[g],n=this.serializations[e],q=this.serializations[m];if(n[h]===null){var o=new MappingBuilder;if(h==="refs")o.mapping=j(n.props.m),o.count=Object.keys(o.mapping).length+1;this.serializeBlankNode(n,e,o,h)}if(q[h]===null){o=new MappingBuilder;if(h===
"refs")o.mapping=j(q.props.m),o.count=Object.keys(o.mapping).length+1;this.serializeBlankNode(q,m,o,h)}h=D(n[h].s,q[h].s)}return h};B.prototype.shallowCompareBlankNodes=function(c,b){var h=0,e=Object.keys(c),m=Object.keys(b),h=D(e.length,m.length);h===0&&(h=D(e.sort(),m.sort()));h===0&&(h=G(c,b));if(h===0)var i=this.edges.refs[c["@id"]].all,j=this.edges.refs[b["@id"]].all,h=D(i.length,j.length);if(h===0)for(e=0;e<i.length&&h===0;++e)h=this.compareEdges(i[e],j[e]);return h};B.prototype.compareEdges=
function(c,b){var h=0,e=C(c.s),m=C(b.s),i=this.ng.c14n;e!=m?h=e?1:-1:(e||(h=D(c.s,b.s)),h===0&&(h=D(c.p,b.p)),h===0&&i!==null&&(e=i.inNamespace(c.s),i=i.inNamespace(b.s),e!=i?h=e?1:-1:e&&(h=D(c.s,b.s))));return h};B.prototype.collectEdges=function(){var c=this.edges.refs,b=this.edges.props,h;for(h in this.subjects){var e=this.subjects[h],m;for(m in e)if(m!=="@id"){var i=e[m],i=i.constructor!==Array?[i]:i,j;for(j in i){var g=i[j];g.constructor===Object&&"@id"in g&&g["@id"]in this.subjects&&(g=g["@id"],
c[g].all.push({s:h,p:m}),b[h].all.push({s:g,p:m}))}}}var n=this;for(h in c)c[h].all.sort(function(c,b){return n.compareEdges(c,b)}),c[h].bnodes=c[h].all.filter(function(c){return C(c.s)});for(h in b)b[h].all.sort(function(c,b){return n.compareEdges(c,b)}),b[h].bnodes=b[h].all.filter(function(c){return C(c.s)})};var T=function(c,b){var h=!1;if(!("@type"in b)){var e=Object.keys(b).filter(function(c){return c.indexOf("@")!==0});if(e.length===0)h=!0;else if(c.constructor===Object&&"@id"in c){var h=!0,
m;for(m in e)if(!(e[m]in c)){h=!1;break}}}return h},W=function(c,b,h,e,m,i,j,g){var n=b["@id"],q=n in e?e[n]:null;if(("@embed"in h&&h["@embed"]||!("@embed"in h)&&g.defaults.embedOn)&&(q===null||q.autoembed&&!m)){if(q===null)q={},e[n]=q;else if(q.parent!==null){if(q.parent[q.key].constructor===Array){var o=q.parent[q.key],t;for(t in o)if(o[t].constructor===Object&&"@id"in o[t]&&o[t]["@id"]===n){o[t]={"@id":b["@id"]};break}}else q.parent[q.key]={"@id":b["@id"]};var u=function(c){var b=Object.keys(e),
h;for(h in b)h=b[h],h in e&&e[h].parent!==null&&e[h].parent["@id"]===c&&(delete e[h],u(h))};u(n)}q.autoembed=m;q.parent=i;q.key=j;if(h["@explicit"]===!0||g.defaults.explicitOn)for(x in b)x!=="@id"&&!(x in h)&&delete b[x];m=Object.keys(b);for(t in m){var x=m[t];if(x.indexOf("@")!==0){x in h?(i=h[x],j=!1):(i=b[x].constructor===Array?[]:{},j=!0);var n=b[x],n=n.constructor===Array?n:[n],B;for(B in n)n[B].constructor===Object&&"@id"in n[B]&&n[B]["@id"]in c&&(n[B]=c[n[B]["@id"]]);b[x]=fa(c,n,i,e,j,b,x,
g)}}for(x in h)if(x.indexOf("@")!==0&&(!(x in b)||b[x]===null))i=h[x],i.constructor===Array?b[x]=[]:(i.constructor===Array&&(i=i.length>0?i[0]:{}),i["@omitDefault"]===!0||g.defaults.omitDefaultOn||(b[x]="@default"in i?i["@default"]:null))}else b={"@id":b["@id"]};return b},fa=function(c,b,h,e,m,i,j,g){var n=null,q=-1,o;h.constructor===Array?(n=[],o=h,o.length===0&&o.push({})):(o=[h],q=1);for(var t=[],x=0;x<o.length&&q!==0;++x){h=o[x];if(h.constructor!==Object)throw{message:"Invalid JSON-LD frame. Frame must be an object or an array.",
frame:h};t[x]=[];for(var B=0;B<b.length&&q!==0;++B){var C=b[B],D=!1,E="@type";if("@type"in h&&C.constructor===Object&&E in C)for(var F=C[E].constructor===Array?C[E]:[C[E]],J=h[E].constructor===Array?h[E]:[h[E]],G=0;G<J.length&&!D;++G){var E=J[G],Ab;for(Ab in F)if(F[Ab]===E){D=!0;break}}if(D||T(C,h))t[x].push(C),--q}}for(var O in t)for(var Dc in t[O])h=o[O],b=t[O][Dc],u(b)&&(b=W(c,b,h,e,m,i,j,g)),n===null?n=b:(h=b!==null&&b.constructor===Object&&"@id"in b&&Object.keys(b).length===1&&b["@id"]in e,i===
null&&h||n.push(b));return n};B.prototype.frame=function(b,h,e){var b=c.normalize(b),m=null;if("@context"in h)m=j(h["@context"]),h=c.expand(h);else if(h.constructor===Array){h.length>0&&"@context"in h[0]&&(m=j(h[0]["@context"]));var e=[],i;for(i in h)e.push(c.expand(h[i]));h=e}var e={defaults:{embedOn:!0,explicitOn:!1,omitDefaultOn:!1}},g={};for(i in b)g[b[i]["@id"]]=b[i];b=fa(g,b,h,{},!1,null,null,e);m!==null&&b!==null&&(b=c.compact(m,b));return b}})();var Ba={parser:{}};Ba.parser.parse=function(b,
c){typeof b==="string"&&(b=JSON.parse(b));return za.toTriples(b,c)};var ca={RDFLoader:function(b){this.precedences=["text/turtle","text/n3","application/json"];this.parsers={"text/turtle":ga.parser,"text/n3":ga.parser,"application/json":Ba.parser};if(b!=null)for(var c in b.parsers)this.parsers[c]=b.parsers[c];if(b&&b.precedences!=null)for(c in this.precedences=b.precedences,b.parsers)x.include(this.precedences,c)||this.precedences.push(c);this.acceptHeaderValue="";for(b=0;b<this.precedences.length;b++)b!=
0?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[b]:this.acceptHeaderValue+=this.precedences[b]}};ca.RDFLoader.prototype.registerParser=function(b,c){this.parsers[b]=c;this.precedences.push(b)};ca.RDFLoader.prototype.unregisterParser=function(b){delete this.parsers[b];for(var c=[],e=0;e<this.precedences.length;e++)this.precedences[e]!=b&&c.push(this.precedences[e]);this.precedences=c};ca.RDFLoader.prototype.setAcceptHeaderPrecedence=function(b){this.precedences=b};ca.RDFLoader.prototype.load=
function(b,c,e){var m=this;T.load(b,this.acceptHeaderValue,function(i,h){if(i==!0){var j=h.headers["Content-Type"]||h.headers["content-type"],g=h.data;if(j!=null){var j=j.split(";")[0],q;for(q in m.parsers)if(q.indexOf("/")!=-1){var o=q.split("/");if(o[1]==="*"){if(j.indexOf(o[0])!=-1)return m.tryToParse(m.parsers[q],c,g,e)}else if(j.indexOf(q)!=-1)return m.tryToParse(m.parsers[q],c,g,e);else if(j.indexOf(o[1])!=-1)return m.tryToParse(m.parsers[q],c,g,e)}else if(j.indexOf(q)!=-1)return m.tryToParse(m.parsers[q],
b,c,e);e(!1,"Unknown media type : "+j)}else console.log("Unknown media type"),console.log(h.headers),e(!1,"Uknown media type")}else e(!1,"Network error: "+h)})};ca.RDFLoader.prototype.loadFromFile=function(b,c,e,m){try{var i=this;fs=require("fs");fs.readFile(e.split("file:/")[1],function(h,e){if(h)throw h;e=e.toString("utf8");i.tryToParse(b,c,e,m)})}catch(h){m(!1,h)}};ca.RDFLoader.prototype.tryToParse=function(b,c,e,m){try{typeof e==="string"&&(e=x.normalizeUnicodeLiterals(e));var i=b.parse(e,c);
i!=null?m(!0,i):m(!1,"parsing error")}catch(h){console.log(h.message),console.log(h.stack),m(!1,"parsing error with mime type : "+h)}};var M={AbstractQueryTree:function(){}};M.AbstractQueryTree.prototype.parseQueryString=function(b){return ma.parser.parse(b)};M.AbstractQueryTree.prototype.parseExecutableUnit=function(b){if(b.kind==="select")return this.parseSelect(b);else if(b.kind==="ask")return this.parseSelect(b);else if(b.kind==="modify")return this.parseSelect(b);else if(b.kind==="construct")return this.parseSelect(b);
else if(b.kind==="insertdata")return this.parseInsertData(b);else if(b.kind==="deletedata")return this.parseInsertData(b);else if(b.kind==="load")return b;else if(b.kind==="clear")return b;else if(b.kind==="drop")return b;else if(b.kind==="create")return b;else throw Error("unknown executable unit: "+b.kind);};M.AbstractQueryTree.prototype.parseSelect=function(b){return b==null?(console.log("error parsing query"),null):(b.pattern=this.build(b.pattern,{freshCounter:0}),b)};M.AbstractQueryTree.prototype.parseInsertData=
function(b){return b==null?(console.log("error parsing query"),null):b};M.AbstractQueryTree.prototype.build=function(b,c){if(b.token==="groupgraphpattern")return this._buildGroupGraphPattern(b,c);else if(b.token==="basicgraphpattern"){var e={kind:"BGP",value:b.triplesContext};return e=M.translatePathExpressionsInBGP(e,c)}else if(b.token==="graphunionpattern"){var e=this.build(b.value[0],c),m=this.build(b.value[1],c);return{kind:"UNION",value:[e,m]}}else if(b.token==="graphgraphpattern")return{kind:"GRAPH",
value:this.build(b.value,c),graph:b.graph};else throw Error("not supported token in query:"+b.token);};M.translatePathExpressionsInBGP=function(b,c){var e,m=[],i,h;for(h=0;h<b.value.length;h++)if(b.value[h].predicate&&b.value[h].predicate.token==="path"){e=b.value[h];i=b.value.slice(h+1);var j=M.translatePathExpression(e,c);e=null;if(j.kind==="BGP")m=m.concat(j.value);else if(j.kind==="ZERO_OR_MORE_PATH"||j.kind==="ONE_OR_MORE_PATH"){h=m.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:m},rvalue:j}:
j;if(j.kind==="ZERO_OR_MORE_PATH")if(j.y.token==="var"&&j.y.value.indexOf("fresh:")===0&&j.x.token==="var"&&j.x.value.indexOf("fresh:")===0)for(var g=0;g<b.value.length;g++){if(b.value[g].object&&b.value[g].object.token==="var"&&b.value[g].object.value===j.x.value)e=x.clone(b.value[g]),e.object=j.y}else if(j.y.token==="var"&&j.y.value.indexOf("fresh:")===0)for(g=0;g<b.value.length;g++)if(b.value[g].subject&&b.value[g].subject.token==="var"&&b.value[g].subject.value===j.y.value)e=x.clone(b.value[g]),
e.subject=j.x;return i.length>0?(j=M.translatePathExpressionsInBGP({kind:"BGP",value:i},c),e!=null?(m=m.concat([e]).concat(i),{kind:"UNION",value:[{kind:"JOIN",lvalue:h,rvalue:j},{kind:"BGP",value:m}]}):{kind:"JOIN",lvalue:h,rvalue:j}):h}else return j}else m.push(b.value[h]);b.value=m;return b};M.translatePathExpression=function(b,c){if(b.predicate.kind==="element")if(b.predicate.modifier==="+"){b.predicate.modifier=null;var e=M.translatePathExpression(b,c);return{kind:"ONE_OR_MORE_PATH",path:e,x:b.subject,
y:b.object}}else return b.predicate.modifier==="*"?(b.predicate.modifier=null,e=M.translatePathExpression(b,c),{kind:"ZERO_OR_MORE_PATH",path:e,x:b.subject,y:b.object}):(b.predicate=b.predicate.value,{kind:"BGP",value:[b]});else if(b.predicate.kind==="sequence"){for(var e=b.subject,m=b.object,i=b.graph,h,j,g=[],q=0;q<b.predicate.value.length;q++){q!=b.predicate.value.length-1?(h={token:"var",value:"fresh:"+c.freshCounter},c.freshCounter++):h=m;j={subject:e,predicate:b.predicate.value[q],object:h};
if(i!=null)j.graph=x.clone(i);g.push(j);q!=b.predicate.value.length-1&&(e=x.clone(h))}return M.translatePathExpressionsInBGP({kind:"BGP",value:g},c)}};M.AbstractQueryTree.prototype._buildGroupGraphPattern=function(b,c){for(var e=b.filters||[],m={kind:"EMPTY_PATTERN"},i=0;i<b.patterns.length;i++){var h=b.patterns[i];h.token==="optionalgraphpattern"?(h=this.build(h.value,c),m=h.kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:m,rvalue:h.value,filter:h.filter}:{kind:"LEFT_JOIN",lvalue:m,rvalue:h,filter:!0}):
(h=this.build(h,c),m=m.kind=="EMPTY_PATTERN"?h:{kind:"JOIN",lvalue:m,rvalue:h})}if(e.length!=0)if(m.kind==="EMPTY_PATTERN")return{kind:"FILTER",filter:e,value:m};else if(m.kind==="LEFT_JOIN"&&m.filter===!0)return{kind:"FILTER",filter:e,value:m};else if(m.kind==="LEFT_JOIN")return{kind:"FILTER",filter:e,value:m};else if(m.kind==="JOIN")return{kind:"FILTER",filter:e,value:m};else if(m.kind==="UNION")return{kind:"FILTER",filter:e,value:m};else if(m.kind==="GRAPH")return{kind:"FILTER",filter:e,value:m};
else if(m.kind==="BGP")return{kind:"FILTER",filter:e,value:m};else throw Error("Unknow kind of algebra expression: "+m.kind);else return m};M.AbstractQueryTree.prototype.collectBasicTriples=function(b,c){c==null&&(c=[]);if(b.kind==="select")c=this.collectBasicTriples(b.pattern,c);else if(b.kind==="BGP")c=c.concat(b.value);else if(b.kind==="ZERO_OR_MORE_PATH")c=this.collectBasicTriples(b.path);else if(b.kind==="UNION")c=this.collectBasicTriples(b.value[0],c),c=this.collectBasicTriples(b.value[1],c);
else if(b.kind==="GRAPH")c=this.collectBasicTriples(b.value,c);else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")c=this.collectBasicTriples(b.lvalue,c),c=this.collectBasicTriples(b.rvalue,c);else if(b.kind==="FILTER")c=this.collectBasicTriples(b.value,c);else if(b.kind==="construct")c=this.collectBasicTriples(b.pattern,c);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return c};M.AbstractQueryTree.prototype.bind=function(b,c){if(b.graph!=null&&b.graph.token&&b.graph.token==="var"&&c[b.graph.value]!=
null)b.graph=c[b.graph.value];if(b.filter!=null){for(var e=[],m=0;m<b.filter.length;m++)b.filter[m].value=this._bindFilter(b.filter[m].value,c),e.push(b.filter[m]);b.filter=e}if(b.kind==="select")b.pattern=this.bind(b.pattern,c);else if(b.kind==="BGP")b.value=this._bindTripleContext(b.value,c);else if(b.kind==="ZERO_OR_MORE_PATH"){b.path=this._bindTripleContext(b.path,c);if(b.x&&b.x.token==="var"&&c[b.x.value]!=null)b.x=c[b.x.value];if(b.y&&b.y.token==="var"&&c[b.y.value]!=null)b.y=c[b.y.value]}else if(b.kind===
"UNION")b.value[0]=this.bind(b.value[0],c),b.value[1]=this.bind(b.value[1],c);else if(b.kind==="GRAPH")b.value=this.bind(b.value,c);else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")b.lvalue=this.bind(b.lvalue,c),b.rvalue=this.bind(b.rvalue,c);else if(b.kind==="FILTER")b.filter=this._bindFilter(b.filter[m].value,c);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return b};M.AbstractQueryTree.prototype._bindTripleContext=function(b,c){for(var e=0;e<b.length;e++){delete b[e].graph;delete b[e].variables;
for(var m in b[e]){var i=b[e][m];i.token==="var"&&c[i.value]!=null&&(b[e][m]=c[i.value])}}return b};M.AbstractQueryTree.prototype._bindFilter=function(b,c){if(b.expressionType!=null){var e=b.expressionType;if(e=="relationalexpression")b.op1=this._bindFilter(b.op1,c),b.op2=this._bindFilter(b.op2,c);else if(e=="conditionalor"||e=="conditionaland")for(e=0;e<b.operands.length;e++)b.operands[e]=this._bindFilter(b.operands[e],c);else if(e=="additiveexpression"){b.summand=this._bindFilter(b.summand,c);for(e=
0;e<b.summands.length;e++)b.summands[e].expression=this._bindFilter(b.summands[e].expression,c)}else if(e=="builtincall")for(e=0;e<b.args.length;e++)b.args[e]=this._bindFilter(b.args[e],c);else if(e=="multiplicativeexpression"){b.factor=this._bindFilter(b.factor,c);for(e=0;e<b.factors.length;e++)b.factors[e].expression=this._bindFilter(b.factors[e].expression,c)}else if(e=="unaryexpression")b.expression=this._bindFilter(b.expression,c);else if(e=="irireforfunction")for(e=0;e<b.factors.args;e++)b.args[e]=
this._bindFilter(b.args[e],c);else if(e=="atomic"&&b.primaryexpression=="var"&&c[b.value.value]!=null)e=c[b.value.value],b.primaryexpression=e.token==="uri"?"iri":"literal",b.value=e}return b};M.AbstractQueryTree.prototype.replace=function(b,c,e,m){if(b.graph!=null&&b.graph.token&&b.graph.token===c.token&&b.graph.value==c.value)b.graph=x.clone(e);if(b.filter!=null){for(var i=[],h=0;h<b.filter.length;h++)b.filter[h].value=this._replaceFilter(b.filter[h].value,c,e,m),i.push(b.filter[h]);b.filter=i}if(b.kind===
"select")b.pattern=this.replace(b.pattern,c,e,m);else if(b.kind==="BGP")b.value=this._replaceTripleContext(b.value,c,e,m);else if(b.kind==="ZERO_OR_MORE_PATH"){b.path=this._replaceTripleContext(b.path,c,e,m);if(b.x&&b.x.token===c.token&&b.value===c.value)b.x=x.clone(e);if(b.y&&b.y.token===c.token&&b.value===c.value)b.y=x.clone(e)}else if(b.kind==="UNION")b.value[0]=this.replace(b.value[0],c,e,m),b.value[1]=this.replace(b.value[1],c,e,m);else if(b.kind==="GRAPH")b.value=this.replace(b.value,c,e);else if(b.kind===
"LEFT_JOIN"||b.kind==="JOIN")b.lvalue=this.replace(b.lvalue,c,e,m),b.rvalue=this.replace(b.rvalue,c,e,m);else if(b.kind==="FILTER")b.value=this._replaceFilter(b.value,c,e,m);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return b};M.AbstractQueryTree.prototype._replaceTripleContext=function(b,c,e,m){for(var i=0;i<b.length;i++)for(var h in b[i]){var j=b[i][h];if(j.token==="var"&&c.token==="var"&&j.value===c.value)b[i][h]=e;else if(j.token==="blank"&&c.token==="blank"&&j.value===c.value)b[i][h]=
e;else if((j.token==="literal"||j.token==="uri")&&(c.token==="literal"||c.token==="uri")&&j.token===c.token&&x.lexicalFormTerm(j,m)[j.token]===x.lexicalFormTerm(c,m)[j.token])b[i][h]=e}return b};M.AbstractQueryTree.prototype._replaceFilter=function(b,c,e,m){if(b.expressionType!=null){var i=b.expressionType;if(i=="relationalexpression")b.op1=this._replaceFilter(b.op1,c,e,m),b.op2=this._replaceFilter(b.op2,c,e,m);else if(i=="conditionalor"||i=="conditionaland")for(i=0;i<b.operands.length;i++)b.operands[i]=
this._replaceFilter(b.operands[i],c,e,m);else if(i=="additiveexpression"){b.summand=this._replaceFilter(b.summand,c,e,m);for(i=0;i<b.summands.length;i++)b.summands[i].expression=this._replaceFilter(b.summands[i].expression,c,e,m)}else if(i=="builtincall")for(i=0;i<b.args.length;i++)b.args[i]=this._replaceFilter(b.args[i],c,e,m);else if(i=="multiplicativeexpression"){b.factor=this._replaceFilter(b.factor,c,e,m);for(i=0;i<b.factors.length;i++)b.factors[i].expression=this._replaceFilter(b.factors[i].expression,
c,e,m)}else if(i=="unaryexpression")b.expression=this._replaceFilter(b.expression,c,e,m);else if(i=="irireforfunction")for(i=0;i<b.factors.args;i++)b.args[i]=this._replaceFilter(b.args[i],c,e,m);else if(i=="atomic"){m=null;if(b.primaryexpression==c.token&&b.value==c.value)m=e.value;else if(b.primaryexpression=="iri"&&c.token=="uri"&&b.value==c.value)m=e.value;if(m!=null)b.primaryexpression=e.token==="uri"?"iri":e.token,b.value=m}}return b};M.AbstractQueryTree.prototype.treeWithUnion=function(b){if(b==
null)return!1;if(b.kind==null)return!1;if(b.kind==="select")return this.treeWithUnion(b.pattern);else if(b.kind==="BGP")return this.treeWithUnion(b.value);else if(b.kind==="ZERO_OR_MORE_PATH")return!1;else if(b.kind==="UNION")if(console.log("UNION!!"),b.value[0].value!=null&&b.value[0].value.variables!=null&&b.value[1].value!=null&&b.value[1].value.variables!=null){if(console.log("COMPARING:"+b.value[0].variables.join("/")),console.log("VS "+b.values[1].variables.join("/")),b.value[0].variables.join("/")===
b.values[1].variables.join("/"))return this.treeWithUnion(b.value[0])?!0:this.treeWithUnion(b.value[1])}else return!0;else if(b.kind==="GRAPH")return!1;else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")if(this.treeWithUnion(b.lvalue))return!0;else this.treeWithUnion(b.rvalue);else return!1};var ma={};ma.parser=function(){var b={parse:function(c,b){function m(a){var c=a.charCodeAt(0);if(c<=255)var a="x",b=2;else a="u",b=4;var a="\\"+a,f=c.toString(16).toUpperCase(),c=f;b-=f.length;for(f=0;f<b;f++)c="0"+
c;return a+c}function i(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,m)+'"'}function h(c){a<Ca||(a>Ca&&(Ca=a,eb=[]),eb.push(c))}function j(){var c="SPARQL@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=g();b===null&&(b=bb(),b=b!==null?b:null);y[c]={nextPos:a,result:b};return b}function g(){var c="Query@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=q();if(d!==null){var w=F();w===null&&(w=O(),w===null&&
(w=P(),w===null&&(w=M(),w=w!==null?w:null)));w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;f=d!==null?{token:"query",kind:"query",prologue:d[0],units:[d[1]]}:null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[2] Query");y[c]={nextPos:a,result:f};return f}function q(){var c="Prologue@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=o(),d=d!==null?d:"";if(d!==null){for(var w=[],s=r();s!==null;)w.push(s),s=r();if(w!==null){for(var s=[],v=t();v!==null;)s.push(v),v=t();s!==null?d=[d,w,
s]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?{token:"prologue",base:d[0],prefixes:d[2]}:null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[3] Prologue");y[c]={nextPos:a,result:f};return f}function o(){var b="BaseDecl@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="B"?(w="B",a+=1):(w=null,k&&h('"B"')),w===null&&(c.substr(a,1)==="b"?(w="b",a+=1):(w=null,k&&h('"b"')),w=w!==null?w:null),w!==null){if(c.substr(a,
1)==="A"){var s="A";a+=1}else s=null,k&&h('"A"');s===null&&(c.substr(a,1)==="a"?(s="a",a+=1):(s=null,k&&h('"a"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="S"){var v="S";a+=1}else v=null,k&&h('"S"');v===null&&(c.substr(a,1)==="s"?(v="s",a+=1):(v=null,k&&h('"s"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var z="E";a+=1}else z=null,k&&h('"E"');z===null&&(c.substr(a,1)==="e"?(z="e",a+=1):(z=null,k&&h('"e"')),z=z!==null?z:null);if(z!==null){for(var i=[],I=r();I!==null;)i.push(I),
I=r();i!==null?(I=ra(),I!==null?d=[d,w,s,v,z,i,I]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a){base={token:"base"};base.value=a;return base}(d[6]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[4] BaseDecl");y[b]={nextPos:a,result:f};return f}function t(){var b="PrefixDecl@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="P"?
(w="P",a+=1):(w=null,k&&h('"P"')),w===null&&(c.substr(a,1)==="p"?(w="p",a+=1):(w=null,k&&h('"p"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,k&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,k&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="F"){var z="F";a+=1}else z=null,k&&
h('"F"');z===null&&(c.substr(a,1)==="f"?(z="f",a+=1):(z=null,k&&h('"f"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="I"){var i="I";a+=1}else i=null,k&&h('"I"');i===null&&(c.substr(a,1)==="i"?(i="i",a+=1):(i=null,k&&h('"i"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="X"){var I="X";a+=1}else I=null,k&&h('"X"');I===null&&(c.substr(a,1)==="x"?(I="x",a+=1):(I=null,k&&h('"x"')),I=I!==null?I:null);if(I!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null)if(g=Ia(),g!==null){for(var L=
[],n=r();n!==null;)L.push(n),n=r();L!==null?(n=ra(),n!==null?d=[d,w,s,v,z,i,I,j,g,L,n]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){prefix={token:"prefix"};prefix.prefix=a;prefix.local=c;return prefix}(d[8],d[10]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[5] PrefixDecl");y[b]={nextPos:a,result:f};return f}function u(){var c="TURTLE@"+a,b=y[c];
if(b)return a=b.nextPos,b.result;for(var b=a,h=[],f=x();f!==null;)h.push(f),f=x();h=h!==null?h:null;h===null&&(h=null,a=b);y[c]={nextPos:a,result:h};return h}function x(){var b="statement@"+a,e=y[b];if(e)return a=e.nextPos,e.result;for(var m=e=a,f=[],d=r();d!==null;)f.push(d),d=r();if(f!==null)if(d=C(),d!==null){for(var w=[],s=r();s!==null;)w.push(s),s=r();if(w!==null)if(c.substr(a,1)==="."?(s=".",a+=1):(s=null,k&&h('"."')),s!==null){for(var v=[],z=r();z!==null;)v.push(z),z=r();v!==null?f=[f,d,w,
s,v]:(f=null,a=m)}else f=null,a=m;else f=null,a=m}else f=null,a=m;else f=null,a=m;m=f!==null?f[1]:null;m===null&&(m=null,a=e);if(m!==null)e=m;else{m=e=a;f=[];for(d=r();d!==null;)f.push(d),d=r();if(f!==null)if(d=sa(),d!==null){w=[];for(s=r();s!==null;)w.push(s),s=r();w!==null?f=[f,d,w]:(f=null,a=m)}else f=null,a=m;else f=null,a=m;m=f!==null?f[1]:null;m===null&&(m=null,a=e);if(m!==null)e=m;else{e=r();if(e!==null)for(m=[];e!==null;)m.push(e),e=r();else m=null;e=m!==null?m:null}}y[b]={nextPos:a,result:e};
return e}function C(){var c="directive@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=D();b===null&&(b=E(),b=b!==null?b:null);y[c]={nextPos:a,result:b};return b}function E(){var b="base@"+a,e=y[b];if(e)return a=e.nextPos,e.result;for(var m=e=a,f=[],d=r();d!==null;)f.push(d),d=r();if(f!==null)if(c.substr(a,5)==="@base"?(d="@base",a+=5):(d=null,k&&h('"@base"')),d!==null){var w=r();if(w!==null)for(var s=[];w!==null;)s.push(w),w=r();else s=null;s!==null?(w=ra(),w!==null?f=[f,d,s,w]:(f=null,a=m)):(f=null,
a=m)}else f=null,a=m;else f=null,a=m;m=f!==null?function(a){base={token:"base"};base.value=a;return base}(f[3]):null;m===null&&(m=null,a=e);y[b]={nextPos:a,result:m};return m}function D(){var b="prefixID@"+a,e=y[b];if(e)return a=e.nextPos,e.result;for(var m=e=a,f=[],d=r();d!==null;)f.push(d),d=r();if(f!==null)if(c.substr(a,7)==="@prefix"?(d="@prefix",a+=7):(d=null,k&&h('"@prefix"')),d!==null){var w=r();if(w!==null)for(var s=[];w!==null;)s.push(w),w=r();else s=null;if(s!==null)if(w=fb(),w=w!==null?
w:"",w!==null){if(c.substr(a,1)===":"){var v=":";a+=1}else v=null,k&&h('":"');if(v!==null){for(var z=[],i=r();i!==null;)z.push(i),i=r();z!==null?(i=ra(),i!==null?f=[f,d,s,w,v,z,i]:(f=null,a=m)):(f=null,a=m)}else f=null,a=m}else f=null,a=m;else f=null,a=m}else f=null,a=m;else f=null,a=m;m=f!==null?function(a,c){prefix={token:"prefix"};prefix.prefix=a;prefix.local=c;return prefix}(f[3],f[6]):null;m===null&&(m=null,a=e);y[b]={nextPos:a,result:m};return m}function F(){var c="SelectQuery@"+a,b=y[c];if(b)return a=
b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=J();if(d!==null){for(var w=[],s=r();s!==null;)w.push(s),s=r();if(w!==null){for(var s=[],v=K();v!==null;)s.push(v),v=K();if(s!==null){for(var v=[],z=r();z!==null;)v.push(z),z=r();if(v!==null)if(z=fa(),z!==null){for(var m=[],i=r();i!==null;)m.push(i),i=r();if(m!==null)if(i=Y(),i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();j!==null?(g=Ba(),g!==null?d=[d,w,s,v,z,m,i,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=
null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b,d){for(var f={named:[],"default":[]},h=0;h<c.length;h++){var k=c[h];k.kind==="default"?f["default"].push(k.graph):f.named.push(k.graph)}f.named.length===0&&f["default"].length===0&&f["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"select",token:"executableunit"};c.dataset=f;c.projection=a.vars;c.modifier=a.modifier;c.pattern=b;if(d!=
null&&d.limit!=null)c.limit=d.limit;if(d!=null&&d.offset!=null)c.offset=d.offset;if(d!=null&&d.order!=null&&d.order!="")c.order=d.order;if(d!=null&&d.group!=null)c.group=d.group;return c}(d[0],d[2],d[4],d[6]):null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[6] SelectQuery");y[c]={nextPos:a,result:f};return f}function G(){var c="SubSelect@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=J();if(f!==null){var d=fa();if(d!==null){var w=Y();w!==null?f=[f,d,w]:(f=null,a=e)}else f=null,a=e}else f=
null,a=e;(k=b)&&f===null&&h("[7] SubSelect");y[c]={nextPos:a,result:f};return f}function J(){var b="SelectClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="S"?(w="S",a+=1):(w=null,k&&h('"S"')),w===null&&(c.substr(a,1)==="s"?(w="s",a+=1):(w=null,k&&h('"s"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,k&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,k&&h('"e"')),
s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="L"){var v="L";a+=1}else v=null,k&&h('"L"');v===null&&(c.substr(a,1)==="l"?(v="l",a+=1):(v=null,k&&h('"l"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var z="E";a+=1}else z=null,k&&h('"E"');z===null&&(c.substr(a,1)==="e"?(z="e",a+=1):(z=null,k&&h('"e"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="C"){var i="C";a+=1}else i=null,k&&h('"C"');i===null&&(c.substr(a,1)==="c"?(i="c",a+=1):(i=null,k&&h('"c"')),i=i!==null?i:null);if(i!==
null){if(c.substr(a,1)==="T"){var I="T";a+=1}else I=null,k&&h('"T"');I===null&&(c.substr(a,1)==="t"?(I="t",a+=1):(I=null,k&&h('"t"')),I=I!==null?I:null);if(I!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null){g=a;if(c.substr(a,1)==="D"){var L="D";a+=1}else L=null,k&&h('"D"');L===null&&(c.substr(a,1)==="d"?(L="d",a+=1):(L=null,k&&h('"d"')),L=L!==null?L:null);if(L!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,k&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,
k&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="S"){var q="S";a+=1}else q=null,k&&h('"S"');q===null&&(c.substr(a,1)==="s"?(q="s",a+=1):(q=null,k&&h('"s"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="T"){var A="T";a+=1}else A=null,k&&h('"T"');A===null&&(c.substr(a,1)==="t"?(A="t",a+=1):(A=null,k&&h('"t"')),A=A!==null?A:null);if(A!==null){if(c.substr(a,1)==="I"){var o="I";a+=1}else o=null,k&&h('"I"');o===null&&(c.substr(a,1)==="i"?(o="i",a+=1):(o=null,k&&h('"i"')),o=o!==null?
o:null);if(o!==null){if(c.substr(a,1)==="N"){var t="N";a+=1}else t=null,k&&h('"N"');t===null&&(c.substr(a,1)==="n"?(t="n",a+=1):(t=null,k&&h('"n"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="C"){var u="C";a+=1}else u=null,k&&h('"C"');u===null&&(c.substr(a,1)==="c"?(u="c",a+=1):(u=null,k&&h('"c"')),u=u!==null?u:null);if(u!==null){if(c.substr(a,1)==="T"){var x="T";a+=1}else x=null,k&&h('"T"');x===null&&(c.substr(a,1)==="t"?(x="t",a+=1):(x=null,k&&h('"t"')),x=x!==null?x:null);x!==null?L=[L,
n,q,A,o,t,u,x]:(L=null,a=g)}else L=null,a=g}else L=null,a=g}else L=null,a=g}else L=null,a=g}else L=null,a=g}else L=null,a=g}else L=null,a=g;L!==null?g=L:(g=a,c.substr(a,1)==="R"?(L="R",a+=1):(L=null,k&&h('"R"')),L===null&&(c.substr(a,1)==="r"?(L="r",a+=1):(L=null,k&&h('"r"')),L=L!==null?L:null),L!==null?(c.substr(a,1)==="E"?(n="E",a+=1):(n=null,k&&h('"E"')),n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,k&&h('"e"')),n=n!==null?n:null),n!==null?(c.substr(a,1)==="D"?(q="D",a+=1):(q=null,k&&h('"D"')),
q===null&&(c.substr(a,1)==="d"?(q="d",a+=1):(q=null,k&&h('"d"')),q=q!==null?q:null),q!==null?(c.substr(a,1)==="U"?(A="U",a+=1):(A=null,k&&h('"U"')),A===null&&(c.substr(a,1)==="u"?(A="u",a+=1):(A=null,k&&h('"u"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(o="C",a+=1):(o=null,k&&h('"C"')),o===null&&(c.substr(a,1)==="c"?(o="c",a+=1):(o=null,k&&h('"c"')),o=o!==null?o:null),o!==null?(c.substr(a,1)==="E"?(t="E",a+=1):(t=null,k&&h('"E"')),t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,k&&h('"e"')),
t=t!==null?t:null),t!==null?(c.substr(a,1)==="D"?(u="D",a+=1):(u=null,k&&h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,k&&h('"d"')),u=u!==null?u:null),u!==null?L=[L,n,q,A,o,t,u]:(L=null,a=g)):(L=null,a=g)):(L=null,a=g)):(L=null,a=g)):(L=null,a=g)):(L=null,a=g)):(L=null,a=g),g=L!==null?L:null);g=g!==null?g:"";if(g!==null){L=[];for(n=r();n!==null;)L.push(n),n=r();if(L!==null){q=a;A=[];for(o=r();o!==null;)A.push(o),o=r();if(A!==null)if(o=U(),o!==null){t=[];for(u=r();u!==null;)t.push(u),
u=r();t!==null?A=[A,o,t]:(A=null,a=q)}else A=null,a=q;else A=null,a=q;if(A!==null)q=A;else{q=a;A=[];for(o=r();o!==null;)A.push(o),o=r();if(A!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,k&&h('"("')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){for(var x=[],R=r();R!==null;)x.push(R),R=r();if(x!==null)if(c.substr(a,1)==="A"?(R="A",a+=1):(R=null,k&&h('"A"')),R===null&&(c.substr(a,1)==="a"?(R="a",a+=1):(R=null,k&&h('"a"')),R=R!==null?R:null),R!==null){if(c.substr(a,
1)==="S"){var B="S";a+=1}else B=null,k&&h('"S"');B===null&&(c.substr(a,1)==="s"?(B="s",a+=1):(B=null,k&&h('"s"')),B=B!==null?B:null);if(B!==null){for(var C=[],H=r();H!==null;)C.push(H),H=r();if(C!==null)if(H=U(),H!==null){for(var E=[],D=r();D!==null;)E.push(D),D=r();if(E!==null)if(c.substr(a,1)===")"?(D=")",a+=1):(D=null,k&&h('")"')),D!==null){for(var F=[],G=r();G!==null;)F.push(G),G=r();F!==null?A=[A,o,t,u,x,R,B,C,H,E,D,F]:(A=null,a=q)}else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,
a=q}else A=null,a=q}else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,a=q;q=A!==null?A:null}if(q!==null)for(n=[];q!==null;){n.push(q);q=a;A=[];for(o=r();o!==null;)A.push(o),o=r();if(A!==null)if(o=U(),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();t!==null?A=[A,o,t]:(A=null,a=q)}else A=null,a=q;else A=null,a=q;if(A!==null)q=A;else{q=a;A=[];for(o=r();o!==null;)A.push(o),o=r();if(A!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,k&&h('"("')),o!==null){t=
[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(R=r();R!==null;)x.push(R),R=r();if(x!==null)if(c.substr(a,1)==="A"?(R="A",a+=1):(R=null,k&&h('"A"')),R===null&&(c.substr(a,1)==="a"?(R="a",a+=1):(R=null,k&&h('"a"')),R=R!==null?R:null),R!==null)if(c.substr(a,1)==="S"?(B="S",a+=1):(B=null,k&&h('"S"')),B===null&&(c.substr(a,1)==="s"?(B="s",a+=1):(B=null,k&&h('"s"')),B=B!==null?B:null),B!==null){C=[];for(H=r();H!==null;)C.push(H),H=r();if(C!==null)if(H=U(),H!==null){E=[];
for(D=r();D!==null;)E.push(D),D=r();if(E!==null)if(c.substr(a,1)===")"?(D=")",a+=1):(D=null,k&&h('")"')),D!==null){F=[];for(G=r();G!==null;)F.push(G),G=r();F!==null?A=[A,o,t,u,x,R,B,C,H,E,D,F]:(A=null,a=q)}else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,a=q}else A=null,a=q;else A=null,a=q;q=A!==null?A:null}}else n=null;if(n===null){n=a;q=[];for(A=r();A!==null;)q.push(A),A=r();if(q!==null)if(c.substr(a,1)===
"*"?(A="*",a+=1):(A=null,k&&h('"*"')),A!==null){o=[];for(t=r();t!==null;)o.push(t),t=r();o!==null?q=[q,A,o]:(q=null,a=n)}else q=null,a=n;else q=null,a=n;n=q!==null?q:null}n!==null?d=[d,w,s,v,z,i,I,j,g,L,n]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=[];if(c.length===3&&c[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:Jb(a)};for(var d=
0;d<c.length;d++){var f=c[d];f.length===3?b.push({token:"variable",kind:"var",value:f[1]}):b.push({token:"variable",kind:"aliased",expression:f[3],alias:f[8]})}return{vars:b,modifier:Jb(a)}}(d[8],d[10]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[8] SelectClause");y[b]={nextPos:a,result:f};return f}function O(){var b="ConstructQuery@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="C"?(w="C",a+=1):(w=null,
k&&h('"C"')),w===null&&(c.substr(a,1)==="c"?(w="c",a+=1):(w=null,k&&h('"c"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="O"){var s="O";a+=1}else s=null,k&&h('"O"');s===null&&(c.substr(a,1)==="o"?(s="o",a+=1):(s=null,k&&h('"o"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="N"){var v="N";a+=1}else v=null,k&&h('"N"');v===null&&(c.substr(a,1)==="n"?(v="n",a+=1):(v=null,k&&h('"n"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="S"){var z="S";a+=1}else z=null,k&&h('"S"');z===null&&(c.substr(a,
1)==="s"?(z="s",a+=1):(z=null,k&&h('"s"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,k&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,k&&h('"t"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="R"){var I="R";a+=1}else I=null,k&&h('"R"');I===null&&(c.substr(a,1)==="r"?(I="r",a+=1):(I=null,k&&h('"r"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="U"){var j="U";a+=1}else j=null,k&&h('"U"');j===null&&(c.substr(a,1)==="u"?(j="u",a+=1):
(j=null,k&&h('"u"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="C"){var g="C";a+=1}else g=null,k&&h('"C"');g===null&&(c.substr(a,1)==="c"?(g="c",a+=1):(g=null,k&&h('"c"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="T"){var n="T";a+=1}else n=null,k&&h('"T"');n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,k&&h('"t"')),n=n!==null?n:null);if(n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();if(q!==null)if(o=Kb(),o!==null){for(var A=[],t=r();t!==null;)A.push(t),t=r();if(A!==
null){for(var t=[],u=K();u!==null;)t.push(u),u=K();if(t!==null){for(var u=[],x=r();x!==null;)u.push(x),x=r();if(u!==null)if(x=fa(),x!==null){for(var B=[],R=r();R!==null;)B.push(R),R=r();B!==null?(R=Y(),R!==null?d=[d,w,s,v,z,i,I,j,g,n,q,o,A,t,u,x,B,R]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=
null,a=f;else d=null,a=f;f=d!==null?function(a,c,b,d){for(var f={named:[],"default":[]},h=0;h<c.length;h++){var k=c[h];k.kind==="default"?f["default"].push(k.graph):f.named.push(k.graph)}f.named.length===0&&f["default"].length===0&&f["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"construct",token:"executableunit"};c.dataset=f;c.template=a;c.pattern=b;if(d!=null&&d.limit!=null)c.limit=d.limit;if(d!=null&&d.offset!=
null)c.offset=d.offset;if(d!=null&&d.order!=null&&d.order!="")c.order=d.order;return c}(d[11],d[13],d[15],d[17]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[9] ConstructQuery");y[b]={nextPos:a,result:f};return f}function P(){var b="DescribeQuery@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a;if(c.substr(a,8)==="DESCRIBE"){var f="DESCRIBE";a+=8}else f=null,k&&h('"DESCRIBE"');if(f!==null){var d=oa();if(d!==null)for(var w=[];d!==null;)w.push(d),d=oa();else w=null;w!==null?d=w:(c.substr(a,
1)==="*"?(d="*",a+=1):(d=null,k&&h('"*"')),d=d!==null?d:null);if(d!==null){for(var w=[],s=K();s!==null;)w.push(s),s=K();if(w!==null)if(s=fa(),s=s!==null?s:"",s!==null){var v=Y();v!==null?f=[f,d,w,s,v]:(f=null,a=m)}else f=null,a=m;else f=null,a=m}else f=null,a=m}else f=null,a=m;(k=e)&&f===null&&h("[10] DescribeQuery");y[b]={nextPos:a,result:f};return f}function M(){var b="AskQuery@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,
1)==="A"?(w="A",a+=1):(w=null,k&&h('"A"')),w===null&&(c.substr(a,1)==="a"?(w="a",a+=1):(w=null,k&&h('"a"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="S"){var s="S";a+=1}else s=null,k&&h('"S"');s===null&&(c.substr(a,1)==="s"?(s="s",a+=1):(s=null,k&&h('"s"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="K"){var v="K";a+=1}else v=null,k&&h('"K"');v===null&&(c.substr(a,1)==="k"?(v="k",a+=1):(v=null,k&&h('"k"')),v=v!==null?v:null);if(v!==null){for(var z=[],i=r();i!==null;)z.push(i),i=r();
if(z!==null){for(var i=[],I=K();I!==null;)i.push(I),I=K();if(i!==null){for(var I=[],j=r();j!==null;)I.push(j),j=r();I!==null?(j=fa(),j!==null?d=[d,w,s,v,z,i,I,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){for(var b={named:[],"default":[]},d=0;d<a.length;d++){var f=a[d];f.kind==="default"?b["default"].push(f.graph):b.named.push(f.graph)}b.named.length===0&&b["default"].length===0&&b["default"].push({token:"uri",
prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});d={kind:"ask",token:"executableunit"};d.dataset=b;d.pattern=c;return d}(d[5],d[7]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[11] AskQuery");y[b]={nextPos:a,result:f};return f}function K(){var b="DatasetClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="F"){var d="F";a+=1}else d=null,k&&h('"F"');d===null&&(c.substr(a,1)==="f"?(d="f",a+=1):(d=null,k&&h('"f"')),
d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,k&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,k&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="O"){var s="O";a+=1}else s=null,k&&h('"O"');s===null&&(c.substr(a,1)==="o"?(s="o",a+=1):(s=null,k&&h('"o"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="M"){var v="M";a+=1}else v=null,k&&h('"M"');v===null&&(c.substr(a,1)==="m"?(v="m",a+=1):(v=null,k&&h('"m"')),v=v!==null?v:null);if(v!==
null){for(var z=[],i=r();i!==null;)z.push(i),i=r();if(z!==null)if(i=T(),i===null&&(i=W(),i=i!==null?i:null),i!==null){for(var I=[],j=r();j!==null;)I.push(j),j=r();I!==null?d=[d,w,s,v,z,i,I]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[5]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[12] DatasetClause");y[b]={nextPos:a,result:f};return f}function T(){var c="DefaultGraphClause@"+a,b=y[c];if(b)return a=b.nextPos,b.result;
b=k;k=!1;for(var e=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();d!==null?(w=V(),w!==null?d=[d,w]:(d=null,a=f)):(d=null,a=f);f=d!==null?{graph:d[1],kind:"default",token:"graphClause"}:null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[13] DefaultGraphClause");y[c]={nextPos:a,result:f};return f}function W(){var b="NamedGraphClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="N"){var d="N";a+=1}else d=null,k&&h('"N"');d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=
null,k&&h('"n"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="A"){var w="A";a+=1}else w=null,k&&h('"A"');w===null&&(c.substr(a,1)==="a"?(w="a",a+=1):(w=null,k&&h('"a"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="M"){var s="M";a+=1}else s=null,k&&h('"M"');s===null&&(c.substr(a,1)==="m"?(s="m",a+=1):(s=null,k&&h('"m"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==
null?v:null);if(v!==null){if(c.substr(a,1)==="D"){var z="D";a+=1}else z=null,k&&h('"D"');z===null&&(c.substr(a,1)==="d"?(z="d",a+=1):(z=null,k&&h('"d"')),z=z!==null?z:null);if(z!==null){for(var i=[],I=r();I!==null;)i.push(I),I=r();i!==null?(I=V(),I!==null?d=[d,w,s,v,z,i,I]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?{graph:d[6],kind:"named",token:"graphCluase"}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[14] NamedGraphClause");
y[b]={nextPos:a,result:f};return f}function fa(){var b="WhereClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a,d=a;if(c.substr(a,1)==="W"){var w="W";a+=1}else w=null,k&&h('"W"');w===null&&(c.substr(a,1)==="w"?(w="w",a+=1):(w=null,k&&h('"w"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="H"){var s="H";a+=1}else s=null,k&&h('"H"');s===null&&(c.substr(a,1)==="h"?(s="h",a+=1):(s=null,k&&h('"h"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=
null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=null,k&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,k&&h('"r"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,k&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,k&&h('"e"')),i=i!==null?i:null);i!==null?w=[w,s,v,z,i]:(w=null,a=d)}else w=null,a=d}else w=null,a=d}else w=null,
a=d}else w=null,a=d;d=w!==null?w:"";if(d!==null){w=[];for(s=r();s!==null;)w.push(s),s=r();if(w!==null)if(s=$(),s!==null){v=[];for(z=r();z!==null;)v.push(z),z=r();v!==null?d=[d,w,s,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[16] WhereClause");y[b]={nextPos:a,result:f};return f}function Y(){var c="SolutionModifier@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=ca(),d=d!==null?d:"";if(d!==null){var w=
ga(),w=w!==null?w:"";if(w!==null){var s=ka(),s=s!==null?s:"";if(s!==null){var v=za(),v=v!==null?v:"";v!==null?d=[d,w,s,v]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){var d={};if(b!=null){if(b.limit!=null)d.limit=b.limit;if(b.offset!=null)d.offset=b.offset}if(a!=null)d.group=a;d.order=c;return d}(d[0],d[2],d[3]):null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[17] SolutionModifier");y[c]={nextPos:a,result:f};return f}function ca(){var b="GroupClause@"+a,
e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="G"){var d="G";a+=1}else d=null,k&&h('"G"');d===null&&(c.substr(a,1)==="g"?(d="g",a+=1):(d=null,k&&h('"g"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,k&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,k&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="O"){var s="O";a+=1}else s=null,k&&h('"O"');s===null&&(c.substr(a,1)==="o"?(s="o",a+=1):(s=null,k&&h('"o"')),
s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="U"){var v="U";a+=1}else v=null,k&&h('"U"');v===null&&(c.substr(a,1)==="u"?(v="u",a+=1):(v=null,k&&h('"u"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="P"){var z="P";a+=1}else z=null,k&&h('"P"');z===null&&(c.substr(a,1)==="p"?(z="p",a+=1):(z=null,k&&h('"p"')),z=z!==null?z:null);if(z!==null){for(var i=[],I=r();I!==null;)i.push(I),I=r();if(i!==null)if(c.substr(a,1)==="B"?(I="B",a+=1):(I=null,k&&h('"B"')),I===null&&(c.substr(a,1)==="b"?(I="b",
a+=1):(I=null,k&&h('"b"')),I=I!==null?I:null),I!==null){if(c.substr(a,1)==="Y"){var j="Y";a+=1}else j=null,k&&h('"Y"');j===null&&(c.substr(a,1)==="y"?(j="y",a+=1):(j=null,k&&h('"y"')),j=j!==null?j:null);if(j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null){n=ba();if(n!==null)for(var q=[];n!==null;)q.push(n),n=ba();else q=null;q!==null?d=[d,w,s,v,z,i,I,j,g,q]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=
f}else d=null,a=f}else d=null,a=f;f=d!==null?d[9]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[18] GroupClause");y[b]={nextPos:a,result:f};return f}function ba(){var b="GroupCondition@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(w=Ja(),w!==null){for(var s=[],v=r();v!==null;)s.push(v),v=r();s!==null?d=[d,w,s]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=
m=a;d=[];for(w=r();w!==null;)d.push(w),w=r();if(d!==null)if(w=gb(),w!==null){s=[];for(v=r();v!==null;)s.push(v),v=r();s!==null?d=[d,w,s]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=m=a;d=[];for(w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="("?(w="(",a+=1):(w=null,k&&h('"("')),w!==null){s=[];for(v=r();v!==null;)s.push(v),v=r();if(s!==null)if(v=Q(),v!==null){for(var z=[],i=r();i!==null;)z.push(i),i=r();if(z!==null){i=
a;if(c.substr(a,1)==="A"){var j="A";a+=1}else j=null,k&&h('"A"');j===null&&(c.substr(a,1)==="a"?(j="a",a+=1):(j=null,k&&h('"a"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="S"){var g="S";a+=1}else g=null,k&&h('"S"');g===null&&(c.substr(a,1)==="s"?(g="s",a+=1):(g=null,k&&h('"s"')),g=g!==null?g:null);if(g!==null){for(var S=[],n=r();n!==null;)S.push(n),n=r();S!==null?(n=U(),n!==null?j=[j,g,S,n]:(j=null,a=i)):(j=null,a=i)}else j=null,a=i}else j=null,a=i;i=j!==null?j:"";if(i!==null){j=[];for(g=
r();g!==null;)j.push(g),g=r();if(j!==null)if(c.substr(a,1)===")"?(g=")",a+=1):(g=null,k&&h('")"')),g!==null){S=[];for(n=r();n!==null;)S.push(n),n=r();S!==null?d=[d,w,s,v,z,i,j,g,S]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[5].length!=0?{token:"aliased_expression",expression:d[3],alias:d[5][3]}:d[3]:null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=m=a;d=[];for(w=r();w!==null;)d.push(w),
w=r();if(d!==null)if(w=U(),w!==null){s=[];for(v=r();v!==null;)s.push(v),v=r();s!==null?d=[d,w,s]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=m);m=f!==null?f:null}}}(k=e)&&m===null&&h("[19] GroupCondition");y[b]={nextPos:a,result:m};return m}function ga(){var b="HavingClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a;if(c.substr(a,6)==="HAVING"){var f="HAVING";a+=6}else f=null,k&&h('"HAVING"');if(f!==null){var d=Da();if(d!==null)for(var w=
[];d!==null;)w.push(d),d=Da();else w=null;w!==null?f=[f,w]:(f=null,a=m)}else f=null,a=m;(k=e)&&f===null&&h("[20] HavingClause");y[b]={nextPos:a,result:f};return f}function ka(){var b="OrderClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="O"){var d="O";a+=1}else d=null,k&&h('"O"');d===null&&(c.substr(a,1)==="o"?(d="o",a+=1):(d=null,k&&h('"o"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,k&&h('"R"');w===null&&(c.substr(a,
1)==="r"?(w="r",a+=1):(w=null,k&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="D"){var s="D";a+=1}else s=null,k&&h('"D"');s===null&&(c.substr(a,1)==="d"?(s="d",a+=1):(s=null,k&&h('"d"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=null,k&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):
(z=null,k&&h('"r"')),z=z!==null?z:null);if(z!==null){for(var i=[],j=r();j!==null;)i.push(j),j=r();if(i!==null)if(c.substr(a,1)==="B"?(j="B",a+=1):(j=null,k&&h('"B"')),j===null&&(c.substr(a,1)==="b"?(j="b",a+=1):(j=null,k&&h('"b"')),j=j!==null?j:null),j!==null){if(c.substr(a,1)==="Y"){var g="Y";a+=1}else g=null,k&&h('"Y"');g===null&&(c.substr(a,1)==="y"?(g="y",a+=1):(g=null,k&&h('"y"')),g=g!==null?g:null);if(g!==null){for(var S=[],n=r();n!==null;)S.push(n),n=r();if(S!==null){var q=ma();if(q!==null)for(n=
[];q!==null;)n.push(q),q=ma();else n=null;if(n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?d=[d,w,s,v,z,i,j,g,S,n,q]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[9]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[22] OrderClause");y[b]={nextPos:a,result:f};return f}function ma(){var b="OrderCondition@"+a,e=y[b];if(e)return a=e.nextPos,e.result;
e=k;k=!1;var m=a,f=a;if(c.substr(a,3)==="ASC"){var d="ASC";a+=3}else d=null,k&&h('"ASC"');d===null&&(c.substr(a,4)==="DESC"?(d="DESC",a+=4):(d=null,k&&h('"DESC"')),d=d!==null?d:null);if(d!==null){for(var w=[],s=r();s!==null;)w.push(s),s=r();if(w!==null)if(s=Ka(),s!==null){for(var v=[],z=r();z!==null;)v.push(z),z=r();v!==null?d=[d,w,s,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?{direction:d[0],expression:d[2]}:null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=m=a;d=
Da();d===null&&(d=U(),d=d!==null?d:null);if(d!==null){w=[];for(s=r();s!==null;)w.push(s),s=r();w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.token==="var"&&(a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a});return{direction:"ASC",expression:a}}(d[0]):null;f===null&&(f=null,a=m);m=f!==null?f:null}(k=e)&&m===null&&h("[23] OrderCondition");y[b]={nextPos:a,result:m};return m}function za(){var c="LimitOffsetClauses@"+a,b=y[c];if(b)return a=b.nextPos,
b.result;b=k;k=!1;var e=a,f=a,d=$a();if(d!==null){var w=ab(),w=w!==null?w:"";w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;d!==null?f=d:(f=a,d=ab(),d!==null?(w=$a(),w=w!==null?w:"",w!==null?d=[d,w]:(d=null,a=f)):(d=null,a=f),f=d!==null?d:null);f=f!==null?function(a){for(var c={},b=0;b<a.length;b++){var d=a[b];if(d.limit!=null)c.limit=d.limit;else if(d.offset!=null)c.offset=d.offset}return c}(f):null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[24] LimitOffsetClauses");y[c]={nextPos:a,result:f};return f}
function $a(){var b="LimitClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="L"){var d="L";a+=1}else d=null,k&&h('"L"');d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,k&&h('"l"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="I"){var w="I";a+=1}else w=null,k&&h('"I"');w===null&&(c.substr(a,1)==="i"?(w="i",a+=1):(w=null,k&&h('"i"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="M"){var s="M";a+=1}else s=null,k&&h('"M"');s===null&&(c.substr(a,
1)==="m"?(s="m",a+=1):(s=null,k&&h('"m"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="I"){var v="I";a+=1}else v=null,k&&h('"I"');v===null&&(c.substr(a,1)==="i"?(v="i",a+=1):(v=null,k&&h('"i"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var z="T";a+=1}else z=null,k&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,k&&h('"t"')),z=z!==null?z:null);if(z!==null){for(var i=[],j=r();j!==null;)i.push(j),j=r();if(i!==null)if(j=ha(),j!==null){for(var g=[],S=r();S!==null;)g.push(S),
S=r();g!==null?d=[d,w,s,v,z,i,j,g]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?{limit:parseInt(d[6].value)}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[25] LimitClause");y[b]={nextPos:a,result:f};return f}function ab(){var b="OffsetClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="O"){var d="O";a+=1}else d=null,k&&h('"O"');d===null&&(c.substr(a,1)==="o"?(d="o",
a+=1):(d=null,k&&h('"o"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="F"){var w="F";a+=1}else w=null,k&&h('"F"');w===null&&(c.substr(a,1)==="f"?(w="f",a+=1):(w=null,k&&h('"f"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="F"){var s="F";a+=1}else s=null,k&&h('"F"');s===null&&(c.substr(a,1)==="f"?(s="f",a+=1):(s=null,k&&h('"f"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="S"){var v="S";a+=1}else v=null,k&&h('"S"');v===null&&(c.substr(a,1)==="s"?(v="s",a+=1):(v=null,k&&h('"s"')),
v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var z="E";a+=1}else z=null,k&&h('"E"');z===null&&(c.substr(a,1)==="e"?(z="e",a+=1):(z=null,k&&h('"e"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,k&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,k&&h('"t"')),i=i!==null?i:null);if(i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null)if(g=ha(),g!==null){for(var S=[],n=r();n!==null;)S.push(n),n=r();S!==null?d=[d,w,s,v,z,i,j,g,
S]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?{offset:parseInt(d[7].value)}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[26] OffsetClause");y[b]={nextPos:a,result:f};return f}function Ba(){var b="BindingsClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a;if(c.substr(a,8)==="BINDINGS"){var f="BINDINGS";a+=8}else f=null,k&&h('"BINDINGS"');if(f!==null){for(var d=[],w=U();w!==
null;)d.push(w),w=U();if(d!==null)if(c.substr(a,1)==="{"?(w="{",a+=1):(w=null,k&&h('"{"')),w!==null){var s=[],v=a;if(c.substr(a,1)==="("){var z="(";a+=1}else z=null,k&&h('"("');if(z!==null){var i=Aa();if(i!==null)for(var j=[];i!==null;)j.push(i),i=Aa();else j=null;j!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,k&&h('")"')),i!==null?z=[z,j,i]:(z=null,a=v)):(z=null,a=v)}else z=null,a=v;z!==null?v=z:(v=pa(),v=v!==null?v:null);for(;v!==null;){s.push(v);v=a;c.substr(a,1)==="("?(z="(",a+=1):(z=null,
k&&h('"("'));if(z!==null){i=Aa();if(i!==null)for(j=[];i!==null;)j.push(i),i=Aa();else j=null;j!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,k&&h('")"')),i!==null?z=[z,j,i]:(z=null,a=v)):(z=null,a=v)}else z=null,a=v;z!==null?v=z:(v=pa(),v=v!==null?v:null)}s!==null?(c.substr(a,1)==="}"?(v="}",a+=1):(v=null,k&&h('"}"')),v!==null?f=[f,d,w,s,v]:(f=null,a=m)):(f=null,a=m)}else f=null,a=m;else f=null,a=m}else f=null,a=m;m=f!==null?f:"";(k=e)&&m===null&&h("[27] BindingsClause");y[b]={nextPos:a,result:m};
return m}function Aa(){var b="BindingValue@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=V();m===null&&(m=La(),m===null&&(m=Ma(),m===null&&(m=Na(),m===null&&(c.substr(a,5)==="UNDEF"?(m="UNDEF",a+=5):(m=null,k&&h('"UNDEF"')),m=m!==null?m:null))));(k=e)&&m===null&&h("[28] BindingValue");y[b]={nextPos:a,result:m};return m}function bb(){var b="Update@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a,d=q();if(d!==null){for(var w=[],s=r();s!==null;)w.push(s),s=r();if(w!==null)if(s=
yb(),s!==null){for(var v=a,z=[],i=r();i!==null;)z.push(i),i=r();if(z!==null)if(c.substr(a,1)===";"?(i=";",a+=1):(i=null,k&&h('";"')),i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();j!==null?(g=bb(),g=g!==null?g:"",g!==null?z=[z,i,j,g]:(z=null,a=v)):(z=null,a=v)}else z=null,a=v;else z=null,a=v;v=z!==null?z:"";v!==null?d=[d,w,s,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){var d={token:"query",kind:"update"};d.prologue=a;a=[c];b.length!=null&&b[3]!=
null&&b[3].units!=null&&(a=a.concat(b[3].units));d.units=a;return d}(d[0],d[2],d[3]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[30] Update");y[b]={nextPos:a,result:f};return f}function yb(){var c="Update1@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=zb();e===null&&(e=Db(),e===null&&(e=Eb(),e===null&&(e=Fb(),e===null&&(e=Gb(),e===null&&(e=Hb(),e===null&&(e=Bb(),e===null&&(e=Cb(),e=e!==null?e:null)))))));(k=b)&&e===null&&h("[31] Update1");y[c]={nextPos:a,result:e};return e}function zb(){var b=
"Load@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="L"){var d="L";a+=1}else d=null,k&&h('"L"');d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,k&&h('"l"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var w="O";a+=1}else w=null,k&&h('"O"');w===null&&(c.substr(a,1)==="o"?(w="o",a+=1):(w=null,k&&h('"o"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="A"){var s="A";a+=1}else s=null,k&&h('"A"');s===null&&(c.substr(a,1)==="a"?(s="a",a+=1):(s=
null,k&&h('"a"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="D"){var v="D";a+=1}else v=null,k&&h('"D"');v===null&&(c.substr(a,1)==="d"?(v="d",a+=1):(v=null,k&&h('"d"')),v=v!==null?v:null);if(v!==null){for(var z=[],i=r();i!==null;)z.push(i),i=r();if(z!==null)if(i=V(),i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null){g=a;if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,k&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,k&&h('"i"')),n=n!==null?n:null);if(n!==
null){if(c.substr(a,1)==="N"){var q="N";a+=1}else q=null,k&&h('"N"');q===null&&(c.substr(a,1)==="n"?(q="n",a+=1):(q=null,k&&h('"n"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="T"){var o="T";a+=1}else o=null,k&&h('"T"');o===null&&(c.substr(a,1)==="t"?(o="t",a+=1):(o=null,k&&h('"t"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="O"){var t="O";a+=1}else t=null,k&&h('"O"');t===null&&(c.substr(a,1)==="o"?(t="o",a+=1):(t=null,k&&h('"o"')),t=t!==null?t:null);if(t!==null){for(var A=[],u=
r();u!==null;)A.push(u),u=r();A!==null?(u=Oa(),u!==null?n=[n,q,o,t,A,u]:(n=null,a=g)):(n=null,a=g)}else n=null,a=g}else n=null,a=g}else n=null,a=g}else n=null,a=g;g=n!==null?n:"";g!==null?d=[d,w,s,v,z,i,j,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b={kind:"load",token:"executableunit"};b.sourceGraph=a;b.destinyGraph=c[5];return b}(d[5],d[7]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&
h("[32] Load");y[b]={nextPos:a,result:f};return f}function Db(){var b="Clear@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,k&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,k&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="L"){var w="L";a+=1}else w=null,k&&h('"L"');w===null&&(c.substr(a,1)==="l"?(w="l",a+=1):(w=null,k&&h('"l"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=
null,k&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,k&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,k&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,k&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=null,k&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,k&&h('"r"')),z=z!==null?z:null);if(z!==null){for(var i=[],j=r();j!==null;)i.push(j),j=r();if(i!==null){j=a;if(c.substr(a,
1)==="S"){var g="S";a+=1}else g=null,k&&h('"S"');g===null&&(c.substr(a,1)==="s"?(g="s",a+=1):(g=null,k&&h('"s"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,k&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,k&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="L"){var q="L";a+=1}else q=null,k&&h('"L"');q===null&&(c.substr(a,1)==="l"?(q="l",a+=1):(q=null,k&&h('"l"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="E"){var o="E";a+=
1}else o=null,k&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,k&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="N"){var t="N";a+=1}else t=null,k&&h('"N"');t===null&&(c.substr(a,1)==="n"?(t="n",a+=1):(t=null,k&&h('"n"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="T"){var A="T";a+=1}else A=null,k&&h('"T"');A===null&&(c.substr(a,1)==="t"?(A="t",a+=1):(A=null,k&&h('"t"')),A=A!==null?A:null);A!==null?g=[g,n,q,o,t,A]:(g=null,a=j)}else g=null,a=j}else g=null,a=j}else g=
null,a=j}else g=null,a=j}else g=null,a=j;j=g!==null?g:"";if(j!==null){g=[];for(n=r();n!==null;)g.push(n),n=r();g!==null?(n=hb(),n!==null?d=[d,w,s,v,z,i,j,g,n]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"clear",token:"executableunit"};c.destinyGraph=a;return c}(d[8]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[33] Clear");y[b]={nextPos:a,result:f};return f}function Eb(){var b=
"Drop@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,k&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,k&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,k&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,k&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="O"){var s="O";a+=1}else s=null,k&&h('"O"');s===null&&(c.substr(a,1)==="o"?(s="o",a+=1):(s=
null,k&&h('"o"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,k&&h('"P"');v===null&&(c.substr(a,1)==="p"?(v="p",a+=1):(v=null,k&&h('"p"')),v=v!==null?v:null);if(v!==null){for(var z=[],i=r();i!==null;)z.push(i),i=r();if(z!==null){i=a;if(c.substr(a,1)==="S"){var j="S";a+=1}else j=null,k&&h('"S"');j===null&&(c.substr(a,1)==="s"?(j="s",a+=1):(j=null,k&&h('"s"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="I"){var g="I";a+=1}else g=null,k&&h('"I"');g===null&&
(c.substr(a,1)==="i"?(g="i",a+=1):(g=null,k&&h('"i"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="L"){var n="L";a+=1}else n=null,k&&h('"L"');n===null&&(c.substr(a,1)==="l"?(n="l",a+=1):(n=null,k&&h('"l"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var q="E";a+=1}else q=null,k&&h('"E"');q===null&&(c.substr(a,1)==="e"?(q="e",a+=1):(q=null,k&&h('"e"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="N"){var o="N";a+=1}else o=null,k&&h('"N"');o===null&&(c.substr(a,1)==="n"?
(o="n",a+=1):(o=null,k&&h('"n"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var t="T";a+=1}else t=null,k&&h('"T"');t===null&&(c.substr(a,1)==="t"?(t="t",a+=1):(t=null,k&&h('"t"')),t=t!==null?t:null);t!==null?j=[j,g,n,q,o,t]:(j=null,a=i)}else j=null,a=i}else j=null,a=i}else j=null,a=i}else j=null,a=i}else j=null,a=i;i=j!==null?j:"";if(i!==null){j=[];for(g=r();g!==null;)j.push(g),g=r();j!==null?(g=hb(),g!==null?d=[d,w,s,v,z,i,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,
a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"drop",token:"executableunit"};c.destinyGraph=a;return c}(d[7]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[34] Drop");y[b]={nextPos:a,result:f};return f}function Fb(){var b="Create@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,k&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,k&&h('"c"')),d=d!==null?d:null);
if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,k&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,k&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,k&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,k&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,k&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,k&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,
1)==="T"){var z="T";a+=1}else z=null,k&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,k&&h('"t"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,k&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,k&&h('"e"')),i=i!==null?i:null);if(i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null){g=a;if(c.substr(a,1)==="S"){var n="S";a+=1}else n=null,k&&h('"S"');n===null&&(c.substr(a,1)==="s"?(n="s",a+=1):(n=null,k&&h('"s"')),n=n!==
null?n:null);if(n!==null){if(c.substr(a,1)==="I"){var q="I";a+=1}else q=null,k&&h('"I"');q===null&&(c.substr(a,1)==="i"?(q="i",a+=1):(q=null,k&&h('"i"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="L"){var o="L";a+=1}else o=null,k&&h('"L"');o===null&&(c.substr(a,1)==="l"?(o="l",a+=1):(o=null,k&&h('"l"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="E"){var t="E";a+=1}else t=null,k&&h('"E"');t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,k&&h('"e"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,
1)==="N"){var A="N";a+=1}else A=null,k&&h('"N"');A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,k&&h('"n"')),A=A!==null?A:null);if(A!==null){if(c.substr(a,1)==="T"){var u="T";a+=1}else u=null,k&&h('"T"');u===null&&(c.substr(a,1)==="t"?(u="t",a+=1):(u=null,k&&h('"t"')),u=u!==null?u:null);u!==null?n=[n,q,o,t,A,u]:(n=null,a=g)}else n=null,a=g}else n=null,a=g}else n=null,a=g}else n=null,a=g}else n=null,a=g;g=n!==null?n:"";if(g!==null){n=[];for(q=r();q!==null;)n.push(q),q=r();n!==null?(q=Oa(),q!==
null?d=[d,w,s,v,z,i,j,g,n,q]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"create",token:"executableunit"};c.destinyGraph=a;return c}(d[9]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[35] Create");y[b]={nextPos:a,result:f};return f}function Gb(){var b="InsertData@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="I"){var d=
"I";a+=1}else d=null,k&&h('"I"');d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,k&&h('"i"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="N"){var w="N";a+=1}else w=null,k&&h('"N"');w===null&&(c.substr(a,1)==="n"?(w="n",a+=1):(w=null,k&&h('"n"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="S"){var s="S";a+=1}else s=null,k&&h('"S"');s===null&&(c.substr(a,1)==="s"?(s="s",a+=1):(s=null,k&&h('"s"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,
k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=null,k&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,k&&h('"r"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,k&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,k&&h('"t"')),i=i!==null?i:null);if(i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null)if(c.substr(a,1)===
"D"?(g="D",a+=1):(g=null,k&&h('"D"')),g===null&&(c.substr(a,1)==="d"?(g="d",a+=1):(g=null,k&&h('"d"')),g=g!==null?g:null),g!==null){if(c.substr(a,1)==="A"){var n="A";a+=1}else n=null,k&&h('"A"');n===null&&(c.substr(a,1)==="a"?(n="a",a+=1):(n=null,k&&h('"a"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="T"){var q="T";a+=1}else q=null,k&&h('"T"');q===null&&(c.substr(a,1)==="t"?(q="t",a+=1):(q=null,k&&h('"t"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,
k&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,k&&h('"a"')),o=o!==null?o:null);if(o!==null){for(var t=[],A=r();A!==null;)t.push(A),A=r();t!==null?(A=ib(),A!==null?d=[d,w,s,v,z,i,j,g,n,q,o,t,A]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"insertdata",token:"executableunit"};c.quads=a;return c}(d[12]):
null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[36] InsertData");y[b]={nextPos:a,result:f};return f}function Hb(){var b="DeleteData@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,k&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,k&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,k&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,k&&h('"e"')),w=w!==null?w:null);
if(w!==null){if(c.substr(a,1)==="L"){var s="L";a+=1}else s=null,k&&h('"L"');s===null&&(c.substr(a,1)==="l"?(s="l",a+=1):(s=null,k&&h('"l"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var z="T";a+=1}else z=null,k&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,k&&h('"t"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,
1)==="E"){var i="E";a+=1}else i=null,k&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,k&&h('"e"')),i=i!==null?i:null);if(i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null)if(c.substr(a,1)==="D"?(g="D",a+=1):(g=null,k&&h('"D"')),g===null&&(c.substr(a,1)==="d"?(g="d",a+=1):(g=null,k&&h('"d"')),g=g!==null?g:null),g!==null){if(c.substr(a,1)==="A"){var n="A";a+=1}else n=null,k&&h('"A"');n===null&&(c.substr(a,1)==="a"?(n="a",a+=1):(n=null,k&&h('"a"')),n=n!==null?n:null);
if(n!==null){if(c.substr(a,1)==="T"){var q="T";a+=1}else q=null,k&&h('"T"');q===null&&(c.substr(a,1)==="t"?(q="t",a+=1):(q=null,k&&h('"t"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,k&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,k&&h('"a"')),o=o!==null?o:null);if(o!==null){var t=ib();t!==null?d=[d,w,s,v,z,i,j,g,n,q,o,t]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,
a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"deletedata",token:"executableunit"};c.quads=a;return c}(d[11]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[37] DeleteData");y[b]={nextPos:a,result:f};return f}function Bb(){var b="DeleteWhere@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,k&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,k&&h('"d"')),d=d!==null?
d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,k&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,k&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="L"){var s="L";a+=1}else s=null,k&&h('"L"');s===null&&(c.substr(a,1)==="l"?(s="l",a+=1):(s=null,k&&h('"l"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,
1)==="T"){var z="T";a+=1}else z=null,k&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,k&&h('"t"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,k&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,k&&h('"e"')),i=i!==null?i:null);if(i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();if(j!==null)if(c.substr(a,1)==="W"?(g="W",a+=1):(g=null,k&&h('"W"')),g===null&&(c.substr(a,1)==="w"?(g="w",a+=1):(g=null,k&&h('"w"')),g=g!==null?g:null),
g!==null){if(c.substr(a,1)==="H"){var n="H";a+=1}else n=null,k&&h('"H"');n===null&&(c.substr(a,1)==="h"?(n="h",a+=1):(n=null,k&&h('"h"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var q="E";a+=1}else q=null,k&&h('"E"');q===null&&(c.substr(a,1)==="e"?(q="e",a+=1):(q=null,k&&h('"e"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="R"){var o="R";a+=1}else o=null,k&&h('"R"');o===null&&(c.substr(a,1)==="r"?(o="r",a+=1):(o=null,k&&h('"r"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,
1)==="E"){var t="E";a+=1}else t=null,k&&h('"E"');t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,k&&h('"e"')),t=t!==null?t:null);if(t!==null){for(var A=[],u=r();u!==null;)A.push(u),u=r();A!==null?(u=$(),u!==null?d=[d,w,s,v,z,i,j,g,n,q,o,t,A,u]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"modify"};
c.pattern=a;c["with"]=null;c.using=null;for(var b=[],a=a.patterns[0],a=a.triplesContext==null&&a.patterns!=null?a.patterns[0].triplesContext:a.triplesContext,d=0;d<a.length;d++){var f={},h=a[d];f.subject=h.subject;f.predicate=h.predicate;f.object=h.object;f.graph=h.graph;b.push(f)}c["delete"]=b;return c}(d[13]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[38] DeleteWhere");y[b]={nextPos:a,result:f};return f}function Cb(){var b="Modify@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=
a,f=a,d=a;if(c.substr(a,1)==="W"){var w="W";a+=1}else w=null,k&&h('"W"');w===null&&(c.substr(a,1)==="w"?(w="w",a+=1):(w=null,k&&h('"w"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="I"){var s="I";a+=1}else s=null,k&&h('"I"');s===null&&(c.substr(a,1)==="i"?(s="i",a+=1):(s=null,k&&h('"i"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,k&&h('"T"');v===null&&(c.substr(a,1)==="t"?(v="t",a+=1):(v=null,k&&h('"t"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,
1)==="H"){var z="H";a+=1}else z=null,k&&h('"H"');z===null&&(c.substr(a,1)==="h"?(z="h",a+=1):(z=null,k&&h('"h"')),z=z!==null?z:null);if(z!==null){for(var i=[],j=r();j!==null;)i.push(j),j=r();i!==null?(j=V(),j!==null?w=[w,s,v,z,i,j]:(w=null,a=d)):(w=null,a=d)}else w=null,a=d}else w=null,a=d}else w=null,a=d}else w=null,a=d;d=w!==null?w:"";if(d!==null){w=[];for(s=r();s!==null;)w.push(s),s=r();if(w!==null){s=a;v=Ib();if(v!==null){z=[];for(i=r();i!==null;)z.push(i),i=r();z!==null?(i=cb(),i=i!==null?i:
"",i!==null?v=[v,z,i]:(v=null,a=s)):(v=null,a=s)}else v=null,a=s;v!==null?s=v:(s=cb(),s=s!==null?s:null);if(s!==null){v=[];for(z=r();z!==null;)v.push(z),z=r();if(v!==null){z=[];for(i=jb();i!==null;)z.push(i),i=jb();if(z!==null){i=[];for(j=r();j!==null;)i.push(j),j=r();if(i!==null)if(c.substr(a,1)==="W"?(j="W",a+=1):(j=null,k&&h('"W"')),j===null&&(c.substr(a,1)==="w"?(j="w",a+=1):(j=null,k&&h('"w"')),j=j!==null?j:null),j!==null){if(c.substr(a,1)==="H"){var g="H";a+=1}else g=null,k&&h('"H"');g===null&&
(c.substr(a,1)==="h"?(g="h",a+=1):(g=null,k&&h('"h"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,k&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,k&&h('"e"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="R"){var q="R";a+=1}else q=null,k&&h('"R"');q===null&&(c.substr(a,1)==="r"?(q="r",a+=1):(q=null,k&&h('"r"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,k&&h('"E"');o===null&&(c.substr(a,1)==="e"?
(o="e",a+=1):(o=null,k&&h('"e"')),o=o!==null?o:null);if(o!==null){for(var t=[],A=r();A!==null;)t.push(A),A=r();if(t!==null)if(A=$(),A!==null){for(var u=[],x=r();x!==null;)u.push(x),x=r();u!==null?d=[d,w,s,v,z,i,j,g,n,q,o,t,A,u]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b,d){var f={kind:"modify"};f["with"]=
a!=""?a[5]:null;c.length===3&&c[2]===""?(f["delete"]=c[0],f.insert=null):c.length===3&&c[0].length!=null&&c[1].length!=null&&c[2].length!=null?(f["delete"]=c[0],f.insert=c[2]):(f.insert=c,f["delete"]=null);b!=""&&(f.using=b);f.pattern=d;return f}(d[0],d[2],d[4],d[12]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[39] Modify");y[b]={nextPos:a,result:f};return f}function Ib(){var b="DeleteClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=
1}else d=null,k&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,k&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,k&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,k&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="L"){var s="L";a+=1}else s=null,k&&h('"L"');s===null&&(c.substr(a,1)==="l"?(s="l",a+=1):(s=null,k&&h('"l"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');
v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,k&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,k&&h('"t"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="E"){var j="E";a+=1}else j=null,k&&h('"E"');j===null&&(c.substr(a,1)==="e"?(j="e",a+=1):(j=null,k&&h('"e"')),j=j!==null?j:null);if(j!==null){var g=kb();g!==null?d=[d,w,s,v,i,j,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=
null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[6]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[40] DeleteClause");y[b]={nextPos:a,result:f};return f}function cb(){var b="InsertClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="I"){var d="I";a+=1}else d=null,k&&h('"I"');d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,k&&h('"i"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="N"){var w="N";a+=1}else w=null,k&&h('"N"');w===
null&&(c.substr(a,1)==="n"?(w="n",a+=1):(w=null,k&&h('"n"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="S"){var s="S";a+=1}else s=null,k&&h('"S"');s===null&&(c.substr(a,1)==="s"?(s="s",a+=1):(s=null,k&&h('"s"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,k&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var i="R";a+=1}else i=null,k&&h('"R"');i===null&&(c.substr(a,1)===
"r"?(i="r",a+=1):(i=null,k&&h('"r"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="T"){var j="T";a+=1}else j=null,k&&h('"T"');j===null&&(c.substr(a,1)==="t"?(j="t",a+=1):(j=null,k&&h('"t"')),j=j!==null?j:null);if(j!==null){var g=kb();g!==null?d=[d,w,s,v,i,j,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[6]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[41] InsertClause");y[b]={nextPos:a,result:f};return f}function jb(){var b=
"UsingClause@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="U"?(w="U",a+=1):(w=null,k&&h('"U"')),w===null&&(c.substr(a,1)==="u"?(w="u",a+=1):(w=null,k&&h('"u"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="S"){var s="S";a+=1}else s=null,k&&h('"S"');s===null&&(c.substr(a,1)==="s"?(s="s",a+=1):(s=null,k&&h('"s"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="I"){var v="I";a+=1}else v=null,k&&h('"I"');
v===null&&(c.substr(a,1)==="i"?(v="i",a+=1):(v=null,k&&h('"i"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="N"){var i="N";a+=1}else i=null,k&&h('"N"');i===null&&(c.substr(a,1)==="n"?(i="n",a+=1):(i=null,k&&h('"n"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="G"){var j="G";a+=1}else j=null,k&&h('"G"');j===null&&(c.substr(a,1)==="g"?(j="g",a+=1):(j=null,k&&h('"g"')),j=j!==null?j:null);if(j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null){n=V();if(n===null){n=a;if(c.substr(a,
1)==="N"){var q="N";a+=1}else q=null,k&&h('"N"');q===null&&(c.substr(a,1)==="n"?(q="n",a+=1):(q=null,k&&h('"n"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,k&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,k&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="M"){var t="M";a+=1}else t=null,k&&h('"M"');t===null&&(c.substr(a,1)==="m"?(t="m",a+=1):(t=null,k&&h('"m"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var u="E";a+=
1}else u=null,k&&h('"E"');u===null&&(c.substr(a,1)==="e"?(u="e",a+=1):(u=null,k&&h('"e"')),u=u!==null?u:null);if(u!==null){if(c.substr(a,1)==="D"){var A="D";a+=1}else A=null,k&&h('"D"');A===null&&(c.substr(a,1)==="d"?(A="d",a+=1):(A=null,k&&h('"d"')),A=A!==null?A:null);if(A!==null){for(var x=[],B=r();B!==null;)x.push(B),B=r();x!==null?(B=V(),B!==null?q=[q,o,t,u,A,x,B]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n}else q=null,a=n}else q=null,a=n}else q=null,a=n}else q=null,a=n;n=q!==null?q:null}n!==null?
d=[d,w,s,v,i,j,g,n]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[7].length!=null?{kind:"named",uri:d[7][6]}:{kind:"default",uri:d[7]}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[42] UsingClause");y[b]={nextPos:a,result:f};return f}function Oa(){var b="GraphRef@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="G"){var d="G";a+=1}else d=null,k&&h('"G"');d===null&&(c.substr(a,
1)==="g"?(d="g",a+=1):(d=null,k&&h('"g"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,k&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,k&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="A"){var s="A";a+=1}else s=null,k&&h('"A"');s===null&&(c.substr(a,1)==="a"?(s="a",a+=1):(s=null,k&&h('"a"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,k&&h('"P"');v===null&&(c.substr(a,1)==="p"?(v="p",a+=1):
(v=null,k&&h('"p"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="H"){var i="H";a+=1}else i=null,k&&h('"H"');i===null&&(c.substr(a,1)==="h"?(i="h",a+=1):(i=null,k&&h('"h"')),i=i!==null?i:null);if(i!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();j!==null?(g=V(),g!==null?d=[d,w,s,v,i,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[6]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[43] GraphRef");y[b]={nextPos:a,
result:f};return f}function hb(){var b="GraphRefAll@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=Oa(),f=f!==null?f:null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=m=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,k&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,k&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,k&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,k&&h('"e"')),w=w!==null?w:null);if(w!==
null){if(c.substr(a,1)==="F"){var s="F";a+=1}else s=null,k&&h('"F"');s===null&&(c.substr(a,1)==="f"?(s="f",a+=1):(s=null,k&&h('"f"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,k&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,k&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="U"){var i="U";a+=1}else i=null,k&&h('"U"');i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,k&&h('"u"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)===
"L"){var j="L";a+=1}else j=null,k&&h('"L"');j===null&&(c.substr(a,1)==="l"?(j="l",a+=1):(j=null,k&&h('"l"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="T"){var g="T";a+=1}else g=null,k&&h('"T"');g===null&&(c.substr(a,1)==="t"?(g="t",a+=1):(g=null,k&&h('"t"')),g=g!==null?g:null);g!==null?d=[d,w,s,v,i,j,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?"default":null;f===null&&(f=null,a=m);f!==null?m=f:(f=m=a,c.substr(a,
1)==="N"?(d="N",a+=1):(d=null,k&&h('"N"')),d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,k&&h('"n"')),d=d!==null?d:null),d!==null?(c.substr(a,1)==="A"?(w="A",a+=1):(w=null,k&&h('"A"')),w===null&&(c.substr(a,1)==="a"?(w="a",a+=1):(w=null,k&&h('"a"')),w=w!==null?w:null),w!==null?(c.substr(a,1)==="M"?(s="M",a+=1):(s=null,k&&h('"M"')),s===null&&(c.substr(a,1)==="m"?(s="m",a+=1):(s=null,k&&h('"m"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="E"?(v="E",a+=1):(v=null,k&&h('"E"')),v===null&&(c.substr(a,
1)==="e"?(v="e",a+=1):(v=null,k&&h('"e"')),v=v!==null?v:null),v!==null?(c.substr(a,1)==="D"?(i="D",a+=1):(i=null,k&&h('"D"')),i===null&&(c.substr(a,1)==="d"?(i="d",a+=1):(i=null,k&&h('"d"')),i=i!==null?i:null),i!==null?d=[d,w,s,v,i]:(d=null,a=f)):(d=null,a=f)):(d=null,a=f)):(d=null,a=f)):(d=null,a=f),f=d!==null?"named":null,f===null&&(f=null,a=m),f!==null?m=f:(f=m=a,c.substr(a,1)==="A"?(d="A",a+=1):(d=null,k&&h('"A"')),d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,k&&h('"a"')),d=d!==null?d:
null),d!==null?(c.substr(a,1)==="L"?(w="L",a+=1):(w=null,k&&h('"L"')),w===null&&(c.substr(a,1)==="l"?(w="l",a+=1):(w=null,k&&h('"l"')),w=w!==null?w:null),w!==null?(c.substr(a,1)==="L"?(s="L",a+=1):(s=null,k&&h('"L"')),s===null&&(c.substr(a,1)==="l"?(s="l",a+=1):(s=null,k&&h('"l"')),s=s!==null?s:null),s!==null?d=[d,w,s]:(d=null,a=f)):(d=null,a=f)):(d=null,a=f),f=d!==null?"all":null,f===null&&(f=null,a=m),m=f!==null?f:null))}(k=e)&&m===null&&h("[44] GraphRefAll");y[b]={nextPos:a,result:m};return m}
function kb(){var b="QuadPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="{"?(w="{",a+=1):(w=null,k&&h('"{"')),w!==null){for(var s=[],v=r();v!==null;)s.push(v),v=r();if(s!==null)if(v=lb(),v!==null){for(var i=[],j=r();j!==null;)i.push(j),j=r();if(i!==null)if(c.substr(a,1)==="}"?(j="}",a+=1):(j=null,k&&h('"}"')),j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();g!==null?d=[d,w,s,v,i,j,g]:(d=null,a=
f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[3].quadsContext:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[45] QuadPattern");y[b]={nextPos:a,result:f};return f}function ib(){var b="QuadData@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],w=r();w!==null;)d.push(w),w=r();if(d!==null)if(c.substr(a,1)==="{"?(w="{",a+=1):(w=null,k&&h('"{"')),w!==null){for(var s=[],v=r();v!==null;)s.push(v),v=r();if(s!==null)if(v=
lb(),v!==null){for(var i=[],j=r();j!==null;)i.push(j),j=r();if(i!==null)if(c.substr(a,1)==="}"?(j="}",a+=1):(j=null,k&&h('"}"')),j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();g!==null?d=[d,w,s,v,i,j,g]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[3].quadsContext:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[46] QuadData");y[b]={nextPos:a,result:f};return f}function lb(){var b="Quads@"+a,e=y[b];if(e)return a=e.nextPos,
e.result;e=k;k=!1;var m=a,f=a,d=ua(),d=d!==null?d:"";if(d!==null){var w=[],s=a,v=mb();if(v!==null){if(c.substr(a,1)==="."){var i=".";a+=1}else i=null,k&&h('"."');i=i!==null?i:"";if(i!==null){var j=ua(),j=j!==null?j:"";j!==null?v=[v,i,j]:(v=null,a=s)}else v=null,a=s}else v=null,a=s;for(;v!==null;)w.push(v),s=a,v=mb(),v!==null?(c.substr(a,1)==="."?(i=".",a+=1):(i=null,k&&h('"."')),i=i!==null?i:"",i!==null?(j=ua(),j=j!==null?j:"",j!==null?v=[v,i,j]:(v=null,a=s)):(v=null,a=s)):(v=null,a=s);w!==null?d=
[d,w]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=[];if(a.triplesContext!=null&&a.triplesContext!=null)for(var d=0;d<a.triplesContext.length;d++){var f=a.triplesContext[d];f.graph=null;b.push(f)}if(c&&c.length>0&&c[0].length>0&&(b=b.concat(c[0][0].quadsContext),c[0][2]!=null&&c[0][2].triplesContext!=null))for(d=0;d<c[0][2].triplesContext.length;d++)f=c[0][2].triplesContext[d],f.graph=null,b.push(f);return{token:"quads",quadsContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=m);(k=e)&&
f===null&&h("[47] Quads");y[b]={nextPos:a,result:f};return f}function mb(){var b="QuadsNotTriples@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(c.substr(a,1)==="G"?(i="G",a+=1):(i=null,k&&h('"G"')),i===null&&(c.substr(a,1)==="g"?(i="g",a+=1):(i=null,k&&h('"g"')),i=i!==null?i:null),i!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,k&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,k&&h('"r"')),s=s!==
null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,k&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,k&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="P"){var j="P";a+=1}else j=null,k&&h('"P"');j===null&&(c.substr(a,1)==="p"?(j="p",a+=1):(j=null,k&&h('"p"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="H"){var g="H";a+=1}else g=null,k&&h('"H"');g===null&&(c.substr(a,1)==="h"?(g="h",a+=1):(g=null,k&&h('"h"')),g=g!==null?g:null);if(g!==null){for(var n=
[],q=r();q!==null;)n.push(q),q=r();if(n!==null)if(q=oa(),q!==null){for(var o=[],t=r();t!==null;)o.push(t),t=r();if(o!==null)if(c.substr(a,1)==="{"?(t="{",a+=1):(t=null,k&&h('"{"')),t!==null){for(var u=[],x=r();x!==null;)u.push(x),x=r();if(u!==null)if(x=ua(),x=x!==null?x:"",x!==null){for(var A=[],na=r();na!==null;)A.push(na),na=r();if(A!==null)if(c.substr(a,1)==="}"?(na="}",a+=1):(na=null,k&&h('"}"')),na!==null){for(var B=[],C=r();C!==null;)B.push(C),C=r();B!==null?d=[d,i,s,v,j,g,n,q,o,t,u,x,A,na,
B]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){for(var b=[],d=0;d<c.triplesContext.length;d++){var f=c.triplesContext[d];f.graph=a;b.push(f)}return{token:"quadsnottriples",quadsContext:b}}(d[7],d[11]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[48] QuadsNotTriples");y[b]={nextPos:a,
result:f};return f}function ua(){var b="TriplesTemplate@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a,d=nb();if(d!==null){for(var i=a,s=[],v=r();v!==null;)s.push(v),v=r();if(s!==null)if(c.substr(a,1)==="."?(v=".",a+=1):(v=null,k&&h('"."')),v!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();j!==null?(g=ua(),g=g!==null?g:"",g!==null?s=[s,v,j,g]:(s=null,a=i)):(s=null,a=i)}else s=null,a=i;else s=null,a=i;i=s!==null?s:"";i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,
c){var b=a.triplesContext;typeof c==="object"&&c.length!=null&&c[3].triplesContext!=null&&(b=b.concat(c[3].triplesContext));return{token:"triplestemplate",triplesContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[49] TriplesTemplate");y[b]={nextPos:a,result:f};return f}function $(){var b="GroupGraphPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="{"){var d="{";a+=1}else d=null,k&&h('"{"');if(d!==null){for(var m=[],s=r();s!==null;)m.push(s),
s=r();if(m!==null)if(s=G(),s!==null){for(var v=[],j=r();j!==null;)v.push(j),j=r();v!==null?(c.substr(a,1)==="}"?(j="}",a+=1):(j=null,k&&h('"}"')),j!==null?d=[d,m,s,v,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="{"?(d="{",a+=1):(d=null,k&&h('"{"'));if(d!==null){m=[];for(s=r();s!==null;)m.push(s),s=r();if(m!==null)if(s=Lb(),s!==null){v=[];for(j=r();j!==null;)v.push(j),j=r();v!==null?
(c.substr(a,1)==="}"?(j="}",a+=1):(j=null,k&&h('"}"')),j!==null?d=[d,m,s,v,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=i);i=f!==null?f:null}(k=e)&&i===null&&h("[50] GroupGraphPattern");y[b]={nextPos:a,result:i};return i}function Lb(){var b="GroupGraphPatternSub@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=sa(),d=d!==null?d:"";if(d!==null){for(var m=[],s=r();s!==null;)m.push(s),s=r();if(m!==null){var s=
[],v=a,j=ob();if(j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="."?(n=".",a+=1):(n=null,k&&h('"."')),n=n!==null?n:"",n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=sa(),o=o!==null?o:"",o!==null?j=[j,g,n,q,o]:(j=null,a=v)):(j=null,a=v)}else j=null,a=v;else j=null,a=v}else j=null,a=v;for(;j!==null;)if(s.push(j),v=a,j=ob(),j!==null){g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="."?(n=".",a+=1):(n=null,k&&h('"."')),
n=n!==null?n:"",n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=sa(),o=o!==null?o:"",o!==null?j=[j,g,n,q,o]:(j=null,a=v)):(j=null,a=v)}else j=null,a=v;else j=null,a=v}else j=null,a=v;s!==null?d=[d,m,s]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b=[];a!=null&&a!=[]&&b.push(a);for(var d=0;d<c.length;d++)for(var f=0;f<c[d].length;f++)c[d][f].token!=null&&b.push(c[d][f]);for(var h=[],e=[],k=[],d=0;d<b.length;d++)if(b[d].token!="triplespattern"&&b[d].token!=
"filter"){if(e.length!=0||k.length!=0){for(var s=[],f=0;f<e.length;f++)s=s.concat(e[f].triplesContext);s.length>0&&h.push({token:"basicgraphpattern",triplesContext:s});e=[]}h.push(b[d])}else b[d].token==="triplespattern"?e.push(b[d]):k.push(b[d]);if(e.length!=0||k.length!=0){s=[];for(f=0;f<e.length;f++)s=s.concat(e[f].triplesContext);s.length>0&&h.push({token:"basicgraphpattern",triplesContext:s})}return{token:"groupgraphpattern",patterns:h,filters:k}}(d[0],d[2]):null;f===null&&(f=null,a=i);(k=e)&&
f===null&&h("[51] GroupGraphPatternSub");y[b]={nextPos:a,result:f};return f}function sa(){var b="TriplesBlock@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=Mb();if(d!==null){for(var m=a,s=[],v=r();v!==null;)s.push(v),v=r();if(s!==null)if(c.substr(a,1)==="."?(v=".",a+=1):(v=null,k&&h('"."')),v!==null){var j=sa(),j=j!==null?j:"";j!==null?s=[s,v,j]:(s=null,a=m)}else s=null,a=m;else s=null,a=m;m=s!==null?s:"";m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=
a.triplesContext;typeof c==="object"&&c.length!=null&&c[2].triplesContext!=null&&(b=b.concat(c[2].triplesContext));return{token:"triplespattern",triplesContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[54] TriplesBlock");y[b]={nextPos:a,result:f};return f}function ob(){var c="GraphPatternNotTriples@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=Nb();e===null&&(e=Ob(),e===null&&(e=Pb(),e===null&&(e=Qb(),e===null&&(e=Rb(),e===null&&(e=Sb(),e=e!==null?e:null)))));(k=
b)&&e===null&&h("[53] GraphPatternNotTriples");y[c]={nextPos:a,result:e};return e}function Ob(){var b="OptionalGraphPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(c.substr(a,8)==="OPTIONAL"?(i="OPTIONAL",a+=8):(i=null,k&&h('"OPTIONAL"')),i!==null){for(var s=[],v=r();v!==null;)s.push(v),v=r();s!==null?(v=$(),v!==null?d=[d,i,s,v]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?{token:"optionalgraphpattern",
value:d[3]}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[54] OptionalGraphPattern");y[b]={nextPos:a,result:f};return f}function Qb(){var b="GraphGraphPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var i=a,f=a,d=[],m=r();m!==null;)d.push(m),m=r();if(d!==null)if(c.substr(a,1)==="G"?(m="G",a+=1):(m=null,k&&h('"G"')),m===null&&(c.substr(a,1)==="g"?(m="g",a+=1):(m=null,k&&h('"g"')),m=m!==null?m:null),m!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,k&&h('"R"');s===null&&
(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,k&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,k&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,k&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="P"){var j="P";a+=1}else j=null,k&&h('"P"');j===null&&(c.substr(a,1)==="p"?(j="p",a+=1):(j=null,k&&h('"p"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="H"){var g="H";a+=1}else g=null,k&&h('"H"');g===null&&(c.substr(a,1)==="h"?
(g="h",a+=1):(g=null,k&&h('"h"')),g=g!==null?g:null);if(g!==null){for(var n=[],q=r();q!==null;)n.push(q),q=r();if(n!==null)if(q=oa(),q!==null){for(var o=[],t=r();t!==null;)o.push(t),t=r();o!==null?(t=$(),t!==null?d=[d,m,s,v,j,g,n,q,o,t]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){for(var b=0;b<c.patterns.length;b++)for(var d=c.patterns[b],f=0;f<d.triplesContext.length;f++)d.triplesContext[f].graph=
a;c.token="groupgraphpattern";return c}(d[7],d[9]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[55] GraphGraphPattern");y[b]={nextPos:a,result:f};return f}function Rb(){var b="ServiceGraphPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,7)==="SERVICE"){var d="SERVICE";a+=7}else d=null,k&&h('"SERVICE"');if(d!==null){var i=oa();if(i!==null){var s=$();s!==null?d=[d,i,s]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?{token:"servicegraphpattern",status:"todo",
value:[d[1],d[2]]}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[56] ServiceGraphPattern");y[b]={nextPos:a,result:f};return f}function Pb(){var b="MinusGraphPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,5)==="MINUS"){var d="MINUS";a+=5}else d=null,k&&h('"MINUS"');if(d!==null){var i=$();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?{token:"minusgraphpattern",status:"todo",value:d[1]}:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[57] MinusGraphPattern");
y[b]={nextPos:a,result:f};return f}function Nb(){var b="GroupOrUnionGraphPattern@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a,d=$();if(d!==null){for(var i=[],s=a,v=[],j=r();j!==null;)v.push(j),j=r();if(v!==null)if(c.substr(a,1)==="U"?(j="U",a+=1):(j=null,k&&h('"U"')),j===null&&(c.substr(a,1)==="u"?(j="u",a+=1):(j=null,k&&h('"u"')),j=j!==null?j:null),j!==null){if(c.substr(a,1)==="N"){var g="N";a+=1}else g=null,k&&h('"N"');g===null&&(c.substr(a,1)==="n"?(g="n",a+=1):(g=null,k&&h('"n"')),
g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,k&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,k&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="O"){var q="O";a+=1}else q=null,k&&h('"O"');q===null&&(c.substr(a,1)==="o"?(q="o",a+=1):(q=null,k&&h('"o"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="N"){var o="N";a+=1}else o=null,k&&h('"N"');o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,k&&h('"n"')),o=o!==null?o:null);if(o!==
null){for(var t=[],u=r();u!==null;)t.push(u),u=r();t!==null?(u=$(),u!==null?v=[v,j,g,n,q,o,t,u]:(v=null,a=s)):(v=null,a=s)}else v=null,a=s}else v=null,a=s}else v=null,a=s}else v=null,a=s}else v=null,a=s;else v=null,a=s;for(;v!==null;){i.push(v);s=a;v=[];for(j=r();j!==null;)v.push(j),j=r();if(v!==null)if(c.substr(a,1)==="U"?(j="U",a+=1):(j=null,k&&h('"U"')),j===null&&(c.substr(a,1)==="u"?(j="u",a+=1):(j=null,k&&h('"u"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="N"?(g="N",a+=1):(g=null,k&&h('"N"')),
g===null&&(c.substr(a,1)==="n"?(g="n",a+=1):(g=null,k&&h('"n"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="I"?(n="I",a+=1):(n=null,k&&h('"I"')),n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,k&&h('"i"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="O"?(q="O",a+=1):(q=null,k&&h('"O"')),q===null&&(c.substr(a,1)==="o"?(q="o",a+=1):(q=null,k&&h('"o"')),q=q!==null?q:null),q!==null)if(c.substr(a,1)==="N"?(o="N",a+=1):(o=null,k&&h('"N"')),o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,
k&&h('"n"')),o=o!==null?o:null),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();t!==null?(u=$(),u!==null?v=[v,j,g,n,q,o,t,u]:(v=null,a=s)):(v=null,a=s)}else v=null,a=s;else v=null,a=s;else v=null,a=s;else v=null,a=s;else v=null,a=s;else v=null,a=s}i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;else{for(var b={token:"graphunionpattern",value:[a]},d=0;d<c.length;d++)d==c.length-1?b.value.push(c[d][7]):(b.value.push(c[d][7]),b={token:"graphunionpattern",
value:[b]});return b}}(d[0],d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[58] GroupOrUnionGraphPattern");y[b]={nextPos:a,result:f};return f}function Sb(){var b="Filter@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var m=a,f=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(c.substr(a,1)==="F"?(i="F",a+=1):(i=null,k&&h('"F"')),i===null&&(c.substr(a,1)==="f"?(i="f",a+=1):(i=null,k&&h('"f"')),i=i!==null?i:null),i!==null){if(c.substr(a,1)==="I"){var s="I";a+=1}else s=null,k&&h('"I"');
s===null&&(c.substr(a,1)==="i"?(s="i",a+=1):(s=null,k&&h('"i"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="L"){var v="L";a+=1}else v=null,k&&h('"L"');v===null&&(c.substr(a,1)==="l"?(v="l",a+=1):(v=null,k&&h('"l"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var j="T";a+=1}else j=null,k&&h('"T"');j===null&&(c.substr(a,1)==="t"?(j="t",a+=1):(j=null,k&&h('"t"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="E"){var g="E";a+=1}else g=null,k&&h('"E"');g===null&&(c.substr(a,
1)==="e"?(g="e",a+=1):(g=null,k&&h('"e"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="R"){var n="R";a+=1}else n=null,k&&h('"R"');n===null&&(c.substr(a,1)==="r"?(n="r",a+=1):(n=null,k&&h('"r"')),n=n!==null?n:null);if(n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=Da(),o!==null?d=[d,i,s,v,j,g,n,q,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?{token:"filter",value:d[8]}:
null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[59] Filter");y[b]={nextPos:a,result:f};return f}function Da(){var c="Constraint@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=Ka();e===null&&(e=Ja(),e===null&&(e=gb(),e=e!==null?e:null));(k=b)&&e===null&&h("[60] Constraint");y[c]={nextPos:a,result:e};return e}function gb(){var c="FunctionCall@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=V();if(d!==null){var i=pb();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==
null?function(a,c){var b={token:"expression",expressionType:"irireforfunction"};b.iriref=a;b.args=c.value;return b}(d[0],d[1]):null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[61] FunctionCall");y[c]={nextPos:a,result:f};return f}function pb(){var b="ArgList@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=pa()!==null?{token:"args",value:[]}:null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,k&&h('"("');if(d!==null){if(c.substr(a,
8)==="DISTINCT"){var m="DISTINCT";a+=8}else m=null,k&&h('"DISTINCT"');m=m!==null?m:"";if(m!==null){var s=Q();if(s!==null){var j=[],g=a;if(c.substr(a,1)===","){var n=",";a+=1}else n=null,k&&h('","');if(n!==null){var r=Q();r!==null?n=[n,r]:(n=null,a=g)}else n=null,a=g;for(;n!==null;)j.push(n),g=a,c.substr(a,1)===","?(n=",",a+=1):(n=null,k&&h('","')),n!==null?(r=Q(),r!==null?n=[n,r]:(n=null,a=g)):(n=null,a=g);j!==null?(c.substr(a,1)===")"?(g=")",a+=1):(g=null,k&&h('")"')),g!==null?d=[d,m,s,j,g]:(d=null,
a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){cleanEx=[];for(var d=0;d<b.length;d++)cleanEx.push(b[d][1]);b={token:"args"};b.value=[c].concat(cleanEx);b.distinct=a==="DISTINCT"?!0:!1;return b}(d[1],d[2],d[3]):null;f===null&&(f=null,a=i);i=f!==null?f:null}(k=e)&&i===null&&h("[62] ArgList");y[b]={nextPos:a,result:i};return i}function Tb(){var b="ExpressionList@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=pa()!==null?{token:"args",value:[]}:
null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,k&&h('"("');if(d!==null){var m=Q();if(m!==null){var s=[],j=a;if(c.substr(a,1)===","){var g=",";a+=1}else g=null,k&&h('","');if(g!==null){var n=Q();n!==null?g=[g,n]:(g=null,a=j)}else g=null,a=j;for(;g!==null;)s.push(g),j=a,c.substr(a,1)===","?(g=",",a+=1):(g=null,k&&h('","')),g!==null?(n=Q(),n!==null?g=[g,n]:(g=null,a=j)):(g=null,a=j);s!==null?(c.substr(a,1)===")"?(j=")",a+=1):(j=null,k&&h('")"')),
j!==null?d=[d,m,s,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){cleanEx=[];for(var b=0;b<c.length;b++)cleanEx.push(c[b][1]);b={token:"args"};b.value=[a].concat(cleanEx);return b}(d[1],d[2]):null;f===null&&(f=null,a=i);i=f!==null?f:null}(k=e)&&i===null&&h("[63] ExpressionList");y[b]={nextPos:a,result:i};return i}function Kb(){var b="ConstructTemplate@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="{"){var d="{";a+=1}else d=
null,k&&h('"{"');if(d!==null){for(var m=[],s=r();s!==null;)m.push(s),s=r();if(m!==null)if(s=qb(),s=s!==null?s:"",s!==null){for(var j=[],g=r();g!==null;)j.push(g),g=r();j!==null?(c.substr(a,1)==="}"?(g="}",a+=1):(g=null,k&&h('"}"')),g!==null?d=[d,m,s,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[64] ConstructTemplate");y[b]={nextPos:a,result:f};return f}function qb(){var b="ConstructTriples@"+a,e=y[b];
if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=nb();if(d!==null){for(var m=a,s=[],j=r();j!==null;)s.push(j),j=r();if(s!==null)if(c.substr(a,1)==="."?(j=".",a+=1):(j=null,k&&h('"."')),j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();g!==null?(n=qb(),n=n!==null?n:"",n!==null?s=[s,j,g,n]:(s=null,a=m)):(s=null,a=m)}else s=null,a=m;else s=null,a=m;m=s!==null?s:"";m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=
null&&c[3].triplesContext!=null&&(b=b.concat(c[3].triplesContext));return{token:"triplestemplate",triplesContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[65] ConstructTriples");y[b]={nextPos:a,result:f};return f}function nb(){var c="TriplesSameSubject@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;for(var e=a,f=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=Pa(),i!==null){for(var s=[],m=r();m!==null;)s.push(m),m=r();s!==null?(m=Ea(),m!==null?d=[d,i,s,m]:(d=null,
a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=c.triplesContext;if(c.pairs)for(var d=0;d<c.pairs.length;d++){var f=c.pairs[d],h=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(h={subject:a.chainSubject[0],predicate:f[0],object:f[1]},b.push(h),b=b.concat(a.triplesContext)):(h={subject:a,predicate:f[0],object:f[1]},b.push(h))}d={token:"triplessamesubject"};d.triplesContext=b;d.chainSubject=a;return d}(d[1],d[3]):null;f===null&&(f=
null,a=e);if(f!==null)e=f;else{f=e=a;d=[];for(i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=Qa(),i!==null){s=[];for(m=r();m!==null;)s.push(m),m=r();s!==null?(m=Ub(),m!==null?d=[d,i,s,m]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext,d=a.chainSubject;if(c.pairs)for(var f=0;f<c.pairs.length;f++){var h=c.pairs[f];h[1].length!=null&&(h[1]=h[1][0]);if(a.token==="triplesnodecollection")for(var e=0;e<d.length;e++){var k=d[e];if(k.triplesContext!=
null){var s={subject:k.chainSubject,predicate:h[0],object:h[1]};b.concat(k.triplesContext)}else s={subject:d[e],predicate:h[0],object:h[1]},b.push(s)}else s={subject:d,predicate:h[0],object:h[1]},b.push(s)}f={token:"triplessamesubject"};f.triplesContext=b;f.chainSubject=d;return f}(d[1],d[3]):null;f===null&&(f=null,a=e);e=f!==null?f:null}(k=b)&&e===null&&h("[66] TriplesSameSubject");y[c]={nextPos:a,result:e};return e}function Ea(){var b="PropertyListNotEmpty@"+a,e=y[b];if(e)return a=e.nextPos,e.result;
e=k;k=!1;var i=a,f=a,d=Ra();if(d!==null){for(var m=[],s=r();s!==null;)m.push(s),s=r();if(m!==null)if(s=qa(),s!==null){for(var j=[],g=a,n=[],q=r();q!==null;)n.push(q),q=r();if(n!==null)if(c.substr(a,1)===";"?(q=";",a+=1):(q=null,k&&h('";"')),q!==null){for(var o=[],t=r();t!==null;)o.push(t),t=r();if(o!==null){var t=a,u=Ra();if(u!==null){for(var x=[],Z=r();Z!==null;)x.push(Z),Z=r();x!==null?(Z=qa(),Z!==null?u=[u,x,Z]:(u=null,a=t)):(u=null,a=t)}else u=null,a=t;t=u!==null?u:"";t!==null?n=[n,q,o,t]:(n=
null,a=g)}else n=null,a=g}else n=null,a=g;else n=null,a=g;for(;n!==null;){j.push(n);g=a;n=[];for(q=r();q!==null;)n.push(q),q=r();if(n!==null)if(c.substr(a,1)===";"?(q=";",a+=1):(q=null,k&&h('";"')),q!==null){o=[];for(t=r();t!==null;)o.push(t),t=r();if(o!==null){t=a;u=Ra();if(u!==null){x=[];for(Z=r();Z!==null;)x.push(Z),Z=r();x!==null?(Z=qa(),Z!==null?u=[u,x,Z]:(u=null,a=t)):(u=null,a=t)}else u=null,a=t;t=u!==null?u:"";t!==null?n=[n,q,o,t]:(n=null,a=g)}else n=null,a=g}else n=null,a=g;else n=null,a=
g}j!==null?d=[d,m,s,j]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){token={token:"propertylist"};for(var d=[],f=[],h=0;h<c.length;h++)c[h].triplesContext!=null?(d=d.concat(c[h].triplesContext),c[h].token==="triplesnodecollection"&&c[h].chainSubject.length!=null?f.push([a,c[h].chainSubject[0]]):f.push([a,c[h].chainSubject])):f.push([a,c[h]]);for(h=0;h<b.length;h++)for(var c=b[h][3],a=c[0],c=c[2]||[],e=0;e<c.length;e++)c[e].triplesContext!=null?(d=d.concat(c[e].triplesContext),
f.push([a,c[e].chainSubject])):f.push([a,c[e]]);token.pairs=f;token.triplesContext=d;return token}(d[0],d[2],d[3]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[67] PropertyListNotEmpty");y[b]={nextPos:a,result:f};return f}function Ub(){var c="PropertyList@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=Ea(),e=e!==null?e:"";(k=b)&&e===null&&h("[68] PropertyList");y[c]={nextPos:a,result:e};return e}function qa(){var b="ObjectList@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=
a,f=a,d=va();if(d!==null){for(var m=[],s=r();s!==null;)m.push(s),s=r();if(m!==null){var s=[],j=a;if(c.substr(a,1)===","){var g=",";a+=1}else g=null,k&&h('","');if(g!==null){for(var n=[],q=r();q!==null;)n.push(q),q=r();n!==null?(q=va(),q!==null?g=[g,n,q]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;for(;g!==null;)if(s.push(g),j=a,c.substr(a,1)===","?(g=",",a+=1):(g=null,k&&h('","')),g!==null){n=[];for(q=r();q!==null;)n.push(q),q=r();n!==null?(q=va(),q!==null?g=[g,n,q]:(g=null,a=j)):(g=null,a=j)}else g=
null,a=j;s!==null?d=[d,m,s]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b=[];b.push(a);for(var d=0;d<c.length;d++)for(var f=0;f<c[d].length;f++)typeof c[d][f]=="object"&&c[d][f].token!=null&&b.push(c[d][f]);return b}(d[0],d[2]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[69] ObjectList");y[b]={nextPos:a,result:f};return f}function Ra(){var b="Verb@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=oa();if(i===null){i=a;if(c.substr(a,1)==="a"){var f="a";a+=
1}else f=null,k&&h('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,a=i);i=f!==null?f:null}(k=e)&&i===null&&h("[71] Verb");y[b]={nextPos:a,result:i};return i}function Mb(){var c="TriplesSameSubjectPath@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;for(var e=a,f=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=Pa(),i!==null){for(var s=[],m=r();m!==null;)s.push(m),m=r();s!==null?(m=Vb(),m!==null?d=[d,
i,s,m]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=c.triplesContext;if(c.pairs)for(var d=0;d<c.pairs.length;d++){var f=c.pairs[d],h=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(h={subject:a.chainSubject[0],predicate:f[0],object:f[1]},b.push(h),b=b.concat(a.triplesContext)):(h={subject:a,predicate:f[0],object:f[1]},b.push(h))}d={token:"triplessamesubject"};d.triplesContext=b;d.chainSubject=a;return d}(d[1],d[3]):null;
f===null&&(f=null,a=e);if(f!==null)e=f;else{f=e=a;d=[];for(i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=Qa(),i!==null){s=[];for(m=r();m!==null;)s.push(m),m=r();s!==null?(m=Wb(),m!==null?d=[d,i,s,m]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext,d=a.chainSubject;if(c.pairs)for(var f=0;f<c.pairs.length;f++){var h=c.pairs[f];h[1].length!=null&&(h[1]=h[1][0]);if(a.token==="triplesnodecollection")for(var e=0;e<d.length;e++){var k=d[e];if(k.triplesContext!=
null){var s={subject:k.chainSubject,predicate:h[0],object:h[1]};b.concat(k.triplesContext)}else s={subject:d[e],predicate:h[0],object:h[1]},b.push(s)}else s={subject:d,predicate:h[0],object:h[1]},b.push(s)}f={token:"triplessamesubject"};f.triplesContext=b;f.chainSubject=d;return f}(d[1],d[3]):null;f===null&&(f=null,a=e);e=f!==null?f:null}(k=b)&&e===null&&h("[72] TriplesSameSubjectPath");y[c]={nextPos:a,result:e};return e}function Vb(){var b="PropertyListNotEmptyPath@"+a,e=y[b];if(e)return a=e.nextPos,
e.result;e=k;k=!1;var i=a,f=a,d=Sa();d===null&&(d=U(),d=d!==null?d:null);if(d!==null){for(var m=[],s=r();s!==null;)m.push(s),s=r();if(m!==null)if(s=qa(),s!==null){for(var j=[],g=a,n=[],q=r();q!==null;)n.push(q),q=r();if(n!==null)if(c.substr(a,1)===";"?(q=";",a+=1):(q=null,k&&h('";"')),q!==null){for(var o=[],t=r();t!==null;)o.push(t),t=r();if(o!==null){var t=a,u=Sa();u===null&&(u=U(),u=u!==null?u:null);if(u!==null){var x=qa();x!==null?u=[u,x]:(u=null,a=t)}else u=null,a=t;t=u!==null?u:"";t!==null?n=
[n,q,o,t]:(n=null,a=g)}else n=null,a=g}else n=null,a=g;else n=null,a=g;for(;n!==null;){j.push(n);g=a;n=[];for(q=r();q!==null;)n.push(q),q=r();if(n!==null)if(c.substr(a,1)===";"?(q=";",a+=1):(q=null,k&&h('";"')),q!==null){o=[];for(t=r();t!==null;)o.push(t),t=r();o!==null?(t=a,u=Sa(),u===null&&(u=U(),u=u!==null?u:null),u!==null?(x=qa(),x!==null?u=[u,x]:(u=null,a=t)):(u=null,a=t),t=u!==null?u:"",t!==null?n=[n,q,o,t]:(n=null,a=g)):(n=null,a=g)}else n=null,a=g;else n=null,a=g}j!==null?d=[d,m,s,j]:(d=null,
a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){token={token:"propertylist"};for(var d=[],f=[],h=0;h<c.length;h++)c[h].triplesContext!=null?(d=d.concat(c[h].triplesContext),c[h].token==="triplesnodecollection"&&c[h].chainSubject.length!=null?f.push([a,c[h].chainSubject[0]]):f.push([a,c[h].chainSubject])):f.push([a,c[h]]);for(h=0;h<b.length;h++)for(var c=b[h][3],a=c[0],c=c[1]||[],e=0;e<c.length;e++)c[e].triplesContext!=null?(d=d.concat(c[e].triplesContext),f.push([a,
c[e].chainSubject])):f.push([a,c[e]]);token.pairs=f;token.triplesContext=d;return token}(d[0],d[2],d[3]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[73] PropertyListNotEmptyPath");y[b]={nextPos:a,result:f};return f}function Wb(){var c="PropertyListPath@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=Ea(),e=e!==null?e:"";(k=b)&&e===null&&h("[74] PropertyListPath");y[c]={nextPos:a,result:e};return e}function Sa(){var c="VerbPath@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=
a,f=rb(),f=f!==null?f:null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[75]");y[c]={nextPos:a,result:f};return f}function rb(){var b="PathAlternative@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=Ta();if(d!==null){var m=[],s=a;if(c.substr(a,1)==="|"){var j="|";a+=1}else j=null,k&&h('"|"');if(j!==null){var g=Ta();g!==null?j=[j,g]:(j=null,a=s)}else j=null,a=s;for(;j!==null;)m.push(j),s=a,c.substr(a,1)==="|"?(j="|",a+=1):(j=null,k&&h('"|"')),j!==null?(g=Ta(),g!==null?j=[j,g]:(j=null,
a=s)):(j=null,a=s);m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c==null||c.length===0)return a;else{for(var b=[],d=0;d<c.length;d++)b.push(c[1]);d={token:"path",kind:"alternative"};d.value=b;return d}}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[78] PathAlternative");y[b]={nextPos:a,result:f};return f}function Ta(){var b="PathSequence@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=Ua();if(d!==null){var m=[],s=a;if(c.substr(a,1)==="/"){var j=
"/";a+=1}else j=null,k&&h('"/"');if(j!==null){var g=Ua();g!==null?j=[j,g]:(j=null,a=s)}else j=null,a=s;for(;j!==null;)m.push(j),s=a,c.substr(a,1)==="/"?(j="/",a+=1):(j=null,k&&h('"/"')),j!==null?(g=Ua(),g!==null?j=[j,g]:(j=null,a=s)):(j=null,a=s);m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c==null||c.length===0)return a;else{for(var b=[a],d=0;d<c.length;d++)b.push(c[d][1]);d={token:"path",kind:"sequence"};d.value=b;return d}}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=
e)&&f===null&&h("[79] PathSequence");y[b]={nextPos:a,result:f};return f}function sb(){var c="PathElt@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=Xb();if(d!==null){var i=Yb(),i=i!==null?i:"";i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(a.token&&a.token!="path"&&c=="")return a;else if(a.token&&a.token!=b&&c!=""){var b={token:"path",kind:"element"};b.value=a;b.modifier=c;return b}else return a.modifier=c,a}(d[0],d[1]):null;f===null&&(f=null,a=e);(k=
b)&&f===null&&h("[88] PathElt");y[c]={nextPos:a,result:f};return f}function Ua(){var b="PathEltOrInverse@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=sb();if(i===null){var f=i=a;if(c.substr(a,1)==="^"){var d="^";a+=1}else d=null,k&&h('"^"');if(d!==null){var m=sb();m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"path",kind:"inversePath"};c.value=a;return c}(d[1]):null;f===null&&(f=null,a=i);i=f!==null?f:null}(k=e)&&i===null&&h("[81] PathEltOrInverse");
y[b]={nextPos:a,result:i};return i}function Yb(){var b="PathMod@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;if(c.substr(a,1)==="*"){var i="*";a+=1}else i=null,k&&h('"*"');if(i===null&&(c.substr(a,1)==="?"?(i="?",a+=1):(i=null,k&&h('"?"')),i===null&&(c.substr(a,1)==="+"?(i="+",a+=1):(i=null,k&&h('"+"')),i===null))){i=a;if(c.substr(a,1)==="{"){var f="{";a+=1}else f=null,k&&h('"{"');if(f!==null){var d=a,m=ha();if(m!==null){var s=a;if(c.substr(a,1)===","){var j=",";a+=1}else j=null,k&&h('","');
if(j!==null){if(c.substr(a,1)==="}"){var g="}";a+=1}else g=null,k&&h('"}"');if(g===null){var g=a,n=ha();if(n!==null){if(c.substr(a,1)==="}"){var r="}";a+=1}else r=null,k&&h('"}"');r!==null?n=[n,r]:(n=null,a=g)}else n=null,a=g;g=n!==null?n:null}g!==null?j=[j,g]:(j=null,a=s)}else j=null,a=s;j!==null?s=j:(c.substr(a,1)==="}"?(s="}",a+=1):(s=null,k&&h('"}"')),s=s!==null?s:null);s!==null?m=[m,s]:(m=null,a=d)}else m=null,a=d;m!==null?d=m:(d=a,c.substr(a,1)===","?(m=",",a+=1):(m=null,k&&h('","')),m!==null?
(s=ha(),s!==null?(c.substr(a,1)==="}"?(j="}",a+=1):(j=null,k&&h('"}"')),j!==null?m=[m,s,j]:(m=null,a=d)):(m=null,a=d)):(m=null,a=d),d=m!==null?m:null);d!==null?f=[f,d]:(f=null,a=i)}else f=null,a=i;i=f!==null?f:null}(k=e)&&i===null&&h("[82] PathMod");y[b]={nextPos:a,result:i};return i}function Xb(){var b="PathPrimary@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=V();if(i===null){i=a;if(c.substr(a,1)==="a"){var f="a";a+=1}else f=null,k&&h('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,
value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,a=i);if(f!==null)i=f;else{i=a;c.substr(a,1)==="!"?(f="!",a+=1):(f=null,k&&h('"!"'));if(f!==null){var d=Zb();d!==null?f=[f,d]:(f=null,a=i)}else f=null,a=i;if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="("?(d="(",a+=1):(d=null,k&&h('"("'));if(d!==null){var m=rb();if(m!==null){if(c.substr(a,1)===")"){var s=")";a+=1}else s=null,k&&h('")"');s!==null?d=[d,m,s]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?d[1]:null;f===
null&&(f=null,a=i);i=f!==null?f:null}}}(k=e)&&i===null&&h("[83] PathPrimary");y[b]={nextPos:a,result:i};return i}function Zb(){var b="PathNegatedPropertySet@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=Fa();if(e===null){e=a;if(c.substr(a,1)==="("){var i="(";a+=1}else i=null,k&&h('"("');if(i!==null){var f=a,d=Fa();if(d!==null){var m=[],s=a;if(c.substr(a,1)==="|"){var j="|";a+=1}else j=null,k&&h('"|"');if(j!==null){var g=Fa();g!==null?j=[j,g]:(j=null,a=s)}else j=null,a=s;for(;j!==null;)m.push(j),s=
a,c.substr(a,1)==="|"?(j="|",a+=1):(j=null,k&&h('"|"')),j!==null?(g=Fa(),g!==null?j=[j,g]:(j=null,a=s)):(j=null,a=s);m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?d:"";f!==null?(c.substr(a,1)===")"?(d=")",a+=1):(d=null,k&&h('")"')),d!==null?i=[i,f,d]:(i=null,a=e)):(i=null,a=e)}else i=null,a=e;e=i!==null?i:null}y[b]={nextPos:a,result:e};return e}function Fa(){var b="PathOneInPropertySet@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=V();if(i===null&&(c.substr(a,1)==="a"?(i="a",
a+=1):(i=null,k&&h('"a"')),i===null)){i=a;if(c.substr(a,1)==="^"){var f="^";a+=1}else f=null,k&&h('"^"');if(f!==null){var d=V();d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,k&&h('"a"')),d=d!==null?d:null);d!==null?f=[f,d]:(f=null,a=i)}else f=null,a=i;i=f!==null?f:null}(k=e)&&i===null&&h("[85] PathOneInPropertySet");y[b]={nextPos:a,result:i};return i}function Qa(){var c="TriplesNode@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=$b(),f=f!==null?function(a){triplesContext=[];
chainSubject=[];for(var c=null,b=0;b<a.length;b++)ia++,c=null,a[b].chainSubject==null&&a[b].triplesContext==null?c=a[b]:(c=a[b].chainSubject,triplesContext=triplesContext.concat(nextSubject.triplesContext)),c={subject:{token:"blank",value:"_:"+ia},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:c},b==0&&chainSubject.push(c.subject),triplesContext.push(c),c=b===a.length-1?{subject:{token:"blank",value:"_:"+ia},predicate:{token:"uri",prefix:null,
suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ia},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ia+1)}},triplesContext.push(c);return{token:"triplesnodecollection",triplesContext:triplesContext,chainSubject:chainSubject}}(f):null;f===null&&(f=null,a=
e);f!==null?e=f:(e=ac(),e=e!==null?e:null);(k=b)&&e===null&&h("[87] TriplesNode");y[c]={nextPos:a,result:e};return e}function ac(){var b="BlankNodePropertyList@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var i=a,f=a,d=[],m=r();m!==null;)d.push(m),m=r();if(d!==null)if(c.substr(a,1)==="["?(m="[",a+=1):(m=null,k&&h('"["')),m!==null){for(var s=[],j=r();j!==null;)s.push(j),j=r();if(s!==null)if(j=Ea(),j!==null){for(var g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="]"?
(n="]",a+=1):(n=null,k&&h('"]"')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?d=[d,m,s,j,g,n,q]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a){ia++;for(var c={token:"blank",value:"_:"+ia},b=[],d=0;d<a.pairs.length;d++){var f=a.pairs[d],h={};h.subject=c;h.predicate=f[0];f[1].length!=null&&(f[1]=f[1][0]);h.object=f[1];b.push(h)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(b),
chainSubject:c}}(d[3]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[88] BlankNodePropertyList");y[b]={nextPos:a,result:f};return f}function $b(){var b="Collection@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;for(var i=a,f=a,d=[],m=r();m!==null;)d.push(m),m=r();if(d!==null)if(c.substr(a,1)==="("?(m="(",a+=1):(m=null,k&&h('"("')),m!==null){for(var s=[],j=r();j!==null;)s.push(j),j=r();if(s!==null){var g=va();if(g!==null)for(j=[];g!==null;)j.push(g),g=va();else j=null;if(j!==null){for(var g=
[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)===")"?(n=")",a+=1):(n=null,k&&h('")"')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?d=[d,m,s,j,g,n,q]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[3]:null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[89] Collection");y[b]={nextPos:a,result:f};return f}function va(){var c="GraphNode@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;for(var e=
a,f=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=Pa(),i!==null){for(var m=[],j=r();j!==null;)m.push(j),j=r();m!==null?d=[d,i,m]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;if(d!==null)f=d;else{f=a;d=[];for(i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=Qa(),i!==null){m=[];for(j=r();j!==null;)m.push(j),j=r();m!==null?d=[d,i,m]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?d:null}f=f!==null?f[1]:null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[90] GraphNode");y[c]={nextPos:a,
result:f};return f}function Pa(){var c="VarOrTerm@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=U();e===null&&(e=bc(),e=e!==null?e:null);(k=b)&&e===null&&h("[91] VarOrTerm");y[c]={nextPos:a,result:e};return e}function oa(){var c="VarOrIRIref@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=U();e===null&&(e=V(),e=e!==null?e:null);(k=b)&&e===null&&h("[92] VarOrIRIref");y[c]={nextPos:a,result:e};return e}function U(){var c="Var@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=
!1;var e=a,f=cc();f===null&&(f=dc(),f=f!==null?f:null);f=f!==null?function(a){var c={token:"var"};c.value=a;return c}(f):null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[93] Var");y[c]={nextPos:a,result:f};return f}function bc(){var c="GraphTerm@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=V();e===null&&(e=La(),e===null&&(e=Ma(),e===null&&(e=Na(),e===null&&(e=ec(),e===null&&(e=pa(),e=e!==null?e:null)))));(k=b)&&e===null&&h("[94] GraphTerm");y[c]={nextPos:a,result:e};return e}function Q(){var b=
"ConditionalOrExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=Va();if(d!==null){for(var m=[],j=a,g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)==="||"?(n="||",a+=2):(n=null,k&&h('"||"')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=Va(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;for(;g!==null;){m.push(g);j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)==="||"?(n="||",
a+=2):(n=null,k&&h('"||"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=Va(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j}m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;for(var b={token:"expression",expressionType:"conditionalor"},d=[a],f=0;f<c.length;f++)d.push(c[f][3]);b.operands=d;return b}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[96] ConditionalOrExpression");y[b]={nextPos:a,
result:f};return f}function Va(){var b="ConditionalAndExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=Wa();if(d!==null){for(var m=[],j=a,g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)==="&&"?(n="&&",a+=2):(n=null,k&&h('"&&"')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=Wa(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;for(;g!==null;){m.push(g);j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==
null)if(c.substr(a,2)==="&&"?(n="&&",a+=2):(n=null,k&&h('"&&"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=Wa(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j}m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;for(var b={token:"expression",expressionType:"conditionaland"},d=[a],f=0;f<c.length;f++)d.push(c[f][3]);b.operands=d;return b}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[97] ConditionalAndExpression");
y[b]={nextPos:a,result:f};return f}function Wa(){var b="RelationalExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=X();if(d!==null){for(var m=[],j=a,g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="="?(n="=",a+=1):(n=null,k&&h('"="')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();
if(g!==null)if(c.substr(a,2)==="!="?(n="!=",a+=2):(n=null,k&&h('"!="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="<"?(n="<",a+=1):(n=null,k&&h('"<"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;
if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)===">"?(n=">",a+=1):(n=null,k&&h('">"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)==="<="?(n="<=",a+=2):(n=null,k&&h('"<="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,
n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)===">="?(n=">=",a+=2):(n=null,k&&h('">="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;j=g!==null?g:null}}}}}for(;j!==null;){m.push(j);j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="="?(n="=",a+=1):(n=null,k&&
h('"="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)==="!="?(n="!=",a+=2):(n=null,k&&h('"!="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),
n=r();if(g!==null)if(c.substr(a,1)==="<"?(n="<",a+=1):(n=null,k&&h('"<"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)===">"?(n=">",a+=1):(n=null,k&&h('">"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=
j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)==="<="?(n="<=",a+=2):(n=null,k&&h('"<="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,2)===">="?(n=">=",a+=2):(n=null,k&&h('">="')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=X(),o!==null?
g=[g,n,q,o]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;j=g!==null?g:null}}}}}}m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;else{var b={expressionType:"relationalexpression"};b.operator=c[0][1];b.op1=a;b.op2=c[0][3];b.token="expression";return b}}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[99] RelationalExpression");y[b]={nextPos:a,result:f};return f}function X(){var b="AdditiveExpression@"+a,e=y[b];if(e)return a=e.nextPos,
e.result;e=k;k=!1;var i=a,f=a,d=wa();if(d!==null){for(var j=[],m=a,g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="+"?(n="+",a+=1):(n=null,k&&h('"+"')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=wa(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;if(g!==null)m=g;else{m=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="-"?(n="-",a+=1):(n=null,k&&h('"-"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),
o=r();q!==null?(o=wa(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;if(g!==null)m=g;else{m=a;g=xa();g===null&&(g=xa(),g=g!==null?g:null);if(g!==null){n=a;q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)==="*"?(o="*",a+=1):(o=null,k&&h('"*"')),o!==null){for(var t=[],u=r();u!==null;)t.push(u),u=r();t!==null?(u=ea(),u!==null?q=[q,o,t,u]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;if(q!==null)n=q;else{n=a;q=[];for(o=r();o!==null;)q.push(o),
o=r();if(q!==null)if(c.substr(a,1)==="/"?(o="/",a+=1):(o=null,k&&h('"/"')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();t!==null?(u=ea(),u!==null?q=[q,o,t,u]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;n=q!==null?q:null}n=n!==null?n:"";n!==null?g=[g,n]:(g=null,a=m)}else g=null,a=m;m=g!==null?g:null}}for(;m!==null;){j.push(m);m=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="+"?(n="+",a+=1):(n=null,k&&h('"+"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),
o=r();q!==null?(o=wa(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;if(g!==null)m=g;else{m=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="-"?(n="-",a+=1):(n=null,k&&h('"-"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=wa(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;if(g!==null)m=g;else{m=a;g=xa();g===null&&(g=xa(),g=g!==null?g:null);if(g!==null){n=a;q=[];for(o=r();o!==null;)q.push(o),
o=r();if(q!==null)if(c.substr(a,1)==="*"?(o="*",a+=1):(o=null,k&&h('"*"')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();t!==null?(u=ea(),u!==null?q=[q,o,t,u]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;if(q!==null)n=q;else{n=a;q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)==="/"?(o="/",a+=1):(o=null,k&&h('"/"')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();t!==null?(u=ea(),u!==null?q=[q,o,t,u]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,
a=n;n=q!==null?q:null}n=n!==null?n:"";n!==null?g=[g,n]:(g=null,a=m)}else g=null,a=m;m=g!==null?g:null}}}j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;var b={token:"expression",expressionType:"additiveexpression"};b.summand=a;b.summands=[];for(var d=0;d<c.length;d++){var f=c[d],h={};if(f.length==4&&typeof f[1]==="string")h.operator=f[1],h.expression=f[3];else{var f={},e=h[0],k=h[1][1],i=h[1][3],k=null;e.value<0?(h.operator="-",e.value=-e.value):h.operator=
"+";f.token="expression";f.expressionType="multiplicativeexpression";f.operator=e;f.factors=[{operator:k,expression:i}];h.expression=f}b.summands.push(h)}return b}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[101] AdditiveExpression");y[b]={nextPos:a,result:f};return f}function wa(){var b="MultiplicativeExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=ea();if(d!==null){for(var j=[],m=a,g=[],n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)===
"*"?(n="*",a+=1):(n=null,k&&h('"*"')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();q!==null?(o=ea(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;if(g!==null)m=g;else{m=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="/"?(n="/",a+=1):(n=null,k&&h('"/"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=ea(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;m=g!==null?g:null}for(;m!==null;){j.push(m);
m=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="*"?(n="*",a+=1):(n=null,k&&h('"*"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=ea(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=null,a=m)}else g=null,a=m;else g=null,a=m;if(g!==null)m=g;else{m=a;g=[];for(n=r();n!==null;)g.push(n),n=r();if(g!==null)if(c.substr(a,1)==="/"?(n="/",a+=1):(n=null,k&&h('"/"')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(o=ea(),o!==null?g=[g,n,q,o]:(g=null,a=m)):(g=
null,a=m)}else g=null,a=m;else g=null,a=m;m=g!==null?g:null}}j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;var b={token:"expression",expressionType:"multiplicativeexpression"};b.factor=a;b.factors=[];for(var d=0;d<c.length;d++){var f=c[d],h={};h.operator=f[1];h.expression=f[3];b.factors.push(h)}return b}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[102] MultiplicativeExpression");y[b]={nextPos:a,result:f};return f}function ea(){var b=
"UnaryExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var g=a,f=a;if(c.substr(a,1)==="!"){var d="!";a+=1}else d=null,k&&h('"!"');if(d!==null){for(var m=[],i=r();i!==null;)m.push(i),i=r();m!==null?(i=Ga(),i!==null?d=[d,m,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};c.expression=a;return c}(d[2]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,1)==="+"?(d="+",a+=
1):(d=null,k&&h('"+"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();m!==null?(i=Ga(),i!==null?d=[d,m,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};c.expression=a;return c}(d[2]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,1)==="-"?(d="-",a+=1):(d=null,k&&h('"-"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();m!==null?(i=Ga(),i!==null?d=[d,m,i]:(d=null,a=f)):
(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};c.expression=a;return c}(d[2]):null;f===null&&(f=null,a=g);f!==null?g=f:(g=Ga(),g=g!==null?g:null)}}(k=e)&&g===null&&h("[103] UnaryExpression");y[b]={nextPos:a,result:g};return g}function Ga(){var c="PrimaryExpression@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=Ka();if(e===null&&(e=Ja(),e===null&&(e=fc(),e===null))){var e=a,f=La(),f=f!==null?function(a){var c=
{token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};c.value=a;return c}(f):null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=Ma(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};c.value=a;return c}(f):null,f===null&&(f=null,a=e),f!==null?e=f:(e=a,f=Na(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};c.value=a;return c}(f):null,f===null&&(f=null,a=e),f!==
null?e=f:(e=gc(),e===null&&(e=a,f=U(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"var"};c.value=a;return c}(f):null,f===null&&(f=null,a=e),e=f!==null?f:null))))}(k=b)&&e===null&&h("[104] PrimaryExpression");y[c]={nextPos:a,result:e};return e}function Ka(){var b="BrackettedExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var g=a,f=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,k&&h('"("');if(d!==null){for(var m=[],i=r();i!==null;)m.push(i),
i=r();if(m!==null)if(i=Q(),i!==null){for(var j=[],n=r();n!==null;)j.push(n),n=r();j!==null?(c.substr(a,1)===")"?(n=")",a+=1):(n=null,k&&h('")"')),n!==null?d=[d,m,i,j,n]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=g);(k=e)&&f===null&&h("[105] BrackettedExpression");y[b]={nextPos:a,result:f};return f}function Ja(){var b="BuiltInCall@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var g=a,f=a;if(c.substr(a,1)==="S"){var d="S";
a+=1}else d=null,k&&h('"S"');d===null&&(c.substr(a,1)==="s"?(d="s",a+=1):(d=null,k&&h('"s"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="T"){var m="T";a+=1}else m=null,k&&h('"T"');m===null&&(c.substr(a,1)==="t"?(m="t",a+=1):(m=null,k&&h('"t"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="R"){var i="R";a+=1}else i=null,k&&h('"R"');i===null&&(c.substr(a,1)==="r"?(i="r",a+=1):(i=null,k&&h('"r"')),i=i!==null?i:null);if(i!==null){for(var j=[],n=r();n!==null;)j.push(n),n=r();if(j!==null)if(c.substr(a,
1)==="("?(n="(",a+=1):(n=null,k&&h('"("')),n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();if(q!==null)if(o=Q(),o!==null){for(var t=[],u=r();u!==null;)t.push(u),u=r();t!==null?(c.substr(a,1)===")"?(u=")",a+=1):(u=null,k&&h('")"')),u!==null?d=[d,m,i,j,n,q,o,t,u]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"str"};
c.args=[a];return c}(d[6]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,1)==="L"?(d="L",a+=1):(d=null,k&&h('"L"'));d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,k&&h('"l"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(m="A",a+=1):(m=null,k&&h('"A"')),m===null&&(c.substr(a,1)==="a"?(m="a",a+=1):(m=null,k&&h('"a"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="N"?(i="N",a+=1):(i=null,k&&h('"N"')),i===null&&(c.substr(a,1)==="n"?(i="n",a+=1):(i=null,k&&h('"n"')),
i=i!==null?i:null),i!==null)if(c.substr(a,1)==="G"?(j="G",a+=1):(j=null,k&&h('"G"')),j===null&&(c.substr(a,1)==="g"?(j="g",a+=1):(j=null,k&&h('"g"')),j=j!==null?j:null),j!==null){n=[];for(q=r();q!==null;)n.push(q),q=r();if(n!==null)if(c.substr(a,1)==="("?(q="(",a+=1):(q=null,k&&h('"("')),q!==null){o=[];for(t=r();t!==null;)o.push(t),t=r();if(o!==null)if(t=Q(),t!==null){for(var u=[],x=r();x!==null;)u.push(x),x=r();u!==null?(c.substr(a,1)===")"?(x=")",a+=1):(x=null,k&&h('")"')),x!==null?d=[d,m,i,j,n,
q,o,t,u,x]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"lang"};c.args=[a];return c}(d[7]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,11)==="LANGMATCHES"?(d="LANGMATCHES",a+=11):(d=null,k&&h('"LANGMATCHES"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,
1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)===","?(o=",",a+=1):(o=null,k&&h('","')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){for(var x=[],N=r();N!==null;)x.push(N),N=r();x!==null?(c.substr(a,1)===")"?(N=")",a+=1):(N=null,k&&h('")"')),N!==null?d=[d,m,i,j,n,q,o,t,u,x,N]:(d=null,a=f)):(d=null,a=f)}else d=null,a=
f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};b.args=[a,c];return b}(d[4],d[8]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,1)==="D"?(d="D",a+=1):(d=null,k&&h('"D"'));d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,k&&h('"d"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(m=
"A",a+=1):(m=null,k&&h('"A"')),m===null&&(c.substr(a,1)==="a"?(m="a",a+=1):(m=null,k&&h('"a"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="T"?(i="T",a+=1):(i=null,k&&h('"T"')),i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,k&&h('"t"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="A"?(j="A",a+=1):(j=null,k&&h('"A"')),j===null&&(c.substr(a,1)==="a"?(j="a",a+=1):(j=null,k&&h('"a"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="T"?(n="T",a+=1):(n=null,k&&h('"T"')),n===null&&(c.substr(a,
1)==="t"?(n="t",a+=1):(n=null,k&&h('"t"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="Y"?(q="Y",a+=1):(q=null,k&&h('"Y"')),q===null&&(c.substr(a,1)==="y"?(q="y",a+=1):(q=null,k&&h('"y"')),q=q!==null?q:null),q!==null)if(c.substr(a,1)==="P"?(o="P",a+=1):(o=null,k&&h('"P"')),o===null&&(c.substr(a,1)==="p"?(o="p",a+=1):(o=null,k&&h('"p"')),o=o!==null?o:null),o!==null)if(c.substr(a,1)==="E"?(t="E",a+=1):(t=null,k&&h('"E"')),t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,k&&h('"e"')),t=t!==null?
t:null),t!==null){u=[];for(x=r();x!==null;)u.push(x),x=r();if(u!==null)if(c.substr(a,1)==="("?(x="(",a+=1):(x=null,k&&h('"("')),x!==null){for(var N=[],B=r();B!==null;)N.push(B),B=r();if(N!==null)if(B=Q(),B!==null){for(var A=[],C=r();C!==null;)A.push(C),C=r();A!==null?(c.substr(a,1)===")"?(C=")",a+=1):(C=null,k&&h('")"')),C!==null?d=[d,m,i,j,n,q,o,t,u,x,N,B,A,C]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=
f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"datatype"};c.args=[a];return c}(d[11]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,5)==="BOUND"?(d="BOUND",a+=5):(d=null,k&&h('"BOUND"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),
n=r();if(j!==null)if(n=U(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(c.substr(a,1)===")"?(o=")",a+=1):(o=null,k&&h('")"')),o!==null?d=[d,m,i,j,n,q,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"bound"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,3)==="IRI"?(d="IRI",a+=3):(d=null,
k&&h('"IRI"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(c.substr(a,1)===")"?(o=")",a+=1):(o=null,k&&h('")"')),o!==null?d=[d,m,i,j,n,q,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",
expressionType:"builtincall",builtincall:"iri"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,3)==="URI"?(d="URI",a+=3):(d=null,k&&h('"URI"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(c.substr(a,1)===")"?(o=")",a+=1):(o=null,k&&h('")"')),o!==
null?d=[d,m,i,j,n,q,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"uri"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,5)==="BNODE"?(d="BNODE",a+=5):(d=null,k&&h('"BNODE"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null){i=a;c.substr(a,1)==="("?(j="(",a+=1):(j=null,k&&h('"("'));if(j!==
null){n=[];for(q=r();q!==null;)n.push(q),q=r();if(n!==null)if(q=Q(),q!==null){o=[];for(t=r();t!==null;)o.push(t),t=r();o!==null?(c.substr(a,1)===")"?(t=")",a+=1):(t=null,k&&h('")"')),t!==null?j=[j,n,q,o,t]:(j=null,a=i)):(j=null,a=i)}else j=null,a=i;else j=null,a=i}else j=null,a=i;j!==null?i=j:(i=pa(),i=i!==null?i:null);i!==null?d=[d,m,i]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"bnode"};c.args=a.length===
5?[a[2]]:null;return c}(d[2]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,8)==="COALESCE"?(d="COALESCE",a+=8):(d=null,k&&h('"COALESCE"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();m!==null?(i=Tb(),i!==null?d=[d,m,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};c.args=a;return c}(d[2]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,2)==="IF"?(d="IF",
a+=2):(d=null,k&&h('"IF"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)===","?(o=",",a+=1):(o=null,k&&h('","')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(N=r();N!==null;)x.push(N),N=r();if(x!==null)if(c.substr(a,1)===","?
(N=",",a+=1):(N=null,k&&h('","')),N!==null){B=[];for(A=r();A!==null;)B.push(A),A=r();if(B!==null)if(A=Q(),A!==null){for(var C=[],H=r();H!==null;)C.push(H),H=r();C!==null?(c.substr(a,1)===")"?(H=")",a+=1):(H=null,k&&h('")"')),H!==null?d=[d,m,i,j,n,q,o,t,u,x,N,B,A,C,H]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=
f;f=d!==null?function(a,c,b){var d={token:"expression",expressionType:"builtincall",builtincall:"if"};d.args=[a,c,b];return d}(d[4],d[8],d[12]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,9)==="ISLITERAL"?(d="ISLITERAL",a+=9):(d=null,k&&h('"ISLITERAL"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==
null;)q.push(o),o=r();q!==null?(c.substr(a,1)===")"?(o=")",a+=1):(o=null,k&&h('")"')),o!==null?d=[d,m,i,j,n,q,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,7)==="ISBLANK"?(d="ISBLANK",a+=7):(d=null,k&&h('"ISBLANK"'));if(d!==null){m=[];for(i=
r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();q!==null?(c.substr(a,1)===")"?(o=")",a+=1):(o=null,k&&h('")"')),o!==null?d=[d,m,i,j,n,q,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isblank"};
c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,8)==="SAMETERM"?(d="SAMETERM",a+=8):(d=null,k&&h('"SAMETERM"'));if(d!==null){m=[];for(i=r();i!==null;)m.push(i),i=r();if(m!==null)if(c.substr(a,1)==="("?(i="(",a+=1):(i=null,k&&h('"("')),i!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(n=Q(),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)===","?(o=",",a+=1):(o=null,k&&h('","')),o!==null){t=[];for(u=r();u!==
null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(N=r();N!==null;)x.push(N),N=r();x!==null?(c.substr(a,1)===")"?(N=")",a+=1):(N=null,k&&h('")"')),N!==null?d=[d,m,i,j,n,q,o,t,u,x,N]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};b.args=[a,c];return b}(d[4],d[8]):
null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,1)==="I"?(d="I",a+=1):(d=null,k&&h('"I"'));d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,k&&h('"i"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="S"?(m="S",a+=1):(m=null,k&&h('"S"')),m===null&&(c.substr(a,1)==="s"?(m="s",a+=1):(m=null,k&&h('"s"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="U"?(i="U",a+=1):(i=null,k&&h('"U"')),i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,k&&h('"u"')),i=i!==null?i:null),i!==null)if(c.substr(a,
1)==="R"?(j="R",a+=1):(j=null,k&&h('"R"')),j===null&&(c.substr(a,1)==="r"?(j="r",a+=1):(j=null,k&&h('"r"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="I"?(n="I",a+=1):(n=null,k&&h('"I"')),n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,k&&h('"i"')),n=n!==null?n:null),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,k&&h('"("')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(N=r();N!==null;)x.push(N),
N=r();x!==null?(c.substr(a,1)===")"?(N=")",a+=1):(N=null,k&&h('")"')),N!==null?d=[d,m,i,j,n,q,o,t,u,x,N]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[a];return c}(d[8]):null;f===null&&(f=null,a=g);if(f!==null)g=f;else{f=g=a;c.substr(a,1)==="I"?(d="I",a+=1):(d=null,k&&
h('"I"'));d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,k&&h('"i"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="S"?(m="S",a+=1):(m=null,k&&h('"S"')),m===null&&(c.substr(a,1)==="s"?(m="s",a+=1):(m=null,k&&h('"s"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="I"?(i="I",a+=1):(i=null,k&&h('"I"')),i===null&&(c.substr(a,1)==="i"?(i="i",a+=1):(i=null,k&&h('"i"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="R"?(j="R",a+=1):(j=null,k&&h('"R"')),j===null&&(c.substr(a,1)==="r"?(j="r",
a+=1):(j=null,k&&h('"r"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="I"?(n="I",a+=1):(n=null,k&&h('"I"')),n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,k&&h('"i"')),n=n!==null?n:null),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,k&&h('"("')),o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(N=r();N!==null;)x.push(N),N=r();x!==null?(c.substr(a,1)===")"?(N=")",a+=1):(N=null,k&&h('")"')),
N!==null?d=[d,m,i,j,n,q,o,t,u,x,N]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[a];return c}(d[8]):null;f===null&&(f=null,a=g);f!==null?g=f:(g=hc(),g===null&&(g=ic(),g===null&&(g=jc(),g=g!==null?g:null)))}}}}}}}}}}}}}}(k=e)&&g===null&&h("[106] BuiltInCall");y[b]={nextPos:a,
result:g};return g}function hc(){var b="RegexExpression@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="R"){var d="R";a+=1}else d=null,k&&h('"R"');d===null&&(c.substr(a,1)==="r"?(d="r",a+=1):(d=null,k&&h('"r"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var m="E";a+=1}else m=null,k&&h('"E"');m===null&&(c.substr(a,1)==="e"?(m="e",a+=1):(m=null,k&&h('"e"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="G"){var g="G";a+=1}else g=null,k&&h('"G"');
g===null&&(c.substr(a,1)==="g"?(g="g",a+=1):(g=null,k&&h('"g"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="E"){var j="E";a+=1}else j=null,k&&h('"E"');j===null&&(c.substr(a,1)==="e"?(j="e",a+=1):(j=null,k&&h('"e"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="X"){var n="X";a+=1}else n=null,k&&h('"X"');n===null&&(c.substr(a,1)==="x"?(n="x",a+=1):(n=null,k&&h('"x"')),n=n!==null?n:null);if(n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)==="("?(o="(",
a+=1):(o=null,k&&h('"("')),o!==null){for(var t=[],u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){for(var x=[],B=r();B!==null;)x.push(B),B=r();if(x!==null)if(c.substr(a,1)===","?(B=",",a+=1):(B=null,k&&h('","')),B!==null){for(var C=[],A=r();A!==null;)C.push(A),A=r();if(C!==null)if(A=Q(),A!==null){for(var H=[],E=r();E!==null;)H.push(E),E=r();if(H!==null){E=a;if(c.substr(a,1)===","){var D=",";a+=1}else D=null,k&&h('","');if(D!==null){for(var F=[],G=r();G!==null;)F.push(G),G=r();F!==null?
(G=Q(),G!==null?D=[D,F,G]:(D=null,a=E)):(D=null,a=E)}else D=null,a=E;E=D!==null?D:"";if(E!==null){D=[];for(F=r();F!==null;)D.push(F),F=r();D!==null?(c.substr(a,1)===")"?(F=")",a+=1):(F=null,k&&h('")"')),F!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C,A,H,E,D,F]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=
null,a=f;f=d!==null?function(a,c,b){var d={token:"expression",expressionType:"regex"};d.text=a;d.pattern=c;d.flags=b[2];return d}(d[8],d[12],d[14]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[107] RegexExpression");y[b]={nextPos:a,result:f};return f}function ic(){var b="ExistsFunc@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="E"){var d="E";a+=1}else d=null,k&&h('"E"');d===null&&(c.substr(a,1)==="e"?(d="e",a+=1):(d=null,k&&h('"e"')),d=d!==null?d:null);if(d!==
null){if(c.substr(a,1)==="X"){var m="X";a+=1}else m=null,k&&h('"X"');m===null&&(c.substr(a,1)==="x"?(m="x",a+=1):(m=null,k&&h('"x"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="I"){var g="I";a+=1}else g=null,k&&h('"I"');g===null&&(c.substr(a,1)==="i"?(g="i",a+=1):(g=null,k&&h('"i"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="S"){var j="S";a+=1}else j=null,k&&h('"S"');j===null&&(c.substr(a,1)==="s"?(j="s",a+=1):(j=null,k&&h('"s"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)===
"T"){var n="T";a+=1}else n=null,k&&h('"T"');n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,k&&h('"t"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="S"){var q="S";a+=1}else q=null,k&&h('"S"');q===null&&(c.substr(a,1)==="s"?(q="s",a+=1):(q=null,k&&h('"s"')),q=q!==null?q:null);if(q!==null){for(var o=[],t=r();t!==null;)o.push(t),t=r();o!==null?(t=$(),t!==null?d=[d,m,g,j,n,q,o,t]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=
null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"exists"};c.args=[a];return c}(d[7]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[108] ExistsFunc");y[b]={nextPos:a,result:f};return f}function jc(){var b="NotExistsFunc@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="N"){var d="N";a+=1}else d=null,k&&h('"N"');d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,k&&h('"n"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,
1)==="O"){var m="O";a+=1}else m=null,k&&h('"O"');m===null&&(c.substr(a,1)==="o"?(m="o",a+=1):(m=null,k&&h('"o"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="T"){var g="T";a+=1}else g=null,k&&h('"T"');g===null&&(c.substr(a,1)==="t"?(g="t",a+=1):(g=null,k&&h('"t"')),g=g!==null?g:null);if(g!==null){for(var j=[],n=r();n!==null;)j.push(n),n=r();if(j!==null)if(c.substr(a,1)==="E"?(n="E",a+=1):(n=null,k&&h('"E"')),n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,k&&h('"e"')),n=n!==null?n:null),
n!==null){if(c.substr(a,1)==="X"){var q="X";a+=1}else q=null,k&&h('"X"');q===null&&(c.substr(a,1)==="x"?(q="x",a+=1):(q=null,k&&h('"x"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="I"){var o="I";a+=1}else o=null,k&&h('"I"');o===null&&(c.substr(a,1)==="i"?(o="i",a+=1):(o=null,k&&h('"i"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="S"){var t="S";a+=1}else t=null,k&&h('"S"');t===null&&(c.substr(a,1)==="s"?(t="s",a+=1):(t=null,k&&h('"s"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,
1)==="T"){var u="T";a+=1}else u=null,k&&h('"T"');u===null&&(c.substr(a,1)==="t"?(u="t",a+=1):(u=null,k&&h('"t"')),u=u!==null?u:null);if(u!==null){if(c.substr(a,1)==="S"){var x="S";a+=1}else x=null,k&&h('"S"');x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,k&&h('"s"')),x=x!==null?x:null);if(x!==null){for(var B=[],C=r();C!==null;)B.push(C),C=r();B!==null?(C=$(),C!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=
null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"notexists"};c.args=[a];return c}(d[11]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[109] NotExistsFunc");y[b]={nextPos:a,result:f};return f}function gc(){var b="Aggregate@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,k&&h('"C"');d===null&&(c.substr(a,
1)==="c"?(d="c",a+=1):(d=null,k&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var m="O";a+=1}else m=null,k&&h('"O"');m===null&&(c.substr(a,1)==="o"?(m="o",a+=1):(m=null,k&&h('"o"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="U"){var g="U";a+=1}else g=null,k&&h('"U"');g===null&&(c.substr(a,1)==="u"?(g="u",a+=1):(g=null,k&&h('"u"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="N"){var j="N";a+=1}else j=null,k&&h('"N"');j===null&&(c.substr(a,1)==="n"?(j="n",a+=1):
(j=null,k&&h('"n"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="T"){var n="T";a+=1}else n=null,k&&h('"T"');n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,k&&h('"t"')),n=n!==null?n:null);if(n!==null){for(var q=[],o=r();o!==null;)q.push(o),o=r();if(q!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,k&&h('"("')),o!==null){for(var t=[],u=r();u!==null;)t.push(u),u=r();if(t!==null){u=a;if(c.substr(a,1)==="D"){var x="D";a+=1}else x=null,k&&h('"D"');x===null&&(c.substr(a,1)==="d"?(x="d",a+=
1):(x=null,k&&h('"d"')),x=x!==null?x:null);if(x!==null){if(c.substr(a,1)==="I"){var B="I";a+=1}else B=null,k&&h('"I"');B===null&&(c.substr(a,1)==="i"?(B="i",a+=1):(B=null,k&&h('"i"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="S"){var C="S";a+=1}else C=null,k&&h('"S"');C===null&&(c.substr(a,1)==="s"?(C="s",a+=1):(C=null,k&&h('"s"')),C=C!==null?C:null);if(C!==null){if(c.substr(a,1)==="T"){var A="T";a+=1}else A=null,k&&h('"T"');A===null&&(c.substr(a,1)==="t"?(A="t",a+=1):(A=null,k&&h('"t"')),
A=A!==null?A:null);if(A!==null){if(c.substr(a,1)==="I"){var H="I";a+=1}else H=null,k&&h('"I"');H===null&&(c.substr(a,1)==="i"?(H="i",a+=1):(H=null,k&&h('"i"')),H=H!==null?H:null);if(H!==null){if(c.substr(a,1)==="N"){var D="N";a+=1}else D=null,k&&h('"N"');D===null&&(c.substr(a,1)==="n"?(D="n",a+=1):(D=null,k&&h('"n"')),D=D!==null?D:null);if(D!==null){if(c.substr(a,1)==="C"){var E="C";a+=1}else E=null,k&&h('"C"');E===null&&(c.substr(a,1)==="c"?(E="c",a+=1):(E=null,k&&h('"c"')),E=E!==null?E:null);if(E!==
null){if(c.substr(a,1)==="T"){var F="T";a+=1}else F=null,k&&h('"T"');F===null&&(c.substr(a,1)==="t"?(F="t",a+=1):(F=null,k&&h('"t"')),F=F!==null?F:null);F!==null?x=[x,B,C,A,H,D,E,F]:(x=null,a=u)}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u;u=x!==null?x:"";if(u!==null){x=[];for(B=r();B!==null;)x.push(B),B=r();if(x!==null)if(c.substr(a,1)==="*"?(B="*",a+=1):(B=null,k&&h('"*"')),B===null&&(B=Q(),B=B!==null?B:null),B!==null){C=[];for(A=
r();A!==null;)C.push(A),A=r();if(C!==null)if(c.substr(a,1)===")"?(A=")",a+=1):(A=null,k&&h('")"')),A!==null){H=[];for(D=r();D!==null;)H.push(D),D=r();H!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C,A,H]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"count"};
exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[8],d[10]):null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="S"?(d="S",a+=1):(d=null,k&&h('"S"'));d===null&&(c.substr(a,1)==="s"?(d="s",a+=1):(d=null,k&&h('"s"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="U"?(m="U",a+=1):(m=null,k&&h('"U"')),m===null&&(c.substr(a,1)==="u"?(m="u",a+=1):(m=null,k&&h('"u"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="M"?(g="M",a+=1):(g=null,k&&h('"M"')),g===null&&(c.substr(a,
1)==="m"?(g="m",a+=1):(g=null,k&&h('"m"')),g=g!==null?g:null),g!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,k&&h('"("')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(o=a,c.substr(a,1)==="D"?(t="D",a+=1):(t=null,k&&h('"D"')),t===null&&(c.substr(a,1)==="d"?(t="d",a+=1):(t=null,k&&h('"d"')),t=t!==null?t:null),t!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,k&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=
null,k&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,k&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,k&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(B="T",a+=1):(B=null,k&&h('"T"')),B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,k&&h('"t"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=null,k&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,k&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,
1)==="N"?(A="N",a+=1):(A=null,k&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,k&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(H="C",a+=1):(H=null,k&&h('"C"')),H===null&&(c.substr(a,1)==="c"?(H="c",a+=1):(H=null,k&&h('"c"')),H=H!==null?H:null),H!==null?(c.substr(a,1)==="T"?(D="T",a+=1):(D=null,k&&h('"T"')),D===null&&(c.substr(a,1)==="t"?(D="t",a+=1):(D=null,k&&h('"t"')),D=D!==null?D:null),D!==null?t=[t,u,x,B,C,A,H,D]:(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,
a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o),o=t!==null?t:"",o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(B=r();B!==null;)x.push(B),B=r();if(x!==null)if(c.substr(a,1)===")"?(B=")",a+=1):(B=null,k&&h('")"')),B!==null){C=[];for(A=r();A!==null;)C.push(A),A=r();C!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=
null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"sum"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="M"?(d="M",a+=1):(d=null,k&&h('"M"'));d===null&&(c.substr(a,1)==="m"?(d="m",a+=1):(d=null,k&&h('"m"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="I"?(m="I",a+=1):(m=null,k&&h('"I"')),m===null&&(c.substr(a,1)==="i"?
(m="i",a+=1):(m=null,k&&h('"i"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="N"?(g="N",a+=1):(g=null,k&&h('"N"')),g===null&&(c.substr(a,1)==="n"?(g="n",a+=1):(g=null,k&&h('"n"')),g=g!==null?g:null),g!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,k&&h('"("')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(o=a,c.substr(a,1)==="D"?(t="D",a+=1):(t=null,k&&h('"D"')),t===null&&(c.substr(a,1)==="d"?(t="d",a+=1):(t=null,k&&
h('"d"')),t=t!==null?t:null),t!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,k&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,k&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,k&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,k&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(B="T",a+=1):(B=null,k&&h('"T"')),B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,k&&h('"t"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="I"?
(C="I",a+=1):(C=null,k&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,k&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,k&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,k&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(H="C",a+=1):(H=null,k&&h('"C"')),H===null&&(c.substr(a,1)==="c"?(H="c",a+=1):(H=null,k&&h('"c"')),H=H!==null?H:null),H!==null?(c.substr(a,1)==="T"?(D="T",a+=1):(D=null,k&&h('"T"')),D===null&&(c.substr(a,1)===
"t"?(D="t",a+=1):(D=null,k&&h('"t"')),D=D!==null?D:null),D!==null?t=[t,u,x,B,C,A,H,D]:(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o),o=t!==null?t:"",o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(B=r();B!==null;)x.push(B),B=r();if(x!==null)if(c.substr(a,1)===")"?(B=")",a+=1):(B=null,k&&h('")"')),B!==null){C=[];for(A=r();A!==null;)C.push(A),A=r();C!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C]:(d=null,
a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"min"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="M"?(d="M",a+=1):(d=null,k&&h('"M"'));d===null&&(c.substr(a,1)==="m"?(d="m",a+=1):
(d=null,k&&h('"m"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(m="A",a+=1):(m=null,k&&h('"A"')),m===null&&(c.substr(a,1)==="a"?(m="a",a+=1):(m=null,k&&h('"a"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="X"?(g="X",a+=1):(g=null,k&&h('"X"')),g===null&&(c.substr(a,1)==="x"?(g="x",a+=1):(g=null,k&&h('"x"')),g=g!==null?g:null),g!==null){j=[];for(n=r();n!==null;)j.push(n),n=r();if(j!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,k&&h('"("')),n!==null){q=[];for(o=r();o!==null;)q.push(o),
o=r();if(q!==null)if(o=a,c.substr(a,1)==="D"?(t="D",a+=1):(t=null,k&&h('"D"')),t===null&&(c.substr(a,1)==="d"?(t="d",a+=1):(t=null,k&&h('"d"')),t=t!==null?t:null),t!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,k&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,k&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,k&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,k&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(B="T",a+=1):
(B=null,k&&h('"T"')),B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,k&&h('"t"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=null,k&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,k&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,k&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,k&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(H="C",a+=1):(H=null,k&&h('"C"')),H===null&&(c.substr(a,1)==="c"?(H="c",
a+=1):(H=null,k&&h('"c"')),H=H!==null?H:null),H!==null?(c.substr(a,1)==="T"?(D="T",a+=1):(D=null,k&&h('"T"')),D===null&&(c.substr(a,1)==="t"?(D="t",a+=1):(D=null,k&&h('"t"')),D=D!==null?D:null),D!==null?t=[t,u,x,B,C,A,H,D]:(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o),o=t!==null?t:"",o!==null){t=[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(B=r();B!==null;)x.push(B),B=r();if(x!==null)if(c.substr(a,1)===
")"?(B=")",a+=1):(B=null,k&&h('")"')),B!==null){C=[];for(A=r();A!==null;)C.push(A),A=r();C!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"max"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=
null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="A"?(d="A",a+=1):(d=null,k&&h('"A"'));d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,k&&h('"a"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="V"?(m="V",a+=1):(m=null,k&&h('"V"')),m===null&&(c.substr(a,1)==="v"?(m="v",a+=1):(m=null,k&&h('"v"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="G"?(g="G",a+=1):(g=null,k&&h('"G"')),g===null&&(c.substr(a,1)==="g"?(g="g",a+=1):(g=null,k&&h('"g"')),g=g!==null?g:null),g!==null){j=[];for(n=r();n!==
null;)j.push(n),n=r();if(j!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,k&&h('"("')),n!==null){q=[];for(o=r();o!==null;)q.push(o),o=r();if(q!==null)if(o=a,c.substr(a,1)==="D"?(t="D",a+=1):(t=null,k&&h('"D"')),t===null&&(c.substr(a,1)==="d"?(t="d",a+=1):(t=null,k&&h('"d"')),t=t!==null?t:null),t!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,k&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,k&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,k&&
h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,k&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(B="T",a+=1):(B=null,k&&h('"T"')),B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,k&&h('"t"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=null,k&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,k&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,k&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=
null,k&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(H="C",a+=1):(H=null,k&&h('"C"')),H===null&&(c.substr(a,1)==="c"?(H="c",a+=1):(H=null,k&&h('"c"')),H=H!==null?H:null),H!==null?(c.substr(a,1)==="T"?(D="T",a+=1):(D=null,k&&h('"T"')),D===null&&(c.substr(a,1)==="t"?(D="t",a+=1):(D=null,k&&h('"t"')),D=D!==null?D:null),D!==null?t=[t,u,x,B,C,A,H,D]:(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o)):(t=null,a=o),o=t!==null?t:"",o!==null){t=
[];for(u=r();u!==null;)t.push(u),u=r();if(t!==null)if(u=Q(),u!==null){x=[];for(B=r();B!==null;)x.push(B),B=r();if(x!==null)if(c.substr(a,1)===")"?(B=")",a+=1):(B=null,k&&h('")"')),B!==null){C=[];for(A=r();A!==null;)C.push(A),A=r();C!==null?d=[d,m,g,j,n,q,o,t,u,x,B,C]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",
expressionType:"aggregate",aggregateType:"avg"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=i);i=f!==null?f:null}}}}(k=e)&&i===null&&h("[110] Aggregate");y[b]={nextPos:a,result:i};return i}function fc(){var c="IRIrefOrFunction@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=V();if(d!==null){var m=pb(),m=m!==null?m:"";m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"irireforfunction"};
b.iriref=a;b.args=c.value;return b}(d[0],d[1]):null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[117] IRIrefOrFunction");y[c]={nextPos:a,result:f};return f}function La(){var b="RDFLiteral@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a,d=kc();if(d!==null){var i=lc();if(i===null){i=a;if(c.substr(a,2)==="^^"){var g="^^";a+=2}else g=null,k&&h('"^^"');if(g!==null){var j=V();j!==null?g=[g,j]:(g=null,a=i)}else g=null,a=i;i=g!==null?g:null}i=i!==null?i:"";i!==null?d=[d,i]:(d=null,a=f)}else d=
null,a=f;f=d!==null?function(a,c){return typeof c==="string"&&c.length>0?{token:"literal",value:a.value,lang:c.slice(1),type:null}:typeof c==="object"?(c.shift(),{token:"literal",value:a.value,lang:null,type:c[0]}):{token:"literal",value:a.value,lang:null,type:null}}(d[0],d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[112] RDFLiteral");y[b]={nextPos:a,result:f};return f}function Ma(){var c="NumericLiteral@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=mc();e===null&&(e=nc(),e===
null&&(e=xa(),e=e!==null?e:null));(k=b)&&e===null&&h("[113] NumericLiteral");y[c]={nextPos:a,result:e};return e}function mc(){var c="NumericLiteralUnsigned@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=Xa();e===null&&(e=Ya(),e===null&&(e=ha(),e=e!==null?e:null));(k=b)&&e===null&&h("[114] NumericLiteralUnsigned");y[c]={nextPos:a,result:e};return e}function nc(){var c="NumericLiteralPositive@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=oc();e===null&&(e=pc(),e===null&&(e=
qc(),e=e!==null?e:null));(k=b)&&e===null&&h("[115] NumericLiteralPositive");y[c]={nextPos:a,result:e};return e}function xa(){var c="NumericLiteralNegative@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=rc();e===null&&(e=sc(),e===null&&(e=tc(),e=e!==null?e:null));(k=b)&&e===null&&h("[116] NumericLiteralNegative");y[c]={nextPos:a,result:e};return e}function Na(){var b="BooleanLiteral@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="T"){var d="T";a+=1}else d=
null,k&&h('"T"');d===null&&(c.substr(a,1)==="t"?(d="t",a+=1):(d=null,k&&h('"t"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var i="R";a+=1}else i=null,k&&h('"R"');i===null&&(c.substr(a,1)==="r"?(i="r",a+=1):(i=null,k&&h('"r"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="U"){var g="U";a+=1}else g=null,k&&h('"U"');g===null&&(c.substr(a,1)==="u"?(g="u",a+=1):(g=null,k&&h('"u"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="E"){var j="E";a+=1}else j=null,k&&h('"E"');j===
null&&(c.substr(a,1)==="e"?(j="e",a+=1):(j=null,k&&h('"e"')),j=j!==null?j:null);j!==null?d=[d,i,g,j]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}:null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=m=a;c.substr(a,1)==="F"?(d="F",a+=1):(d=null,k&&h('"F"'));d===null&&(c.substr(a,1)==="f"?(d="f",a+=1):(d=null,k&&h('"f"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(i="A",a+=1):
(i=null,k&&h('"A"')),i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,k&&h('"a"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="L"?(g="L",a+=1):(g=null,k&&h('"L"')),g===null&&(c.substr(a,1)==="l"?(g="l",a+=1):(g=null,k&&h('"l"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="S"?(j="S",a+=1):(j=null,k&&h('"S"')),j===null&&(c.substr(a,1)==="s"?(j="s",a+=1):(j=null,k&&h('"s"')),j=j!==null?j:null),j!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,k&&h('"E"');n===null&&(c.substr(a,1)===
"e"?(n="e",a+=1):(n=null,k&&h('"e"')),n=n!==null?n:null);n!==null?d=[d,i,g,j,n]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}:null;f===null&&(f=null,a=m);m=f!==null?f:null}(k=e)&&m===null&&h("[117] BooleanLiteral");y[b]={nextPos:a,result:m};return m}function kc(){var c="String@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=uc(),f=f!==null?{token:"string",
value:f}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=vc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=e),f!==null?e=f:(e=a,f=wc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=e),f!==null?e=f:(e=a,f=xc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=e),e=f!==null?f:null)));(k=b)&&e===null&&h("[118] String");y[c]={nextPos:a,result:e};return e}function V(){var c="IRIref@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=ra(),f=f!==null?
{token:"uri",prefix:null,suffix:null,value:f}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=yc(),f=f!==null?f:null,f===null&&(f=null,a=e),e=f!==null?f:null);(k=b)&&e===null&&h("[119] IRIref");y[c]={nextPos:a,result:e};return e}function yc(){var c="PrefixedName@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=zc(),f=f!==null?{token:"uri",prefix:f[0],suffix:f[1],value:null}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=Ia(),f=f!==null?{token:"uri",prefix:f,suffix:"",value:null}:null,
f===null&&(f=null,a=e),e=f!==null?f:null);(k=b)&&e===null&&h("[120] PrefixedName");y[c]={nextPos:a,result:e};return e}function ec(){var c="BlankNode@"+a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=Ac(),f=f!==null?{token:"blank",value:f}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,Bc()!==null?(ia++,f={token:"blank",value:"_:"+ia}):f=null,f===null&&(f=null,a=e),e=f!==null?f:null);(k=b)&&e===null&&h("[121] BlankNode");y[c]={nextPos:a,result:e};return e}function ra(){var b="IRI_REF@"+
a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="<"){var d="<";a+=1}else d=null,k&&h('"<"');if(d!==null){var m=[];if(c.substr(a).match(/^[^<>"{}|^`\\]/)!==null){var g=c.charAt(a);a++}else g=null,k&&h('[^<>"{}|^`\\\\]');for(;g!==null;)m.push(g),c.substr(a).match(/^[^<>"{}|^`\\]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h('[^<>"{}|^`\\\\]'));m!==null?(c.substr(a,1)===">"?(g=">",a+=1):(g=null,k&&h('">"')),g!==null?d=[d,m,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=
d!==null?d[1].join(""):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[122] IRI_REF");y[b]={nextPos:a,result:f};return f}function Ia(){var b="PNAME_NS@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a,d=fb(),d=d!==null?d:"";if(d!==null){if(c.substr(a,1)===":"){var i=":";a+=1}else i=null,k&&h('":"');i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[0]:null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[123] PNAME_NS");y[b]={nextPos:a,result:f};return f}function zc(){var c="PNAME_LN@"+
a,b=y[c];if(b)return a=b.nextPos,b.result;b=k;k=!1;var e=a,f=a,d=Ia();if(d!==null){var i=ub();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?[d[0],d[1]]:null;f===null&&(f=null,a=e);(k=b)&&f===null&&h("[124] PNAME_LN");y[c]={nextPos:a,result:f};return f}function Ac(){var b="BLANK_NODE_LABEL@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,2)==="_:"){var d="_:";a+=2}else d=null,k&&h('"_:"');if(d!==null){var m=ub();m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;
f=d!==null?d[1]:null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[125] BLANK_NODE_LABEL");y[b]={nextPos:a,result:f};return f}function cc(){var b="VAR1@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="?"){var d="?";a+=1}else d=null,k&&h('"?"');if(d!==null){var m=vb();m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[126] VAR1");y[b]={nextPos:a,result:f};return f}function dc(){var b="VAR2@"+a,e=y[b];if(e)return a=
e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="$"){var d="$";a+=1}else d=null,k&&h('"$"');if(d!==null){var m=vb();m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[127] VAR2");y[b]={nextPos:a,result:f};return f}function lc(){var b="LANGTAG@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="@"){var d="@";a+=1}else d=null,k&&h('"@"');if(d!==null){if(c.substr(a).match(/^[a-zA-Z]/)!==null){var m=
c.charAt(a);a++}else m=null,k&&h("[a-zA-Z]");if(m!==null)for(var g=[];m!==null;)g.push(m),c.substr(a).match(/^[a-zA-Z]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[a-zA-Z]"));else g=null;if(g!==null){var m=[],j=a;if(c.substr(a,1)==="-"){var n="-";a+=1}else n=null,k&&h('"-"');if(n!==null){if(c.substr(a).match(/^[a-zA-Z0-9]/)!==null){var o=c.charAt(a);a++}else o=null,k&&h("[a-zA-Z0-9]");if(o!==null)for(var q=[];o!==null;)q.push(o),c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(o=c.charAt(a),a++):(o=null,
k&&h("[a-zA-Z0-9]"));else q=null;q!==null?n=[n,q]:(n=null,a=j)}else n=null,a=j;for(;n!==null;)if(m.push(n),j=a,c.substr(a,1)==="-"?(n="-",a+=1):(n=null,k&&h('"-"')),n!==null){c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(o=c.charAt(a),a++):(o=null,k&&h("[a-zA-Z0-9]"));if(o!==null)for(q=[];o!==null;)q.push(o),c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(o=c.charAt(a),a++):(o=null,k&&h("[a-zA-Z0-9]"));else q=null;q!==null?n=[n,q]:(n=null,a=j)}else n=null,a=j;m!==null?d=[d,g,m]:(d=null,a=f)}else d=null,a=f}else d=
null,a=f;f=d!==null?d[2].length===0?("@"+d[1].join("")).toLowerCase():("@"+d[1].join("")+"-"+d[2][0][1].join("")).toLowerCase():null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[128] LANGTAG");y[b]={nextPos:a,result:f};return f}function ha(){var b="INTEGER@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a;if(c.substr(a).match(/^[0-9]/)!==null){var f=c.charAt(a);a++}else f=null,k&&h("[0-9]");if(f!==null)for(var d=[];f!==null;)d.push(f),c.substr(a).match(/^[0-9]/)!==null?(f=c.charAt(a),a++):
(f=null,k&&h("[0-9]"));else d=null;f=d!==null?function(a){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};lit.value=aa(a);return lit}(d):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[129] INTEGER");y[b]={nextPos:a,result:f};return f}function Ya(){var b="DECIMAL@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a).match(/^[0-9]/)!==null){var d=c.charAt(a);a++}else d=null,k&&h("[0-9]");if(d!==null)for(var i=[];d!==null;)i.push(d),c.substr(a).match(/^[0-9]/)!==
null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]"));else i=null;if(i!==null)if(c.substr(a,1)==="."?(d=".",a+=1):(d=null,k&&h('"."')),d!==null){var g=[];if(c.substr(a).match(/^[0-9]/)!==null){var j=c.charAt(a);a++}else j=null,k&&h("[0-9]");for(;j!==null;)g.push(j),c.substr(a).match(/^[0-9]/)!==null?(j=c.charAt(a),a++):(j=null,k&&h("[0-9]"));g!==null?i=[i,d,g]:(i=null,a=f)}else i=null,a=f;else i=null,a=f;f=i!==null?function(a,c,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};
lit.value=aa([a,c,b]);return lit}(i[0],i[1],i[2]):null;f===null&&(f=null,a=m);if(f!==null)m=f;else{f=m=a;c.substr(a,1)==="."?(i=".",a+=1):(i=null,k&&h('"."'));if(i!==null){c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]"));if(d!==null)for(g=[];d!==null;)g.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]"));else g=null;g!==null?i=[i,g]:(i=null,a=f)}else i=null,a=f;f=i!==null?function(a,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};
lit.value=aa([a,c]);return lit}(i[0],i[1]):null;f===null&&(f=null,a=m);m=f!==null?f:null}(k=e)&&m===null&&h("[130] DECIMAL");y[b]={nextPos:a,result:m};return m}function Xa(){var b="DOUBLE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a).match(/^[0-9]/)!==null){var d=c.charAt(a);a++}else d=null,k&&h("[0-9]");if(d!==null)for(var m=[];d!==null;)m.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]"));else m=null;if(m!==null)if(c.substr(a,
1)==="."?(d=".",a+=1):(d=null,k&&h('"."')),d!==null){var g=[];if(c.substr(a).match(/^[0-9]/)!==null){var j=c.charAt(a);a++}else j=null,k&&h("[0-9]");for(;j!==null;)g.push(j),c.substr(a).match(/^[0-9]/)!==null?(j=c.charAt(a),a++):(j=null,k&&h("[0-9]"));g!==null?(j=Za(),j!==null?m=[m,d,g,j]:(m=null,a=f)):(m=null,a=f)}else m=null,a=f;else m=null,a=f;f=m!==null?function(a,c,b,d){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=aa([a,c,b,d]);return lit}(m[0],m[1],
m[2],m[3]):null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="."?(m=".",a+=1):(m=null,k&&h('"."'));if(m!==null){c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h("[0-9]"));if(g!==null)for(d=[];g!==null;)d.push(g),c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h("[0-9]"));else d=null;d!==null?(g=Za(),g!==null?m=[m,d,g]:(m=null,a=f)):(m=null,a=f)}else m=null,a=f;f=m!==null?function(a,c,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};
lit.value=aa([a,c,b]);return lit}(m[0],m[1],m[2]):null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]"));if(d!==null)for(m=[];d!==null;)m.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]"));else m=null;m!==null?(d=Za(),d!==null?m=[m,d]:(m=null,a=f)):(m=null,a=f);f=m!==null?function(a,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=aa([a,c]);return lit}(m[0],
m[1]):null;f===null&&(f=null,a=i);i=f!==null?f:null}}(k=e)&&i===null&&h("[131] DOUBLE");y[b]={nextPos:a,result:i};return i}function qc(){var b="INTEGER_POSITIVE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,k&&h('"+"');if(d!==null){var i=ha();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[132] INTEGER_POSITIVE");y[b]={nextPos:a,
result:f};return f}function pc(){var b="DECIMAL_POSITIVE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,k&&h('"+"');if(d!==null){var i=Ya();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[133] DECIMAL_POSITIVE");y[b]={nextPos:a,result:f};return f}function oc(){var b="DOUBLE_POSITIVE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;
e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,k&&h('"+"');if(d!==null){var i=Xa();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[134] DOUBLE_POSITIVE");y[b]={nextPos:a,result:f};return f}function tc(){var b="INTEGER_NEGATIVE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,k&&h('"-"');if(d!==null){var i=
ha();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[135] INTEGER_NEGATIVE");y[b]={nextPos:a,result:f};return f}function sc(){var b="DECIMAL_NEGATIVE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,k&&h('"-"');if(d!==null){var i=Ya();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):
null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[136] DECIMAL_NEGATIVE");y[b]={nextPos:a,result:f};return f}function rc(){var b="DOUBLE_NEGATIVE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,k&&h('"-"');if(d!==null){var i=Xa();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[137] DOUBLE_NEGATIVE");y[b]={nextPos:a,result:f};return f}
function Za(){var b="EXPONENT@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a).match(/^[eE]/)!==null){var d=c.charAt(a);a++}else d=null,k&&h("[eE]");if(d!==null){if(c.substr(a).match(/^[+\-]/)!==null){var i=c.charAt(a);a++}else i=null,k&&h("[+\\-]");i=i!==null?i:"";if(i!==null){if(c.substr(a).match(/^[0-9]/)!==null){var g=c.charAt(a);a++}else g=null,k&&h("[0-9]");if(g!==null)for(var j=[];g!==null;)j.push(g),c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,
k&&h("[0-9]"));else j=null;j!==null?d=[d,i,j]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?aa([d[0],d[1],d[2]]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[138] EXPONENT");y[b]={nextPos:a,result:f};return f}function wc(){var b="STRING_LITERAL1@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==="'"){var d="'";a+=1}else d=null,k&&h('"\'"');if(d!==null){var i=[];if(c.substr(a).match(/^[^'\\\n\r]/)!==null){var g=c.charAt(a);a++}else g=null,k&&h("[^'\\\\\\n\\r]");
g===null&&(g=ja(),g=g!==null?g:null);for(;g!==null;)i.push(g),c.substr(a).match(/^[^'\\\n\r]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h("[^'\\\\\\n\\r]")),g===null&&(g=ja(),g=g!==null?g:null);i!==null?(c.substr(a,1)==="'"?(g="'",a+=1):(g=null,k&&h('"\'"')),g!==null?d=[d,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[139] STRING_LITERAL1");y[b]={nextPos:a,result:f};return f}function xc(){var b="STRING_LITERAL2@"+a,e=y[b];if(e)return a=
e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,1)==='"'){var d='"';a+=1}else d=null,k&&h('"\\""');if(d!==null){var i=[];if(c.substr(a).match(/^[^"\\\n\r]/)!==null){var g=c.charAt(a);a++}else g=null,k&&h('[^"\\\\\\n\\r]');g===null&&(g=ja(),g=g!==null?g:null);for(;g!==null;)i.push(g),c.substr(a).match(/^[^"\\\n\r]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h('[^"\\\\\\n\\r]')),g===null&&(g=ja(),g=g!==null?g:null);i!==null?(c.substr(a,1)==='"'?(g='"',a+=1):(g=null,k&&h('"\\""')),g!==null?d=[d,i,
g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[140] STRING_LITERAL2");y[b]={nextPos:a,result:f};return f}function uc(){var b="STRING_LITERAL_LONG1@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var m=a,f=a;if(c.substr(a,3)==="'''"){var d="'''";a+=3}else d=null,k&&h("\"'''\"");if(d!==null){var i=[];if(c.substr(a).match(/^[^'\\]/)!==null){var g=c.charAt(a);a++}else g=null,k&&h("[^'\\\\]");g===null&&(g=ja(),g=g!==null?g:null);
for(;g!==null;)i.push(g),c.substr(a).match(/^[^'\\]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h("[^'\\\\]")),g===null&&(g=ja(),g=g!==null?g:null);i!==null?(c.substr(a,3)==="'''"?(g="'''",a+=3):(g=null,k&&h("\"'''\"")),g!==null?d=[d,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[141] STRING_LITERAL_LONG1");y[b]={nextPos:a,result:f};return f}function vc(){var b="STRING_LITERAL_LONG2@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=
!1;var m=a,f=a;if(c.substr(a,3)==='"""'){var d='"""';a+=3}else d=null,k&&h('"\\"\\"\\""');if(d!==null){var g=[];if(c.substr(a).match(/^[^"\\]/)!==null){var i=c.charAt(a);a++}else i=null,k&&h('[^"\\\\]');i===null&&(i=ja(),i=i!==null?i:null);for(;i!==null;)g.push(i),c.substr(a).match(/^[^"\\]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h('[^"\\\\]')),i===null&&(i=ja(),i=i!==null?i:null);g!==null?(c.substr(a,3)==='"""'?(i='"""',a+=3):(i=null,k&&h('"\\"\\"\\""')),i!==null?d=[d,g,i]:(d=null,a=f)):(d=null,
a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=m);(k=e)&&f===null&&h("[142] STRING_LITERAL_LONG2");y[b]={nextPos:a,result:f};return f}function ja(){var b="ECHAR@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a;if(c.substr(a,1)==="\\"){var f="\\";a+=1}else f=null,k&&h('"\\\\"');if(f!==null){if(c.substr(a).match(/^[tbnrf"']/)!==null){var d=c.charAt(a);a++}else d=null,k&&h("[tbnrf\"']");d!==null?f=[f,d]:(f=null,a=i)}else f=null,a=i;(k=e)&&f===null&&h("[143] ECHAR");y[b]=
{nextPos:a,result:f};return f}function pa(){var b="NIL@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,k&&h('"("');if(d!==null){for(var m=[],g=r();g!==null;)m.push(g),g=r();m!==null?(c.substr(a,1)===")"?(g=")",a+=1):(g=null,k&&h('")"')),g!==null?d=[d,m,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:
null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[144] NIL");y[b]={nextPos:a,result:f};return f}function r(){var b="WS@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;if(c.substr(a).match(/^[ ]/)!==null){var i=c.charAt(a);a++}else i=null,k&&h("[ ]");i===null&&(c.substr(a).match(/^[\t]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\t]")),i===null&&(c.substr(a).match(/^[\r]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\r]")),i===null&&(c.substr(a).match(/^[\n]/)!==null?(i=c.charAt(a),a++):(i=null,
k&&h("[\\n]")),i===null&&(i=Cc(),i=i!==null?i:null))));(k=e)&&i===null&&h("[145] WS");y[b]={nextPos:a,result:i};return i}function Cc(){var b="COMMENT@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a;if(c.substr(a,1)==="#"){var f="#";a+=1}else f=null,k&&h('"#"');if(f!==null){var d=[];if(c.substr(a).match(/^[^\n\r]/)!==null){var g=c.charAt(a);a++}else g=null,k&&h("[^\\n\\r]");for(;g!==null;)d.push(g),c.substr(a).match(/^[^\n\r]/)!==null?(g=c.charAt(a),a++):(g=null,k&&h("[^\\n\\r]"));d!==
null?f=[f,d]:(f=null,a=i)}else f=null,a=i;(k=e)&&f===null&&h(" COMMENT");y[b]={nextPos:a,result:f};return f}function Bc(){var b="ANON@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a;if(c.substr(a,1)==="["){var f="[";a+=1}else f=null,k&&h('"["');if(f!==null){for(var d=[],g=r();g!==null;)d.push(g),g=r();d!==null?(c.substr(a,1)==="]"?(g="]",a+=1):(g=null,k&&h('"]"')),g!==null?f=[f,d,g]:(f=null,a=i)):(f=null,a=i)}else f=null,a=i;(k=e)&&f===null&&h("[146] ANON");y[b]={nextPos:a,result:f};
return f}function wb(){var b="PN_CHARS_BASE@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;if(c.substr(a).match(/^[A-Z]/)!==null){var i=c.charAt(a);a++}else i=null,k&&h("[A-Z]");i===null&&(c.substr(a).match(/^[a-z]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[a-z]")),i===null&&(c.substr(a).match(/^[\xC0-\xD6]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\xC0-\\xD6]")),i===null&&(c.substr(a).match(/^[\xD8-\xF6]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\xD8-\\xF6]")),i===null&&(c.substr(a).match(/^[\xF8-\u02FF]/)!==
null?(i=c.charAt(a),a++):(i=null,k&&h("[\\xF8-\\u02FF]")),i===null&&(c.substr(a).match(/^[\u0370-\u037D]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u0370-\\u037D]")),i===null&&(c.substr(a).match(/^[\u037F-\u1FFF]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u037F-\\u1FFF]")),i===null&&(c.substr(a).match(/^[\u200C-\u200D]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u200C-\\u200D]")),i===null&&(c.substr(a).match(/^[\u2070-\u218F]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u2070-\\u218F]")),
i===null&&(c.substr(a).match(/^[\u2C00-\u2FEF]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u2C00-\\u2FEF]")),i===null&&(c.substr(a).match(/^[\u3001-\uD7FF]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u3001-\\uD7FF]")),i===null&&(c.substr(a).match(/^[\uF900-\uFDCF]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\uF900-\\uFDCF]")),i===null&&(c.substr(a).match(/^[\uFDF0-\uFFFD]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\uFDF0-\\uFFFD]")),i===null&&(c.substr(a).match(/^[\u1000-\uEFFF]/)!==null?(i=
c.charAt(a),a++):(i=null,k&&h("[\\u1000-\\uEFFF]")),i=i!==null?i:null)))))))))))));(k=e)&&i===null&&h("[147] PN_CHARS_BASE");y[b]={nextPos:a,result:i};return i}function ya(){var b="PN_CHARS_U@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=wb();i===null&&(c.substr(a,1)==="_"?(i="_",a+=1):(i=null,k&&h('"_"')),i=i!==null?i:null);(k=e)&&i===null&&h("[148] PN_CHARS_U");y[b]={nextPos:a,result:i};return i}function vb(){var b="VARNAME@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=
a,f=a,d=ya();d===null&&(c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]")),d=d!==null?d:null);if(d!==null){var g=[],m=ya();m===null&&(c.substr(a).match(/^[0-9]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[0-9]")),m===null&&(c.substr(a).match(/^[\xB7]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[\\xB7]")),m===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[\\u0300-\\u036F]")),m===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(m=
c.charAt(a),a++):(m=null,k&&h("[\\u203F-\\u2040]")),m=m!==null?m:null))));for(;m!==null;)g.push(m),m=ya(),m===null&&(c.substr(a).match(/^[0-9]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[0-9]")),m===null&&(c.substr(a).match(/^[\xB7]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[\\xB7]")),m===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[\\u0300-\\u036F]")),m===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(m=c.charAt(a),a++):(m=null,k&&h("[\\u203F-\\u2040]")),
m=m!==null?m:null))));g!==null?d=[d,g]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[0]+d[1].join(""):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[149] VARNAME");y[b]={nextPos:a,result:f};return f}function Ha(){var b="PN_CHARS@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=ya();i===null&&(c.substr(a,1)==="-"?(i="-",a+=1):(i=null,k&&h('"-"')),i===null&&(c.substr(a).match(/^[0-9]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[0-9]")),i===null&&(c.substr(a).match(/^[\xB7]/)!==null?(i=c.charAt(a),
a++):(i=null,k&&h("[\\xB7]")),i===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u0300-\\u036F]")),i===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(i=c.charAt(a),a++):(i=null,k&&h("[\\u203F-\\u2040]")),i=i!==null?i:null)))));(k=e)&&i===null&&h("[150] PN_CHARS");y[b]={nextPos:a,result:i};return i}function fb(){var b="PN_PREFIX@"+a,e=y[b];if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=wb();if(d!==null){var m=[],g=Ha();g===null&&(c.substr(a,
1)==="."?(g=".",a+=1):(g=null,k&&h('"."')),g=g!==null?g:null);for(;g!==null;)m.push(g),g=Ha(),g===null&&(c.substr(a,1)==="."?(g=".",a+=1):(g=null,k&&h('"."')),g=g!==null?g:null);m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,b){if(b[b.length-1]==".")throw Error("Wrong PN_PREFIX, cannot finish with '.'");else return a+b.join("")}(d[0],d[1]):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[151] PN_PREFIX");y[b]={nextPos:a,result:f};return f}function ub(){var b="PN_LOCAL@"+a,e=y[b];
if(e)return a=e.nextPos,e.result;e=k;k=!1;var i=a,f=a,d=ya();d===null&&(c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,k&&h("[0-9]")),d=d!==null?d:null);if(d!==null){for(var m=[],g=Ha();g!==null;)m.push(g),g=Ha();m!==null?d=[d,m]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[0]+d[1].join(""):null;f===null&&(f=null,a=i);(k=e)&&f===null&&h("[152] PN_LOCAL");y[b]={nextPos:a,result:f};return f}function xb(){var b=function(a){a.sort();for(var b=null,c=[],e=0;e<a.length;e++)a[e]!==b&&(c.push(a[e]),
b=a[e]);switch(c.length){case 0:return"end of input";case 1:return c[0];default:return c.slice(0,c.length-1).join(", ")+" or "+c[c.length-1]}}(eb),e=Math.max(a,Ca),e=e<c.length?i(c.charAt(e)):"end of input";return"Expected "+b+" but "+e+" found."}function Ec(){for(var a=1,b=1,e=!1,f=0;f<Ca;f++){var d=c.charAt(f);d==="\n"?(e||a++,b=1,e=!1):d==="\r"|d==="\u2028"||d==="\u2029"?(a++,b=1,e=!0):(b++,e=!1)}return{line:a,column:b}}var la={ANON:Bc,AdditiveExpression:X,Aggregate:gc,ArgList:pb,AskQuery:M,BLANK_NODE_LABEL:Ac,
BaseDecl:o,BindingValue:Aa,BindingsClause:Ba,BlankNode:ec,BlankNodePropertyList:ac,BooleanLiteral:Na,BrackettedExpression:Ka,BuiltInCall:Ja,COMMENT:Cc,Clear:Db,Collection:$b,ConditionalAndExpression:Va,ConditionalOrExpression:Q,Constraint:Da,ConstructQuery:O,ConstructTemplate:Kb,ConstructTriples:qb,Create:Fb,DECIMAL:Ya,DECIMAL_NEGATIVE:sc,DECIMAL_POSITIVE:pc,DOCUMENT:function(){var b="DOCUMENT@"+a,c=y[b];if(c)return a=c.nextPos,c.result;c=j();c===null&&(c=u(),c=c!==null?c:null);y[b]={nextPos:a,result:c};
return c},DOUBLE:Xa,DOUBLE_NEGATIVE:rc,DOUBLE_POSITIVE:oc,DatasetClause:K,DefaultGraphClause:T,DeleteClause:Ib,DeleteData:Hb,DeleteWhere:Bb,DescribeQuery:P,Drop:Eb,ECHAR:ja,EXPONENT:Za,ExistsFunc:ic,ExpressionList:Tb,Filter:Sb,FunctionCall:gb,GraphGraphPattern:Qb,GraphNode:va,GraphPatternNotTriples:ob,GraphRef:Oa,GraphRefAll:hb,GraphTerm:bc,GroupClause:ca,GroupCondition:ba,GroupGraphPattern:$,GroupGraphPatternSub:Lb,GroupOrUnionGraphPattern:Nb,HavingClause:ga,INTEGER:ha,INTEGER_NEGATIVE:tc,INTEGER_POSITIVE:qc,
IRI_REF:ra,IRIref:V,IRIrefOrFunction:fc,InsertClause:cb,InsertData:Gb,LANGTAG:lc,LimitClause:$a,LimitOffsetClauses:za,Load:zb,MinusGraphPattern:Pb,Modify:Cb,MultiplicativeExpression:wa,NIL:pa,NamedGraphClause:W,NotExistsFunc:jc,NumericLiteral:Ma,NumericLiteralNegative:xa,NumericLiteralPositive:nc,NumericLiteralUnsigned:mc,ObjectList:qa,OffsetClause:ab,OptionalGraphPattern:Ob,OrderClause:ka,OrderCondition:ma,PNAME_LN:zc,PNAME_NS:Ia,PN_CHARS:Ha,PN_CHARS_BASE:wb,PN_CHARS_U:ya,PN_LOCAL:ub,PN_PREFIX:fb,
PathAlternative:rb,PathElt:sb,PathEltOrInverse:Ua,PathMod:Yb,PathNegatedPropertySet:Zb,PathOneInPropertySet:Fa,PathPrimary:Xb,PathSequence:Ta,PrefixDecl:t,PrefixedName:yc,PrimaryExpression:Ga,Prologue:q,PropertyList:Ub,PropertyListNotEmpty:Ea,PropertyListNotEmptyPath:Vb,PropertyListPath:Wb,QuadData:ib,QuadPattern:kb,Quads:lb,QuadsNotTriples:mb,Query:g,RDFLiteral:La,RegexExpression:hc,RelationalExpression:Wa,SPARQL:j,STRING_LITERAL1:wc,STRING_LITERAL2:xc,STRING_LITERAL_LONG1:uc,STRING_LITERAL_LONG2:vc,
SelectClause:J,SelectQuery:F,ServiceGraphPattern:Rb,SolutionModifier:Y,String:kc,SubSelect:G,TURTLE:u,TriplesBlock:sa,TriplesNode:Qa,TriplesSameSubject:nb,TriplesSameSubjectPath:Mb,TriplesTemplate:ua,UnaryExpression:ea,Update:bb,Update1:yb,UsingClause:jb,VAR1:cc,VAR2:dc,VARNAME:vb,Var:U,VarOrIRIref:oa,VarOrTerm:Pa,Verb:Ra,VerbPath:Sa,WS:r,WhereClause:fa,base:E,directive:C,prefixID:D,statement:x};if(b!==void 0){if(la[b]===void 0)throw Error("Invalid rule name: "+i(b)+".");}else b="DOCUMENT";var a=
0,k=!0,Ca=0,eb=[],y={},aa=function(a){for(var b="",c=0;c<a.length;c++)b+=typeof a[c]==="string"?a[c]:a[c].join("");return b},ia=0,Jb=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()},la=la[b]();if(la===null||a!==c.length)throw la=Ec(),new this.SyntaxError(xb(),la.line,la.column);return la},toSource:function(){return this._source},SyntaxError:function(b,e,m){this.name="SyntaxError";this.message=b;this.line=e;this.column=m}};b.SyntaxError.prototype=Error.prototype;return b}();
var ga={};(new Date).getTime();ga.combined_parser=ma.parser;ga.parser={};ga.parser.parse=function(b,c){for(var e=[],m=ga.combined_parser.parse(b),i={},h={namespaces:i,base:"",blankCounter:0},g=0;g<m.length;g++){var n=m[g];if(n.token==="base")h.base=n.value;else if(n.token==="prefix")i[n.prefix]=n.local;else if(n.token==="triples"||n.token==="triplespattern")for(var q=0;q<n.triplesContext.length;q++){var o=n.triplesContext[q],o={subject:x.lexicalFormTerm(o.subject,h),predicate:x.lexicalFormTerm(o.predicate,
h),object:x.lexicalFormTerm(o.object,h),graph:c};e.push(o)}}return e};var u={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",
sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},UrisMap:function(){this.defaultNs="";this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]}};u.UrisMap.prototype.values=function(){var b={},c;for(c in this)!x.include(this.interfaceProperties,c)&&typeof this[c]!=="function"&&
c!=="defaultNs"&&c!=="interfaceProperties"&&(b[c]=this[c]);return b};u.UrisMap.prototype.get=function(b){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[b]};u.UrisMap.prototype.remove=function(b){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";delete this[b];return null};u.UrisMap.prototype.set=function(b,c){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[b]=c};u.UrisMap.prototype.setDefault=function(b){this.defaultNs=
b};u.UrisMap.prototype.addAll=function(b,c){for(var e in b)x.include(this.interfaceProperties,e)||(this[e]!=null?c===!0&&(this[e]=b[e]):this[e]=b[e]);return this};u.UrisMap.prototype.resolve=function(b){var c=b.split(":"),b=c[0],c=c[1];return b===""?this.defaultNs==null?null:this.defaultNs+c:this[b]!=null?this[b]+c:null};u.UrisMap.prototype.shrink=function(b){for(var c in this){var e=this[c];if(b.indexOf(e)===0&&e!==""&&c!="defaultNs")return b=b.split(e)[1],c+":"+b}return b};u.Profile=function(){this.prefixes=
new u.UrisMap;this.terms=new u.UrisMap};u.Profile.prototype.importProfile=function(b,c){this.prefixes.addAll(b.prefixes,c);this.terms.addAll(b.terms,c)};u.Profile.prototype.resolve=function(b){return b.indexOf(":")!=-1?this.prefixes.resolve(b):this.terms[b]!=null?this.terms.resolve(b):null};u.Profile.prototype.setDefaultPrefix=function(b){this.prefixes.setDefault(b)};u.Profile.prototype.setDefaultVocabulary=function(b){this.terms.setDefault(b)};u.Profile.prototype.setPrefix=function(b,c){this.prefixes.set(b,
c)};u.Profile.prototype.setTerm=function(b,c){this.terms.set(b,c)};u.RDFEnvironment=function(){this.blankNodeCounter=0;var b=this;this.filters={s:function(b){return function(c){return c.subject.equals(b)}},p:function(b){return function(c){return c.predicate.equals(b)}},o:function(b){return function(c){return c.object.equals(b)}},sp:function(b,c){return function(i){return i.subject.equals(b)&&i.predicate.equals(c)}},so:function(b,c){return function(i){return i.subject.equals(b)&&i.object.equals(c)}},
po:function(b,c){return function(i){return i.predicate.equals(b)&&i.object.equals(c)}},spo:function(b,c,i){return function(h){return h.subject.equals(b)&&h.predicate.equals(c)&&h.object.equals(i)}},describes:function(b){return function(c){return c.subject.equals(b)||c.object.equals(b)}},type:function(c){var g=b.resolve("rdf:type");return function(b){return b.predicate.equals(g)&&b.object.equals(c)}}};for(var c in u.defaultContext)this.prefixes.set(c,u.defaultContext[c])};x["extends"](u.Profile,u.RDFEnvironment);
u.RDFEnvironment.prototype.createBlankNode=function(){var b=new u.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return b};u.RDFEnvironment.prototype.createNamedNode=function(b){var c=this.resolve(b);return c!=null?new u.NamedNode(c):new u.NamedNode(b)};u.RDFEnvironment.prototype.createLiteral=function(b,c,e){return e!=null?new u.Literal(b,c,e.toString()):new u.Literal(b,c,e)};u.RDFEnvironment.prototype.createTriple=function(b,c,e){return new u.Triple(b,c,e)};u.RDFEnvironment.prototype.createGraph=
function(b){var c=new u.Graph;if(b!=null)for(var e=0;e<b.length;e++)c.add(b[e]);return c};u.RDFEnvironment.prototype.createAction=function(b,c){return function(e){return b(e)?c(e):e}};u.RDFEnvironment.prototype.createProfile=function(b){return b===!0?new u.RDFEnvironment.Profile:(b=new u.RDFEnvironment.Profile,b.importProfile(this),b)};u.RDFEnvironment.prototype.createTermMap=function(b){if(b===!0)return new u.UrisMap;else{var b=this.terms.values(),c=new u.UrisMap,e;for(e in b)c[e]=b[e];return c}};
u.RDFEnvironment.prototype.createPrefixMap=function(b){if(b===!0)return new u.UrisMap;else{var b=this.prefixes.values(),c=new u.UrisMap,e;for(e in b)c[e]=b[e];return c}};u.RDFNode=function(b){this.interfaceName=b;this.attributes=["interfaceName","nominalValue"]};u.RDFNode.prototype.equals=function(b){if(b.interfaceName==null)return this.valueOf()==b;else{for(var c in this.attributes){var e=this.attributes[c];if(this[e]!=b[e])return!1}return!0}};u.BlankNode=function(b){u.RDFNode.call(this,"BlankNode");
this.nominalValue="_:"+b;this.bnodeId=b};x["extends"](u.RDFNode,u.BlankNode);u.BlankNode.prototype.toString=function(){return this.nominalValue};u.BlankNode.prototype.toNT=function(){return this.nominalValue};u.BlankNode.prototype.valueOf=function(){return this.nominalValue};u.Literal=function(b,c,e){u.RDFNode.call(this,"Literal");this.nominalValue=b;if(c!=null)this.language=c;else if(e!=null)this.datatype=e};x["extends"](u.RDFNode,u.Literal);u.Literal.prototype.toString=function(){var b='"'+this.nominalValue+
'"';if(this.language!=null)b=b+"@"+this.language;else if(this.datatype!=null||this.type)b=b+"^^<"+(this.datatype||this.type)+">";return b};u.Literal.prototype.toNT=function(){return this.toString()};u.Literal.prototype.valueOf=function(){return g.effectiveTypeValue({token:"literal",type:this.type,value:this.nominalValue,language:this.language})};u.NamedNode=function(b){u.RDFNode.call(this,"NamedNode");this.nominalValue=b.value!=null?b.value:b};x["extends"](u.RDFNode,u.NamedNode);u.NamedNode.prototype.toString=
function(){return this.nominalValue};u.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};u.NamedNode.prototype.valueOf=function(){return this.nominalValue};u.Triple=function(b,c,e){this.subject=b;this.predicate=c;this.object=e};u.Triple.prototype.equals=function(b){return this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)};u.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+
" . \r\n"};u.Graph=function(){this.triples=[];this.duplicates={};this.actions=[]};u.Graph.prototype.add=function(b){for(var c=0;c<this.actions.length;c++)b=this.actions[c](b);c=b.subject.toString()+b.predicate.toString()+b.object.toString();this.duplicates[c]||(this.duplicates[c]=!0,this.triples.push(b));return this};u.Graph.prototype.addAction=function(b,c){this.actions.push(b);if(c==!0)for(var e=0;e<this.triples.length;e++)this.triples[e]=b(this.triples[e]);return this};u.Graph.prototype.addAll=
function(b){for(var b=b.toArray(),c=0;c<b.length;c++)this.add(b[c]);return this};u.Graph.prototype.remove=function(b){for(var c=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(b)){delete this.duplicates[b.subject.toString()+b.predicate.toString()+b.object.toString()];c=e;break}c!=null&&this.triples.splice(c,1);return this};u.Graph.prototype.toArray=function(){return this.triples};u.Graph.prototype.some=function(b){for(var c=0;c<this.triples.length;c++)if(b(this.triples[c],this)===!0)return!0;
return!1};u.Graph.prototype.every=function(b){for(var c=0;c<this.triples.length;c++)if(b(this.triples[c],this)===!1)return!1;return!0};u.Graph.prototype.filter=function(b){for(var c=new u.Graph,e=0;e<this.triples.length;e++)b(this.triples[e],this)===!0&&c.add(this.triples[e]);return c};u.Graph.prototype.forEach=function(b){for(var c=0;c<this.triples.length;c++)b(this.triples[c],this)};u.Graph.prototype.merge=function(){for(var b=new u.Graph,c=0;c<this.triples;c++){var e=this.triples[c];b.add(e)}for(c=
0;c<triples.length;c++)e=triples[c],this.add(e);return b};u.Graph.prototype.match=function(b,c,e,g){for(var i=new u.Graph,h=0,j=0;j<this.triples.length;j++){var n=this.triples[j];if(b==null||n.subject.equals(b))if(c==null||n.predicate.equals(c))if(e==null||n.object.equals(e))if(g==null||h<g)h++,i.add(n);else break}return i};u.Graph.prototype.removeMatches=function(b,c,e){for(var g=[],i=0;i<this.triples.length;i++){var h=this.triples[i];if(b==null||h.subject.equals(b))if(c==null||h.predicate.equals(c))(e==
null||h.object.equals(e))&&g.push(h)}for(i=0;i<g.length;i++)this.remove(g[i]);return this};u.Graph.prototype.toNT=function(){var b="";this.forEach(function(c){b+=c.toString()});return b};u.buildRDFResource=function(b,c,e,g){return b.token==="blank"?u.buildBlankNode(b,c,e,g):b.token==="literal"?u.buildLiteral(b,c,e,g):b.token==="uri"?u.buildNamedNode(b,c,e,g):b.token==="var"?(b=c[b.value],b!=null?u.buildRDFResource(b,c,e,g):null):null};u.buildBlankNode=function(b){if(b.valuetmp!=null)b.value=b.valuetmp;
if(b.value.indexOf("_:")===0)b.value=b.value.split("_:")[1];return new u.BlankNode(b.value)};u.buildLiteral=function(b){return new u.Literal(b.value,b.lang,b.type)};u.buildNamedNode=function(b,c,e,g){if(b.value==null&&b.prefix!=null)c=e.resolveNsInEnvironment(b.prefix,g),b.value=c+b.suffix;return new u.NamedNode(b)};u.rdf=new u.RDFEnvironment;var g={checkFilters:function(b,c,e,m,i,h){var j=b.filter,n=[];if(j==null||b.length!=null)return c;for(b=0;b<j.length;b++){for(var c=g.run(j[b].value,c,e,m,i,
h),q=[],o=0;o<c.length;o++)c[o].__nullify__!=null?n.push(c[o]):q.push(c[o]);c=q}return c.concat(n)}};g.boundVars=function(b){if(b.expressionType!=null){var c=b.expressionType;if(c=="relationalexpression")return c=b.op2,g.boundVars(b.op1)+g.boundVars(c);else if(c=="conditionalor"||c=="conditionaland"){for(var e=[],c=0;c<b.operands;c++)e=e.concat(g.boundVars(b.operands[c]));return e}else if(c=="builtincall")if(b.args==null)return[];else{e=[];for(c=0;c<b.args.length;c++)e=e.concat(g.boundVars(b.args[c]));
return e}else if(c=="multiplicativeexpression"){e=g.boundVars(b.factor);for(c=0;c<b.factors.length;c++)e=e.concat(g.boundVars(b.factors[c].expression));return e}else if(c=="additiveexpression"){e=g.boundVars(b.summand);for(c=0;c<b.summands.length;c++)e=e.concat(g.boundVars(b.summands[c].expression));return e}else if(c=="regex")return e=g.boundVars(b.expression1),e.concat(g.boundVars(b.expression2));else if(c=="unaryexpression")return g.boundVars(b.expression);else if(c=="atomic")return b.primaryexpression==
"var"?[b.value]:[]}else throw console.log("ERROR"),console.log(b),"Cannot find bound expressions in a no expression token";};g.run=function(b,c,e,m,i,h){for(var j=h.copyDenormalizedBindings(c,i.outCache),n=[],q=0;q<c.length;q++){var o=g.runFilter(b,j[q],h,m,i),o=g.ebv(o);g.isEbvError(o)?e&&(o={__nullify__:!0,bindings:c[q]},n.push(o)):o===!0?n.push(c[q]):e&&(o={__nullify__:!0,bindings:c[q]},n.push(o))}return n};g.collect=function(b,c,e,m,i){for(var h=i.copyDenormalizedBindings(c,m.outCache),j=[],n=
0;n<h.length;n++){var q=g.runFilter(b,h[n],i,e,m);j.push({binding:c[n],value:q})}return j};g.runDistinct=function(){};g.runAggregator=function(b,c,e,m,i){if(c==null||c.length===0)return g.ebvError();else if(b.token==="variable"&&b.kind=="var")return c[0][b.value.value];else if(b.token==="variable"&&b.kind==="aliased")if(b.expression.expressionType==="atomic"&&b.expression.primaryexpression==="var")return c[0][b.expression.value.value];else if(b.expression.expressionType==="aggregate")if(b.expression.aggregateType===
"max"){for(var h=null,j=0;j<c.length;j++){var n=c[j],n=g.runFilter(b.expression.expression,n,e,m,i);g.isEbvError(n)||(h===null?h=n:g.runLtFunction(h,n).value===!0&&(h=n))}return h===null?g.ebvError():h}else if(b.expression.aggregateType==="min"){h=null;for(j=0;j<c.length;j++)n=c[j],n=g.runFilter(b.expression.expression,n,e,m,i),g.isEbvError(n)||(h===null?h=n:g.runGtFunction(h,n).value===!0&&(h=n));return h===null?g.ebvError():h}else if(b.expression.aggregateType==="count"){var h={},q=0;if(b.expression.expression===
"*")if(b.expression.distinct!=null&&b.expression.distinct!="")for(j=0;j<c.length;j++){var n=c[j],o=x.hashTerm(n);h[o]==null&&(h[o]=!0,q++)}else q=c.length;else for(j=0;j<c.length;j++)n=c[j],n=g.runFilter(b.expression.expression,n,e,m,i),g.isEbvError(n)||(b.expression.distinct!=null&&b.expression.distinct!=""?(o=x.hashTerm(n),h[o]==null&&(h[o]=!0,q++)):q++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+q}}else if(b.expression.aggregateType==="avg"){for(var h={},t=
{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},j=q=0;j<c.length;j++)n=c[j],n=g.runFilter(b.expression.expression,n,e,m,i),g.isEbvError(n)||(b.expression.distinct!=null&&b.expression.distinct!=""?(o=x.hashTerm(n),h[o]==null&&(h[o]=!0,g.isNumeric(n)&&(t=g.runSumFunction(t,n),q++))):g.isNumeric(n)&&(t=g.runSumFunction(t,n),q++));b=g.runDivFunction(t,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+q});b.value=""+b.value;return b}else if(b.expression.aggregateType===
"sum"){h={};t={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(j=0;j<c.length;j++)n=c[j],n=g.runFilter(b.expression.expression,n,e,m,i),g.isEbvError(n)||(b.expression.distinct!=null&&b.expression.distinct!=""?(o=x.hashTerm(n),h[o]==null&&(h[o]=!0,g.isNumeric(n)&&(t=g.runSumFunction(t,n)))):g.isNumeric(n)&&(t=g.runSumFunction(t,n)));t.value=""+t.value;return t}else return n=g.runFilter(aggregate.expression,c[0],m,{blanks:{},outCache:{}})};g.runFilter=function(b,c,e,m,
i){if(b.expressionType!=null){var h=b.expressionType;if(h=="relationalexpression"){var h=g.runFilter(b.op1,c,e,m,i),j=g.runFilter(b.op2,c,e,m,i);return g.runRelationalFilter(b,h,j,c,e,m,i)}else if(h=="conditionalor")return g.runOrFunction(b,c,e,m,i);else if(h=="conditionaland")return g.runAndFunction(b,c,e,m,i);else if(h=="additiveexpression")return g.runAddition(b.summand,b.summands,c,e,m,i);else if(h=="builtincall")return g.runBuiltInCall(b.builtincall,b.args,c,e,m,i);else if(h=="multiplicativeexpression")return g.runMultiplication(b.factor,
b.factors,c,e,m,i);else if(h=="unaryexpression")return g.runUnaryExpression(b.unaryexpression,b.expression,c,e,m,i);else if(h=="irireforfunction")return g.runIriRefOrFunction(b.iriref,b.args,c,e,m,i);else if(h=="regex")return g.runRegex(b.text,b.pattern,b.flags,c,e,m,i);else if(h=="atomic")if(b.primaryexpression=="var")return c[b.value.value];else{if(typeof b.value=="object"&&!(b.value.type==null||typeof b.value.type!="object"))b.value.type=x.lexicalFormBaseUri(b.value.type,i);return b.value}else throw"Unknown filter expression type";
}else throw"Cannot find bound expressions in a no expression token";};g.isRDFTerm=function(b){return b==null?!1:b.token&&b.token=="literal"||b.token&&b.token=="uri"||b.token&&b.token=="blank"?!0:!1};g.RDFTermEquality=function(b,c,e,m){return b.token==="literal"&&c.token==="literal"?b.lang==c.lang&&b.type==c.type&&b.value==c.value?!0:b.type!=null&&c.type!=null?g.ebvError():g.isSimpleLiteral(b)&&c.type!=null?g.ebvError():g.isSimpleLiteral(c)&&b.type!=null?g.ebvError():!1:b.token==="uri"&&c.token===
"uri"?x.lexicalFormBaseUri(b,m)==x.lexicalFormBaseUri(c,m):b.token==="blank"&&c.token==="blank"?b.value==c.value:!1};g.isInteger=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||
b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:
!1};g.isFloat=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#float"?!0:!1:!1};g.isDecimal=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#decimal"?!0:!1:!1};g.isDouble=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#double"?!0:!1:!1};g.isNumeric=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||
b.type=="http://www.w3.org/2001/XMLSchema#float"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||
b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};g.isSimpleLiteral=function(b){return b&&b.token=="literal"?b.type==null&&b.lang==null?!0:!1:!1};g.isXsdType=function(b,c){return c&&c.token=="literal"?c.type=="http://www.w3.org/2001/XMLSchema#"+b:!1};g.ebv=function(b){if(b==null||g.isEbvError(b))return g.ebvError();
else if(b.token&&b.token==="literal")if(b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||
b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"){var c=parseFloat(b.value);return isNaN(c)?!1:parseFloat(b.value)!=0}else return b.type==="http://www.w3.org/2001/XMLSchema#boolean"?b.value==="true"||
b.value===!0||b.value==="True":b.type==="http://www.w3.org/2001/XMLSchema#string"?b.value!="":b.type==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(b.value)!=null:g.isEbvError(b)?b:b.type==null?b.value!=""?!0:!1:g.ebvError();else return b.value===!0};g.ebvTrue=function(){return val={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};g.ebvFalse=function(){return val={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};g.ebvError=function(){return val=
{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};g.isEbvError=function(b){return typeof b=="object"&&b!=null?b.type==="https://github.com/antoniogarrote/js-tools/types#error":!1};g.ebvBoolean=function(b){return g.isEbvError(b)?b:b===!0?g.ebvTrue():g.ebvFalse()};g.runRelationalFilter=function(b,c,e,m,i,h,j){b=b.operator;if(b==="=")return g.runEqualityFunction(c,e,m,i,h,j);else if(b==="!="){c=g.runEqualityFunction(c,e,m,i,h,j);if(!g.isEbvError(c))c.value=!c.value;
return c}else if(b==="<")return g.runLtFunction(c,e,m);else if(b===">")return g.runGtFunction(c,e,m);else if(b==="<=")return g.runLtEqFunction(c,e,m);else if(b===">=")return g.runGtEqFunction(c,e,m);else throw"Error applying relational filter, unknown operator";};g.effectiveTypeValue=function(b){if(b.token=="literal")if(b.type=="http://www.w3.org/2001/XMLSchema#integer")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#decimal")return b=parseFloat(b.value);else if(b.type==
"http://www.w3.org/2001/XMLSchema#float")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#double")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#long")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#int")return b=parseInt(b.value);
else if(b.type=="http://www.w3.org/2001/XMLSchema#short")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#byte")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort")return b=
parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#date"||b.type=="http://www.w3.org/2001/XMLSchema#dateTime")try{return x.parseISO8601(b.value)}catch(c){return null}else return b.type=="http://www.w3.org/2001/XMLSchema#boolean"?b.value===!0||b.value==="true"||b.value==="1"||b.value===1||b.value===
!0?!0:b.value===!1||b.value==="false"||b.value==="0"||b.value===0||b.value===!1?!1:void 0:b.type=="http://www.w3.org/2001/XMLSchema#string"?b.value===null||b.value===void 0?void 0:""+b.value:b.value;else throw console.log("not implemented yet"),"value not supported in operations yet";};g.runOrFunction=function(b,c,e,m,i){for(var h=null,j=0;j<b.operands.length;j++){var n=g.runFilter(b.operands[j],c,e,m,i);g.isEbvError(n)==!1&&(n=g.ebv(n));h==null?h=n:g.isEbvError(n)?h=g.isEbvError(h)?g.ebvError():
h===!0?!0:g.ebvError():n===!0?h=!0:g.isEbvError(h)&&(h=g.ebvError())}return g.ebvBoolean(h)};g.runAndFunction=function(b,c,e,m,i){for(var h=null,j=0;j<b.operands.length;j++){var n=g.runFilter(b.operands[j],c,e,m,i);g.isEbvError(n)==!1&&(n=g.ebv(n));h==null?h=n:g.isEbvError(n)?h=g.isEbvError(h)?g.ebvError():h===!0?g.ebvError():!1:n===!0?g.isEbvError(h)&&(h=g.ebvError()):h=!1}return g.ebvBoolean(h)};g.runEqualityFunction=function(b,c,e,m,i,h){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();
if(g.isNumeric(b)&&g.isNumeric(c))return e=g.effectiveTypeValue(b),i=g.effectiveTypeValue(c),isNaN(e)||isNaN(i)?g.ebvBoolean(g.RDFTermEquality(b,c,m,h)):g.ebvBoolean(e==i);else if((g.isSimpleLiteral(b)||g.isXsdType("string",b))&&(g.isSimpleLiteral(c)||g.isXsdType("string",c)))return g.ebvBoolean(g.effectiveTypeValue(b)==g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)==g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",
b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();b=x.compareDateComponents(b.value,c.value);return b!=null?b==0?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.isRDFTerm(b)&&g.isRDFTerm(c)?g.ebvBoolean(g.RDFTermEquality(b,c,m,h)):g.ebvFalse()};g.runGtFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();
if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",
b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=x.compareDateComponents(b.value,c.value);return e!=null?e==1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runTotalGtFunction=function(b,c){return g.isEbvError(b)||g.isEbvError(c)?g.ebvError():g.isNumeric(b)&&g.isNumeric(c)||g.isSimpleLiteral(b)&&g.isSimpleLiteral(c)||
g.isXsdType("string",b)&&g.isSimpleLiteral("string",c)||g.isXsdType("boolean",b)&&g.isSimpleLiteral("boolean",c)||g.isXsdType("dateTime",b)&&g.isSimpleLiteral("dateTime",c)?g.runGtFunction(b,c,[]):b.token&&b.token==="uri"&&c.token&&c.token==="uri"?g.ebvBoolean(b.value>c.value):b.token&&b.token==="literal"&&c.token&&c.token==="literal"?g.ebvBoolean(""+b.value+b.type+b.lang>""+c.value+c.type+c.lang):b.token&&b.token==="blank"&&c.token&&c.token==="blank"?g.ebvBoolean(b.value>c.value):b.value&&c.value?
g.ebvBoolean(b.value>c.value):g.ebvTrue()};g.runLtFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isXsdType("boolean",
b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=x.compareDateComponents(b.value,c.value);return e!=null?e==-1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runGtEqFunction=
function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)>=
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=x.compareDateComponents(b.value,c.value);return e!=null?e!=-1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runLtEqFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();
if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",
b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=x.compareDateComponents(b.value,c.value);return e!=null?e!=1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runAddition=function(b,c,e,m,i,h){var j=g.runFilter(b,e,m,i,h);if(g.isEbvError(j))return g.ebvError();b=j;if(g.isNumeric(j)){for(j=0;j<c.length;j++){var n=
g.runFilter(c[j].expression,e,m,i,h);if(g.isNumeric(n))c[j].operator==="+"?b=g.runSumFunction(b,n):c[j].operator==="-"&&(b=g.runSubFunction(b,n));else return g.ebvFalse()}return b}else return g.ebvFalse()};g.runSumFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)+g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runSubFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)-g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runMultiplication=function(b,c,e,m,i,h){b=g.runFilter(b,e,m,i,h);if(g.isEbvError(b))return b;var j=b;if(g.isNumeric(b)){for(var n=0;n<c.length;n++){var q=g.runFilter(c[n].expression,e,m,i,h);if(g.isEbvError(q))return b;if(g.isNumeric(q))c[n].operator==="*"?j=g.runMulFunction(j,q):c[n].operator==="/"&&(j=g.runDivFunction(j,
q));else return g.ebvFalse()}return j}else return g.ebvFalse()};g.runMulFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)*g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",
value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runDivFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)/g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",
value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runBuiltInCall=function(b,c,e,m,i,h){if(b==="notexists"||b==="exists"){var j=JSON.parse(JSON.stringify(c[0])),j=m.abstractQueryTree.parseSelect({pattern:j},e),j=m.abstractQueryTree.bind(j.pattern,e),e=m.executeSelectUnit([{kind:"*"}],i,j,h);return b==="exists"?g.ebvBoolean(e.length!==0):g.ebvBoolean(e.length===0)}else{for(var j=[],n=0;n<c.length;n++)if(c[n].token==="var")j.push(c[n]);else{var q=g.runFilter(c[n],
e,m,i,h);if(g.isEbvError(q))return q;j.push(q)}if(b==="str")return j[0].token==="literal"?{token:"literal",type:null,value:""+j[0].value}:j[0].token==="uri"?{token:"literal",type:null,value:j[0].value}:g.ebvFalse();else if(b==="lang")return j[0].token==="literal"?j[0].lang!=null?{token:"literal",value:""+j[0].lang}:{token:"literal",value:""}:g.ebvError();else if(b==="datatype")return j[0].token==="literal"?(b=j[0],b.type!=null?typeof b.type==="string"?{token:"uri",value:b.type,prefix:null,suffix:null}:
b.type:b.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:g.ebvError()):g.ebvError();else if(b==="isliteral")return j[0].token==="literal"?g.ebvTrue():g.ebvFalse();else if(b==="isblank")return j[0].token==="blank"?g.ebvTrue():g.ebvFalse();else if(b==="isuri"||b==="isiri")return j[0].token==="uri"?g.ebvTrue():g.ebvFalse();else if(b==="sameterm")return b=g.RDFTermEquality(j[0],j[1],m,h),g.isEbvError(b)&&(b=!1),g.ebvBoolean(b);else if(b==="langmatches")return b=
j[0],e=j[1],b.token==="literal"&&e.token==="literal"?e.value==="*"&&b.value!=""?g.ebvTrue():g.ebvBoolean(b.value.toLowerCase().indexOf(e.value.toLowerCase())===0):g.ebvError();else if(b==="bound")return b=j[0].value,b==null?g.ebvError():e[b]!=null?g.ebvTrue():g.ebvFalse();else throw"Builtin call "+b+" not implemented yet";}};g.runUnaryExpression=function(b,c,e,m,i,h){c=g.runFilter(c,e,m,i,h);if(g.isEbvError(c))return c;if(b==="!"){var j=g.ebv(c);return g.isEbvError(j)?g.ebvFalse():g.ebvBoolean(!j)}else if(b===
"+")return g.isNumeric(c)?c:g.ebvError();else if(b==="-")if(g.isNumeric(c)){b={};for(j in c)b[j]=c[j];b.value=-b.value;return b}else return g.ebvError()};g.runRegex=function(b,c,e,m,i,h,j){if(b!=null)b=g.runFilter(b,m,i,h,j);else return g.ebvError();if(c!=null)c=g.runFilter(c,m,i,h,j);else return g.ebvError();e!=null&&(e=g.runFilter(e,m,i,h,j));if(c!=null&&c.token==="literal"&&(e==null||e.token==="literal"))c=c.value,e=e==null?null:e.value;else return g.ebvError();if(b!=null&&b.token=="var")if(m[b.value]!=
null)b=m[b.value];else return g.ebvError();else if(b!=null&&b.token==="literal")if(b.type==null||g.isXsdType("string",b))b=b.value;else return g.ebvError();else return g.ebvError();return(e==null?RegExp(c):RegExp(c,e.toLowerCase())).exec(b)?g.ebvTrue():g.ebvFalse()};g.normalizeLiteralDatatype=function(b,c,e){if(!(b.value.type==null||typeof b.value.type!="object"))b.value.type=x.lexicalFormBaseUri(b.value.type,e);return b};g.runIriRefOrFunction=function(b,c,e,m,i,h){if(c==null)return b;else{for(var j=
[],n=0;n<c.length;n++)j.push(g.runFilter(c[n],e,m,i,h));b=x.lexicalFormBaseUri(b,h);if(b=="http://www.w3.org/2001/XMLSchema#integer"||b=="http://www.w3.org/2001/XMLSchema#decimal"||b=="http://www.w3.org/2001/XMLSchema#double"||b=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b=="http://www.w3.org/2001/XMLSchema#long"||b=="http://www.w3.org/2001/XMLSchema#int"||b=="http://www.w3.org/2001/XMLSchema#short"||b=="http://www.w3.org/2001/XMLSchema#byte"||
b=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b=="http://www.w3.org/2001/XMLSchema#positiveInteger")if(j=j[0],j.token==="literal")if(j=g.normalizeLiteralDatatype(j,m,h),j.type=="http://www.w3.org/2001/XMLSchema#integer"||j.type=="http://www.w3.org/2001/XMLSchema#decimal"||j.type==
"http://www.w3.org/2001/XMLSchema#double"||j.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||j.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#long"||j.type=="http://www.w3.org/2001/XMLSchema#int"||j.type=="http://www.w3.org/2001/XMLSchema#short"||j.type=="http://www.w3.org/2001/XMLSchema#byte"||j.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||
j.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||j.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return j.type=b,j;else if(j.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(j)==!0?(j.type=b,j.value=1):(j.type=b,j.value=0),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#float"||j.type=="http://www.w3.org/2001/XMLSchema#double")return j.type=b,j.value=parseInt(j.value),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string"||
j.type==null){if(j.value.split(".").length>2)return g.ebvError();else if(j.value.split("-").length>2)return g.ebvError();else if(j.value.split("/").length>2)return g.ebvError();else if(j.value.split("+").length>2)return g.ebvError();if(b=="http://www.w3.org/2001/XMLSchema#decimal"&&(j.value.indexOf("e")!=-1||j.value.indexOf("E")!=-1))return g.ebvError();if(b=="http://www.w3.org/2001/XMLSchema#int"||b=="http://www.w3.org/2001/XMLSchema#integer")if(j.value.indexOf("e")!=-1||j.value.indexOf("E")!=-1||
j.value.indexOf(".")!=-1)return g.ebvError();try{return j.value=parseInt(parseFloat(j.value)),isNaN(j.value)?g.ebvError():(j.type=b,j)}catch(q){return g.ebvError()}}else return g.ebvError();else return g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#boolean")return j=j[0],j.token==="literal"&&j.type==null?j.value==="true"||j.value==="1"?g.ebvTrue():j.value==="false"||j.value==="0"?g.ebvFalse():g.ebvError():j.token==="literal"?g.isEbvError(j)?j:g.ebvBoolean(j):g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#string")if(j=
j[0],j.token==="literal")if(j=g.normalizeLiteralDatatype(j,m,h),j.type=="http://www.w3.org/2001/XMLSchema#integer"||j.type=="http://www.w3.org/2001/XMLSchema#decimal"||j.type=="http://www.w3.org/2001/XMLSchema#double"||j.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||j.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#long"||j.type=="http://www.w3.org/2001/XMLSchema#int"||j.type=="http://www.w3.org/2001/XMLSchema#short"||j.type=="http://www.w3.org/2001/XMLSchema#byte"||
j.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||j.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"||j.type=="http://www.w3.org/2001/XMLSchema#float")return j.type=b,j.value=""+j.value,j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string")return j;
else if(j.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(j)?(j.type=b,j.value="true"):(j.type=b,j.value="false"),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#dateTime"||j.type=="http://www.w3.org/2001/XMLSchema#date"){j.type=b;if(typeof j.value!="string")j.value=x.iso8601(j.value);return j}else return j.type==null?(j.value=""+j.value,j.type=b,j):g.ebvError();else return j.token==="uri"?{token:"literal",value:x.lexicalFormBaseUri(j,h),type:b,lang:null}:g.ebvError();else if(b==
"http://www.w3.org/2001/XMLSchema#dateTime"||b=="http://www.w3.org/2001/XMLSchema#date")if(j=j[0],j.type=="http://www.w3.org/2001/XMLSchema#dateTime"||j.type=="http://www.w3.org/2001/XMLSchema#date")return j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string"||j.type==null)try{return j.value=x.iso8601(x.parseStrictISO8601(j.value)),j.type=b,j}catch(o){return g.ebvError()}else return g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#float")if(j=j[0],j.token==="literal")if(j=g.normalizeLiteralDatatype(j,
m,h),j.type=="http://www.w3.org/2001/XMLSchema#decimal"||j.type=="http://www.w3.org/2001/XMLSchema#int")return j.type=b,j.value=parseFloat(j.value),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(j)==!0?(j.type=b,j.value=1):(j.type=b,j.value=0),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#float"||j.type=="http://www.w3.org/2001/XMLSchema#double")return j.type=b,j.value=parseFloat(j.value),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string")try{return j.value=
parseFloat(j.value),isNaN(j.value)?g.ebvError():(j.type=b,j)}catch(t){return g.ebvError()}else if(j.type==null){if(j.value.split(".").length>2)return g.ebvError();else if(j.value.split("-").length>2)return g.ebvError();else if(j.value.split("/").length>2)return g.ebvError();else if(j.value.split("+").length>2)return g.ebvError();try{return j.value=parseFloat(j.value),isNaN(j.value)?g.ebvError():(j.type=b,j)}catch(u){return g.ebvError()}}else return g.ebvError();else return g.ebvError();else return g.ebvError()}};
var E={variablesInBGP:function(b){var c=b.variables;if(c)return c;var e=b.value||b,c=[];for(comp in e)e[comp]&&e[comp].token==="var"?c.push(e[comp].value):e[comp]&&e[comp].token==="blank"&&c.push("blank:"+e[comp].value);return b.variables=c},connected:function(b,c){for(var e="/"+b.vars.join("/")+"/",g=0;g<c.vars.length;g++)if(e.indexOf("/"+c.vars[g]+"/")!=-1)return!0;return!1},variablesIntersectionBGP:function(b,c){for(var e=E.variablesInBGP(b).sort(),g=E.variablesInBGP(c).sort(),i=0,h=0,j=[];i<e.length&&
h<g.length;)e[i]===g[h]?(j.push(e[i]),i++,h++):e[i]<g[h]?i++:h++;return j},executeAndBGPsGroups:function(b){for(var c={},e={},g=0,i=0;i<b.length;i++){var h=b[i],j=[],n;for(n in h)n!="_cost"&&(h[n].token==="var"?j.push(h[n].value):h[n].token==="blank"&&j.push(h[n].value));var q=!1,o;for(o in e){groupVar=e[o];for(var t=0;t<j.length;t++)if(groupVar.indexOf("/"+j[t]+"/")!=-1){c[o].push(h);e[o]=groupVar+j.join("/")+"/";q=!0;break}if(q)break}q||(c[g]=[h],e[g]="/"+j.join("/")+"/",g++)}b=[];for(g in c)b.push(c[g]);
return b},intersectionSize:function(b,c){for(var e=c.i.split("_"),g=0;g<e.length;g++)if(e[g]!=""&&b.i.indexOf("_"+e[g]+"_")!=-1)return 1;return 0},createJoinTree:function(b,c){for(var e="/"+b.vars.join("/")+"/",g=b.vars.concat([]),i=[],h=0;h<c.vars.length;h++)e.indexOf("/"+c.vars[h]+"/")!=-1?c.vars[h].indexOf("_:")==0?i.push("blank:"+c.vars[h]):i.push(c.vars[h]):g.push(c.vars[h]);for(var j=c.i.split("_"),n=b.i.split("_"),e={},h=0;h<j.length;h++)j[h]!=""&&(e[j[h]]=!0);for(h=0;h<n.length;h++)n[h]!=
""&&(e[n[h]]=!0);var h=[],q;for(q in e)h.push(q);return{left:b,right:c,cost:b.cost+c.cost,i:"_"+h.sort().join("_")+"_",vars:g,join:i}}};E.executeBushyTree=function(b,c,e,g){if(b.left==null)return E.executeEmptyJoinBGP(b.right,c,e,g);else if(b.right==null)return E.executeEmptyJoinBGP(b.left,c,e,g);else{var i=E.executeBushyTree(b.left,c,e,g);if(i!=null)return c=E.executeBushyTree(b.right,c,e,g),c!=null?E.joinBindings2(b.join,i,c):null}};E.executeAndBGPsDPSize=function(b,c,e,g){for(var i=E.executeAndBGPsGroups(b),
b=[],h=0;h<i.length;h++){var j=i[h];e.computeCosts(j,g);var n={},q={},o={},t=1,u=null,x={};o["1"]=[];for(var C=0;C<j.length;C++){var t=[],F;for(F in j[C])F!="_cost"&&(j[C][F].token==="var"?t.push(j[C][F].value):j[C][F].token==="blank"&&t.push(j[C][F].value));q["_"+C+"_"]={left:j[C],right:null,cost:j[C]._cost,i:"_"+C+"_",vars:t};t={left:j[C],right:null,cost:j[C]._cost,i:"_"+C+"_",vars:t};n["_"+C+"_"]=t;delete j[C]._cost;x["_"+C+"_"]=!0;o["1"].push("_"+C+"_");if(u==null||u.cost>t.cost)u=t}for(var D=
2;D<=j.length;D++)for(var G=1;G<D;G++)for(var J=o[""+G]||[],O=o[""+(D-G)]||[],C=0;C<J.length;C++)for(var P=0;P<O.length;P++)if(J[C]!==O[P]){var M=q[J[C]],K=q[O[P]];if(E.intersectionSize(M,K)==0&&E.connected(M,K)&&(t=D,K=E.createJoinTree(n[M.i],n[K.i]),!x[K.i])){x[K.i]=!0;var T=K.cost+1;if(n[K.i]!=null)T=n[K.i].cost;M=o[D]||[];M.push(K.i);q[K.i]=K;o[D]=M;T>K.cost&&(t===D&&(u=K),n[K.i]=K)}}b.push(u)}M=null;for(h=0;h<b.length;h++)F=E.executeBushyTree(b[h],c,e,g),M=M==null?F:E.crossProductBindings(M,
F);return M};E.executeEmptyJoinBGP=function(b,c,e,g){return E.executeBGPDatasets(b,c,e,g)};E.executeBGPDatasets=function(b,c,e,g){var i={};if(b.graph==null){for(var h=[],j=0;j<c["default"].length;j++)if(i[c["default"][j].oid]==null){i[c["default"][j].oid]=!0;b.graph=c["default"][j];var n=e.rangeQuery(b,g),n=E.buildBindingsFromRange(n,b);h.push(n)}return b=E.unionManyBindings(h)}else if(b.graph.token==="var"){for(var q=b.graph.value,h=[],j=0;j<c.named.length;j++)if(i[c.named[j].oid]==null)if(i[c.named[j].oid]=
!0,b.graph=c.named[j],n=e.rangeQuery(b,g),n!=null){for(var n=E.buildBindingsFromRange(n,b),o=0;o<n.length;o++)n[o][q]=c.named[j].oid;h.push(n)}else return null;return b=E.unionManyBindings(h||[])}else return n=e.rangeQuery(b,g),n!=null?n=E.buildBindingsFromRange(n,b):null};E.buildBindingsFromRange=function(b,c){E.variablesInBGP(c);var e={},g=c.value||c,e={};for(n in g)g[n]&&g[n].token==="var"?e[n]=g[n].value:g[n]&&g[n].token==="blank"&&(e[n]="blank:"+g[n].value);g=[];if(b!=null)for(var i=0;i<b.length;i++){var h=
{},j=b[i],n;for(n in e)h[e[n]]=j[n];g.push(h)}return g};E.areCompatibleBindings=function(b,c){for(var e in b)if(c[e]!=null&&c[e]!=b[e])return!1;return!0};E.mergeBindings=function(b,c){var e={},g;for(g in b)e[g]=b[g];for(g in c)e[g]=c[g];return e};E.joinBindings2=function(b,c,e){for(var g={},i,h,j,n,q=[],o=0;o<c.length;o++){i=c[o];n=g;for(var t=0;t<b.length;t++)h=b[t],h=i[h],t==b.length-1?(j=n[h]||[],j.push(i),n[h]=j):(j=n[h]||{},n=n[h]=j)}for(o=0;o<e.length;o++){i=e[o];n=g;for(t=0;t<b.length;t++)if(h=
b[t],h=i[h],n[h]!=null)if(t==b.length-1)for(c=0;c<n[h].length;c++)q.push(E.mergeBindings(n[h][c],i));else n=n[h]}return q};E.joinBindings=function(b,c){for(var e=[],g=0;g<b.length;g++)for(var i=b[g],h=0;h<c.length;h++){var j=c[h];E.areCompatibleBindings(i,j)&&e.push(E.mergeBindings(i,j))}return e};E.augmentMissingBindings=function(b,c){for(var e in c)b[e]==null&&(b[e]=null);return b};E.leftOuterJoinBindings=function(b,c){for(var e=[],g=0;g<b.length;g++){for(var i=b[g],h=!1,j=0;j<c.length;j++){var n=
c[j];E.areCompatibleBindings(i,n)&&(h=!0,e.push(E.mergeBindings(i,n)))}h===!1&&(E.augmentMissingBindings(i,n),e.push(i))}return e};E.crossProductBindings=function(b,c){for(var e=[],g=0;g<b.length;g++)for(var i=b[g],h=0;h<c.length;h++)e.push(E.mergeBindings(i,c[h]));return e};E.unionBindings=function(b,c){return b.concat(c)};E.unionManyBindings=function(b){for(var c=[],e=0;e<b.length;e++)c=E.unionBindings(c,b[e]);return c};var F={},ka=E;F.QueryEngine=function(b){if(arguments.length!=0)this.backend=
b.backend,this.lexicon=b.lexicon,this.eventsOnBatchLoad=b.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new M.AbstractQueryTree,this.rdfLoader=new ca.RDFLoader(b.communication),this.callbacksBackend=new J.CallbacksBackend(this)};F.QueryEngine.prototype.registerNsInEnvironment=function(b,c){var e=[];if(b!=null&&b.prefixes!=null)e=b.prefixes;var g={},i;for(i in this.defaultPrefixes)g[i]=this.defaultPrefixes[i];for(i=0;i<e.length;i++){var h=e[i];if(h.token==="prefix")g[h.prefix]=
h.local}c.namespaces=g;c.base=b!=null&&b.base&&typeof b.base==="object"?b.base.value:null};F.QueryEngine.prototype.applyModifier=function(b,c){if(b=="DISTINCT"){for(var e={},g=[],i=0;i<c.length;i++){var h=c[i],j="",n;for(n in h){var q=h[n];q==null?j=j+n+"null":q.token=="literal"?(q.value!=null&&(j+=q.value),q.lang!=null&&(j+=q.lang),q.type!=null&&(j+=q.type)):j=q.value?j+n+q.value:j+n+q}e[j]==null&&(g.push(h),e[j]=!0)}return g}else return c};F.QueryEngine.prototype.applyLimitOffset=function(b,c,e){if(c==
null&&b==null)return e;b==null&&(b=0);c=c==null?e.length:b+c;return e.slice(b,c)};F.QueryEngine.prototype.applySingleOrderBy=function(b,c,e,m){for(var i=[],h=0;h<b.length;h++){var j=g.collect(b[h].expression,[c],e,m,this);i.push(j[0].value)}return{binding:c,value:i}};F.QueryEngine.prototype.applyOrderBy=function(b,c,e,g){var i=this,h=[];if(b!=null&&b.length>0){for(var j=0;j<c.length;j++){var n=i.applySingleOrderBy(b,c[j],e,g);h.push(n)}h.sort(function(c,e){return i.compareFilteredBindings(c,e,b,g)});
c=[];for(j=0;j<h.length;j++)c.push(h[j].binding)}return c};F.QueryEngine.prototype.compareFilteredBindings=function(b,c,e,m){for(var i=0;;){if(i==b.value.length)return 0;var h=e[i].direction;if(b.value[i]==null&&c.value[i]==null)i++;else{if(b.value[i]==null)b={value:!1};else if(c.value[i]==null)b={value:!0};else if(b.value[i].token==="blank"&&c.value[i].token==="blank"){i++;continue}else if(b.value[i].token==="blank")b={value:!1};else if(c.value[i].token==="blank")b={value:!0};else if(b.value[i].token===
"uri"&&c.value[i].token==="uri")if(g.runEqualityFunction(b.value[i],c.value[i],[],this,m).value==!0){i++;continue}else b=g.runTotalGtFunction(b.value[i],c.value[i],[]);else if(b.value[i].token==="uri")b={value:!1};else if(c.value[i].token==="uri")b={value:!0};else if(b.value[i].token==="literal"&&c.value[i].token==="literal"&&b.value[i].type==null&&c.value[i].type==null)if(g.runEqualityFunction(b.value[i],c.value[i],[],this,m).value==!0){i++;continue}else b=g.runTotalGtFunction(b.value[i],c.value[i],
[]);else if(b.value[i].token==="literal"&&b.value[i].type==null)b={value:!1};else if(c.value[i].token==="literal"&&c.value[i].type==null)b={value:!0};else if(g.runEqualityFunction(b.value[i],c.value[i],[],this,m).value==!0){i++;continue}else b=g.runTotalGtFunction(b.value[i],c.value[i],[]);return b.value==!0?h==="ASC"?1:-1:h==="ASC"?-1:1}}};F.QueryEngine.prototype.removeDefaultGraphBindings=function(b,c){for(var e=[],g={},i=0;i<c.named.length;i++)g[c.named[i].oid]=!0;for(i=0;i<c["default"].length;i++)g[c["default"][i].oid]==
null&&e.push(c["default"][i].oid);e=[];for(i=0;i<b.length;i++){var h=b[i],j=!1,n;for(n in h){for(var q=0;q<g.length;q++)if(h[n]===g[q]){j=!0;break}if(j)break}j||e.push(h)}return e};F.QueryEngine.prototype.aggregateBindings=function(b,c,e,m){for(var c=this.copyDenormalizedBindings(c,m.outCache),i={},h=0;h<b.length;h++){var j=g.runAggregator(b[h],c,this,e,m);b[h].alias?i[b[h].alias.value]=j:i[b[h].value.value]=j}return i};F.QueryEngine.prototype.projectBindings=function(b,c,e){if(b[0].kind==="*")return c;
else{for(var m=[],i=0;i<c.length;i++){for(var h=c[i],j={},n=!0,q=0;q<b.length;q++)if(b[q].token=="variable"&&b[q].kind!="aliased")j[b[q].value.value]=h[b[q].value.value];else if(b[q].token=="variable"&&b[q].kind=="aliased"){var o=g.runFilter(b[q].expression,h,this,e,{blanks:{},outCache:{}});if(g.isEbvError(o)){n=!1;break}else j[b[q].alias.value]=o}n===!0&&m.push(j)}return m}};F.QueryEngine.prototype.resolveNsInEnvironment=function(b,c){return c.namespaces[b]};F.QueryEngine.prototype.termCost=function(b,
c){if(b.token==="uri"){var e=x.lexicalFormBaseUri(b,c);return e==null?0:this.lexicon.resolveUriCost(e)}else return b.token==="literal"?this.lexicon.resolveLiteralCost(x.lexicalFormLiteral(b,c)):b.token==="blank"?this.lexicon.resolveBlankCost(b.value):b.token==="var"?this.lexicon.oidCounter/3:null};F.QueryEngine.prototype.normalizeTerm=function(b,c,e){if(b.token==="uri")return c=x.lexicalFormBaseUri(b,c),c==null?null:e?this.lexicon.registerUri(c):this.lexicon.resolveUri(c);else if(b.token==="literal")return c=
x.lexicalFormLiteral(b,c),b=e?this.lexicon.registerLiteral(c):this.lexicon.resolveLiteral(c);else if(b.token==="blank"){var g=b.value,b=c.blanks[g];b==null&&(b=e?this.lexicon.registerBlank(g):this.lexicon.resolveBlank(g),c.blanks[g]=b);return b}else return b.token==="var"?b.value:null};F.QueryEngine.prototype.normalizeDatasets=function(b,c){for(var e=0;e<b.length;e++){var g=b[e];if(g.value===this.lexicon.defaultGraphUri)g.oid=this.lexicon.defaultGraphOid;else{var i=this.normalizeTerm(g,c,!1);if(i!=
null)g.oid=i;else return null}}return!0};F.QueryEngine.prototype.normalizeQuad=function(b,c,e){var g=null,i=null,h=g=null,j;if(b.graph==null)h=0;else if(j=this.normalizeTerm(b.graph,c,e),j!=null)h=j,e===!0&&b.graph.token!="var"&&this.lexicon.registerGraph(j);else return null;j=this.normalizeTerm(b.subject,c,e);if(j!=null)g=j;else return null;j=this.normalizeTerm(b.predicate,c,e);if(j!=null)i=j;else return null;j=this.normalizeTerm(b.object,c,e);return j==null?null:{subject:g,predicate:i,object:j,
graph:h}};F.QueryEngine.prototype.quadCost=function(b,c){var e=null,g=null,i=null,h=null,h=b.graph==null?this.lexicon.oidCounter/4:this.termCost(b.graph,c),e=this.termCost(b.subject,c),g=this.termCost(b.predicate,c),i=this.termCost(b.object,c);return h+e+g+i};F.QueryEngine.prototype.denormalizeBindingsList=function(b,c){for(var e=[],g=0;g<b.length;g++)result=this.denormalizeBindings(b[g],c),e.push(result);return e};F.QueryEngine.prototype.copyDenormalizedBindings=function(b,c){for(var e=[],g=0;g<
b.length;g++){for(var i={},h=b[g],j=x.keys(h),n=0;n<j.length;n++){var q=h[j[n]];if(q==null)i[j[n]]=null;else if(typeof q==="object")i[j[n]]=q;else{var o=c[q];o==null&&(o=this.lexicon.retrieve(q),c[q]=o);i[j[n]]=o}}e.push(i)}return e};F.QueryEngine.prototype.denormalizeBindings=function(b,c){for(var e=x.keys(b),g=0;g<e.length;g++){var i=b[e[g]];i==null?b[e[g]]=null:c[i]!=null?b[e[g]]=c[i]:(i=this.lexicon.retrieve(i),b[e[g]]=i)}return b};F.QueryEngine.prototype.execute=function(b,c,e,g){b=x.normalizeUnicodeLiterals(b);
b=this.abstractQueryTree.parseQueryString(b);if(b==null)c(!1,"Error parsing query string");else if(b.token==="query"&&b.kind=="update"){this.callbacksBackend.startGraphModification();var i=this;this.executeUpdate(b,function(b,e){i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();b?i.callbacksBackend.endGraphModification(function(){c(b,e)}):(i.callbacksBackend.cancelGraphModification(),c(b,e))})}else b.token==="query"&&b.kind=="query"&&this.executeQuery(b,c,e,g)};F.QueryEngine.prototype.executeQuery=
function(b,c,e,g){var i=b.units,h=this,j={blanks:{},outCache:{}};this.registerNsInEnvironment(b.prologue,j);var n=h.abstractQueryTree.parseExecutableUnit(i[0]);if(n.kind==="select")this.executeSelect(n,j,e,g,function(b,e){b?typeof e==="object"&&e.denorm===!0?c(!0,e.bindings):(e=h.denormalizeBindingsList(e,j.outCache),e!=null?c(!0,e):c(!1,e)):c(!1,e)});else if(n.kind==="ask")n.projection=[{token:"variable",kind:"*"}],this.executeSelect(n,j,e,g,function(b,e){b?b?e.length>0?c(!0,!0):c(!0,!1):c(!1,e):
c(!1,e)});else if(n.kind==="construct")n.projection=[{token:"variable",kind:"*"}],h=this,this.executeSelect(n,j,e,g,function(b,e){if(b)if(b)if(e=h.denormalizeBindingsList(e,j.outCache),e!=null){var g=new u.Graph;if(n.template==null)n.template={triplesContext:n.pattern};for(var i=1,m=[],x=0;x<e.length;x++){for(var F=e[x],D=0;D<m.length;D++)delete m[D].valuetmp;for(D=0;D<n.template.triplesContext.length;D++){for(var E=["subject","predicate","object"],G=n.template.triplesContext[D],J=0;J<E.length;J++){var K=
E[J];if(G[K].token==="blank"&&!(G[K].valuetmp&&G[K].valuetmp!=null)){var M="_:b"+i;i++;G[K].valuetmp=M;m.push(G[K])}}E=u.buildRDFResource(G.subject,F,h,j);J=u.buildRDFResource(G.predicate,F,h,j);G=u.buildRDFResource(G.object,F,h,j);E!=null&&J!=null&&G!=null&&(J=new u.Triple(E,J,G),g.add(J))}}c(!0,g)}else c(!1,e);else c(!1,e);else c(!1,e)})};F.QueryEngine.prototype.executeSelect=function(b,c,e,g,i){if(b.kind==="select"||b.kind==="ask"||b.kind==="construct"||b.kind==="modify"){var h=b.projection,j=
b.dataset,n=b.modifier,q=b.limit,o=b.offset,t=b.order;if(e!=null||g!=null)j["default"]=e||[],j.named=g||[];j["default"]!=null&&j["default"].length===0&&j.named!=null&&j.named.length===0&&j["default"].push(this.lexicon.defaultGraphUriTerm);if(this.normalizeDatasets(j["default"].concat(j.named),c)!=null)if(g=this.executeSelectUnit(h,j,b.pattern,c),g!=null){if(b.group!=null&&b.group===""){for(var u=!1,e=0;e<b.projection.length;e++)if(b.projection[e].expression!=null&&b.projection[e].expression.expressionType===
"aggregate"){u=!0;break}if(u===!0)b.group="singleGroup"}if(b.group&&b.group!="")if(this.checkGroupSemantics(b.group,h)){n=this.groupSolution(g,b.group,j,c);q=[];for(e=0;e<n.length;e++)o=this.aggregateBindings(h,n[e],j,c),q.push(o);i(!0,{bindings:q,denorm:!0})}else i(!1,"Incompatible Group and Projection variables");else c=this.applyOrderBy(t,g,j,c),h=this.projectBindings(h,c,j),modifiedBindings=this.applyModifier(n,h),filteredBindings=this.removeDefaultGraphBindings(this.applyLimitOffset(o,q,modifiedBindings),
j),i(!0,filteredBindings)}else i(!1,g);else i(!1,"Error normalizing datasets")}else i(!1,"Cannot execute "+b.kind+" query as a select query")};F.QueryEngine.prototype.groupSolution=function(b,c,e,m){var i=[],h=[],j=!1;if(c==="singleGroup")return[b];else{for(var n=0;n<b.length;n++){for(var q=b[n],o=!0,t=0;t<c.length;t++){var u=c[t],x=null;if(u.token==="var")x=u.value,j==!1&&i.push(x);else if(u.token==="aliased_expression")if(x=u.alias.value,j==!1&&i.push(x),u.expression.primaryexpression==="var")q[u.alias.value]=
q[u.expression.value.value];else if(x=this.copyDenormalizedBindings([q],m.outCache),x=g.runFilter(u.expression,x[0],this,e,m),g.isEbvError(x))o=!1;else{if(x.value!=null)x.value=""+x.value;q[u.alias.value]=x}else x=this.copyDenormalizedBindings([q],m.outCache),x=g.runFilter(u,x[0],this,m),g.isEbvError(x)?o=!1:(q["groupCondition"+env._i]=x,x="groupCondition"+env._i,j==!1&&i.push(x))}j==!1&&(j=!0);o===!0&&h.push(q)}b={};for(n=0;n<h.length;n++){c=h[n];e="";for(t=0;t<i.length;t++)m=c[i[t]],e+=typeof m===
"object"?m.value:m;b[e]==null?b[e]=[c]:b[e].push(c)}var i=[],C;for(C in b)i.push(b[C]);return i}};F.QueryEngine.prototype.executeSelectUnit=function(b,c,e,m){return e.kind==="BGP"?this.executeAndBGP(b,c,e,m):e.kind==="UNION"?this.executeUNION(b,c,e.value,m):e.kind==="JOIN"?this.executeJOIN(b,c,e,m):e.kind==="LEFT_JOIN"?this.executeLEFT_JOIN(b,c,e,m):e.kind==="FILTER"?(b=this.executeSelectUnit(b,c,e.value,m),b!=null?b=g.checkFilters(e,b,!1,c,m,this):[]):e.kind==="EMPTY_PATTERN"?[]:e.kind==="ZERO_OR_MORE_PATH"||
e.kind==="ONE_OR_MORE_PATH"?this.executeZeroOrMorePath(e,c,m):(console.log("Cannot execute query pattern "+e.kind+". Not implemented yet."),null)};F.QueryEngine.prototype.executeZeroOrMorePath=function(b,c,e){var g=[];b.x.token==="var"&&g.push({token:"variable",kind:"var",value:b.x.value});b.y.token==="var"&&g.push({token:"variable",kind:"var",value:b.y.value});g.length===0&&g.push({token:"variable",kind:"*"});if(b.x.token==="var"&&b.y.token==="var"){var i=this.executeAndBGP(g,c,b.path,e),h={},g=
[],j,n,q,o,t=b.x.value;n=b.x;for(var u=b.path,B=0;B<i.length;B++)if(j=i[B][t],h[j]==null){o=this.lexicon.retrieve(j);b.x=o;b.path=this.abstractQueryTree.replace(u,n,o,e);u=x.clone(b.path);n=this.executeZeroOrMorePath(b,c,e);for(var C=0;C<n.length;C++)q=n[C],q[t]=j,g.push(q);n=o}return g}else if(b.x.token!=="var"&&b.y.token==="var"){h={};j=!0;o=[];for(t=[];j==!0||o.length!==0;){j===!0?(i=this.executeAndBGP(g,c,b.path,e),n=b.x,j=!1):(u=this.lexicon.retrieve(o.pop()),i=b.path,i=this.abstractQueryTree.replace(i,
n,u,e),i=this.executeAndBGP(g,c,i,e),n=u);for(B=0;B<i.length;B++)u=i[B][b.y.value],h[u]!==!0&&(q={},q[b.y.value]=u,t.push(q),h[u]=!0,o.push(u))}return t}else throw"Kind of path not supported!";};F.QueryEngine.prototype.executeUNION=function(b,c,e,m){var i=e[0],h=e[1],j=null,n=null;if(e.length!=2)throw"SPARQL algebra UNION with more than two components";j=this.executeSelectUnit(b,c,i,m);if(j==null)return null;n=this.executeSelectUnit(b,c,h,m);if(n==null)return null;b=ka.unionBindings(j,n);return b=
g.checkFilters(e,b,!1,c,m,this)};F.QueryEngine.prototype.executeAndBGP=function(b,c,e,m){b=ka.executeAndBGPsDPSize(e.value,c,this,m);return b!=null?g.checkFilters(e,b,!1,c,m,this):null};F.QueryEngine.prototype.executeLEFT_JOIN=function(b,c,e,m){var i=e.rvalue,h=null,j=null,h=this.executeSelectUnit(b,c,e.lvalue,m);if(h==null)return null;j=this.executeSelectUnit(b,c,i,m);if(j==null)return null;b=ka.leftOuterJoinBindings(h,j);c=g.checkFilters(e,b,!0,c,m,this);if(h.length>1&&j.length>1){var e=[],m={},
n;for(n in h[0])m[n]=!0;for(n in j[0])m[n]!=!0&&e.push(n);h=[];j={};for(m=0;m<c.length;m++)if(c[m].__nullify__===!0){for(i=0;i<e.length;i++)c[m].bindings[e[i]]=null;i=[];b=[];for(n in c[m].bindings)c[m].bindings[n]!=null&&(i.push(n+c[m].bindings[n]),i.sort(),b.push(i.join("")));if(j[i.join("")]==null){for(i=0;i<b.length;i++)j[b[i]]=!0;h.push(c[m].bindings)}}else for(n in h.push(c[m]),i=[],c[m])i.push(n+c[m][n]),i.sort(),j[i.join("")]=!0;return h}else return c};F.QueryEngine.prototype.executeJOIN=
function(b,c,e,m){var i=e.lvalue,h=e.rvalue,j=null,n=null,j=this.executeSelectUnit(b,c,i,m);if(j==null)return null;n=this.executeSelectUnit(b,c,h,m);if(n==null)return null;b=null;if(j.length===0||n.length===0)b=[];else{var b={},q=[],o;for(o in j[0])b[o]=!1;for(o in n[0])b[o]===!1&&q.push(o);b=q.length==0?ka.joinBindings(j,n):this.abstractQueryTree.treeWithUnion(i)||this.abstractQueryTree.treeWithUnion(h)?ka.joinBindings(j,n):ka.joinBindings2(q,j,n)}return b=g.checkFilters(e,b,!1,c,m,this)};F.QueryEngine.prototype.rangeQuery=
function(b,c){var e=this.normalizeQuad(b,c,!1);return e!=null?(e=this.backend.range(new W.Pattern(e)),e==null||e.length==0?[]:e):(console.log("ERROR normalizing quad"),null)};F.QueryEngine.prototype.executeUpdate=function(b,c){var e=b.units,g=this,i={blanks:{},outCache:{}};this.registerNsInEnvironment(b.prologue,i);for(var h=0;h<e.length;h++){var j=g.abstractQueryTree.parseExecutableUnit(e[h]);if(j.kind==="insertdata"){for(var n=0;n<j.quads.length;n++){var q=j.quads[n];if(g._executeQuadInsert(q,i)!==
!0)return c(!1,error)}c(!0)}else if(j.kind==="deletedata"){for(n=0;n<j.quads.length;n++)q=j.quads[n],this._executeQuadDelete(q,i);c(!0)}else if(j.kind==="modify")this._executeModifyQuery(j,i,c);else if(j.kind==="create")c(!0);else if(j.kind==="load")n={uri:x.lexicalFormBaseUri(j.sourceGraph,i)},j.destinyGraph!=null&&(n={uri:x.lexicalFormBaseUri(j.destinyGraph,i)}),g=this,this.rdfLoader.load(j.sourceGraph.value,n,function(b,e){b==!1?(console.log("Error loading graph"),console.log(e),c(!1,"error batch loading quads")):
(e=g.batchLoad(e),c(e!=null,e||"error batch loading quads"))});else if(j.kind==="drop")this._executeClearGraph(j.destinyGraph,i,c);else if(j.kind==="clear")this._executeClearGraph(j.destinyGraph,i,c);else throw Error("not supported execution unit");}};F.QueryEngine.prototype.batchLoad=function(b,c){var e=null,g=null,i=null,h=null,j=0,n=!0,q={},o,t;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();for(var u=0;u<b.length;u++)if(t=b[u],t.subject.uri||t.subject.token==="uri"?o=this.lexicon.registerUri(t.subject.uri||
t.subject.value):t.subject.literal||t.subject.token==="literal"?o=this.lexicon.registerLiteral(t.subject.literal||t.subject.value):(o=q[t.subject.blank||t.subject.value],o==null&&(o=this.lexicon.registerBlank(t.subject.blank||t.subject.value),q[t.subject.blank||t.subject.value]=o)),e=o,t.predicate.uri||t.predicate.token==="uri"?o=this.lexicon.registerUri(t.predicate.uri||t.predicate.value):t.predicate.literal||t.predicate.token==="literal"?o=this.lexicon.registerLiteral(t.predicate.literal||t.predicate.value):
(o=q[t.predicate.blank||t.predicate.value],o==null&&(o=this.lexicon.registerBlank(t.predicate.blank||t.predicate.value),q[t.predicate.blank||t.predicate.value]=o)),g=o,t.object.uri||t.object.token==="uri"?o=this.lexicon.registerUri(t.object.uri||t.object.value):t.object.literal||t.object.token==="literal"?o=this.lexicon.registerLiteral(t.object.literal||t.object.value):(o=q[t.object.blank||t.object.value],o==null&&(o=this.lexicon.registerBlank(t.object.blank||t.object.value),q[t.object.blank||t.object.value]=
o)),i=o,t.graph.uri||t.graph.token==="uri"?(o=this.lexicon.registerUri(t.graph.uri||t.graph.value),this.lexicon.registerGraph(o)):t.graph.literal||t.graph.token==="literal"?o=this.lexicon.registerLiteral(t.graph.literal||t.graph.value):(o=q[t.graph.blank||t.graph.value],o==null&&(o=this.lexicon.registerBlank(t.graph.blank||t.graph.value),q[t.graph.blank||t.graph.value]=o)),h=o,o=t,t={subject:e,predicate:g,object:i,graph:h},e=new W.NodeKey(t),g=this.backend.search(e),!g)if(g=this.backend.index(e),
g==!0)this.eventsOnBatchLoad&&this.callbacksBackend.nextGraphModification(J.added,[o,t]),j+=1;else{n=!1;break}this.lexicon.updateAfterWrite!=null&&this.lexicon.updateAfterWrite();var x=function(){n?c&&c(!0,j):c&&c(!1,null)};this.eventsOnBatchLoad?this.callbacksBackend.endGraphModification(function(){x()}):x();return n?j:null};F.QueryEngine.prototype.computeCosts=function(b,c){for(var e=0;e<b.length;e++)b[e]._cost=this.quadCost(b[e],c);return b};F.QueryEngine.prototype._executeModifyQuery=function(b,
c,e){var g=this,i=!0,h=null,j=["subject","predicate","object","graph"];b.insert=b.insert==null?[]:b.insert;b["delete"]=b["delete"]==null?[]:b["delete"];x.seq(function(e){var j=[],o=[];b["with"]!=null&&j.push(b["with"]);if(b.using!=null)for(var o=[],t=0;t<b.using.length;t++){var u=b.using[t];u.kind==="named"?o.push(u.uri):j.push(u.uri)}b.dataset={};b.projection=[{token:"variable",kind:"*"}];g.executeSelect(b,c,j,o,function(b,j){b?(j=g.denormalizeBindingsList(j,c.outCache),j!=null?h=j:i=!1):i=!1;return e()})},
function(e){var q=b["with"];if(i){for(var o=[],t=0;t<b["delete"].length;t++)for(var u=b["delete"][t],x=0;x<h.length;x++){for(var C={},E=h[x],D=0;D<j.length;D++){var F=j[D];F=="graph"&&u[F]==null?C.graph=q:C[F]=u[F].token==="var"?E[u[F].value]:u[F]}o.push(C)}for(x=0;x<o.length;x++)C=o[x],g._executeQuadDelete(C,c)}e()},function(e){var q=b["with"];if(i){for(var o=[],t=0;t<b.insert.length;t++)for(var u=b.insert[t],x=0;x<h.length;x++){for(var C={},F=h[x],D=0;D<j.length;D++){var E=j[D];E=="graph"&&u[E]==
null?C.graph=q:C[E]=u[E].token==="var"?F[u[E].value]:u[E]}o.push(C)}for(t=0;t<o.length;t++)C=o[t],g._executeQuadInsert(C,c)}e()})(function(){e(i)})};F.QueryEngine.prototype._executeQuadInsert=function(b,c){var e=this.normalizeQuad(b,c,!0);if(e!=null){var g=new W.NodeKey(e),i=this.backend.search(g);return i?i:(i=this.backend.index(g),i==!0?(this.callbacksBackend.nextGraphModification(J.added,[b,e]),!0):(console.log("ERROR inserting quad"),!1))}else return console.log("ERROR normalizing quad"),!1};
F.QueryEngine.prototype._executeQuadDelete=function(b,c){var e=this.normalizeQuad(b,c,!1);if(e!=null){var g=new W.NodeKey(e);this.backend["delete"](g);return this.lexicon.unregister(b,g)==!0?(this.callbacksBackend.nextGraphModification(J.deleted,[b,e]),!0):(console.log("ERROR unregistering quad"),!1)}else return console.log("ERROR normalizing quad"),!1};F.QueryEngine.prototype._executeClearGraph=function(b,c,e){if(b==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",e);else if(b===
"named"){var g=this,i=this.lexicon.registeredGraphs(!0);if(i!=null){var h=!1;x.repeat(0,i.length,function(b,c){var e=i[c._i],o=arguments.callee;h?b(o,c):g.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(e){h=!e;b(o,c)})},function(){e(!h)})}else e(!1,"Error deleting named graphs")}else b==="all"?(g=this,this.execute("CLEAR DEFAULT",function(b,c){b?g.execute("CLEAR NAMED",e):e(!1,c)})):b.token=="uri"?(b=x.lexicalFormBaseUri(b,c),b!=null?this.execute("DELETE { GRAPH <"+
b+"> { ?s ?p ?o } } WHERE { GRAPH <"+b+"> { ?s ?p ?o } }",e):e(!1,"wrong graph URI")):e(!1,"wrong graph URI")};F.QueryEngine.prototype.checkGroupSemantics=function(b,c){if(b==="singleGroup")return!0;for(var e={},g=0;g<b.length;g++){var i=b[g];i.token==="var"?e[i.value]=!0:i.token==="aliased_expression"&&(e[i.alias.value]=!0)}for(g=0;g<c.length;g++)if(i=c[g],i.kind==="var"){if(e[i.value.value]==null)return!1}else if(i.kind==="aliased"&&i.expression&&i.expression.primaryexpression==="var"&&e[i.expression.value.value]==
null)return!1;return!0};F.QueryEngine.prototype.registerDefaultNamespace=function(b,c){this.defaultPrefixes[b]=c};var J={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(b){this.aqt=new M.AbstractQueryTree;this.engine=b;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices=["SPOG","GP",
"OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(b=0;b<this.indices.length;b++){var c=
this.indices[b];this.indexMap[c]={};this.queriesIndexMap[c]={}}}};J.CallbacksBackend.prototype.startGraphModification=function(){this.pendingQueries=[].concat(this.queriesList);this.matchedQueries=[];if(this.updateInProgress==null)this.updateInProgress={added:[],deleted:[]}};J.CallbacksBackend.prototype.nextGraphModification=function(b,c){this.updateInProgress[b].push(c)};J.CallbacksBackend.prototype.endGraphModification=function(b){var c=this;if(this.updateInProgress!=null){var e=c.updateInProgress;
c.updateInProgress=null;this.sendNotification(J.deleted,e[J.deleted],function(){c.sendNotification(J.added,e[J.added],function(){c.sendEmptyNotification(J.eventsFlushed,null,function(){c.dispatchQueries(function(){b(!0)})})})})}else b(!0)};J.CallbacksBackend.prototype.cancelGraphModification=function(){this.updateInProgress=null};J.CallbacksBackend.prototype.sendNotification=function(b,c,e){for(var g={},i=0;i<c.length;i++){var h=c[i],j;for(j in this.indexMap){var n=this.indexMap[j],q=this.componentOrders[j];
this._searchCallbacksInIndex(n,q,b,h,g);this.pendingQueries.length!=0&&(n=this.queriesIndexMap[j],this._searchQueriesInIndex(n,q,h))}}this.dispatchNotifications(g);e!=null&&e(!0)};J.CallbacksBackend.prototype.sendEmptyNotification=function(b,c,e){for(var g=this.emptyNotificationsMap[b]||[],i=0;i<g.length;i++)g[i](b,c);e()};J.CallbacksBackend.prototype.dispatchNotifications=function(b){for(var c in b){var e=this.callbacksMap[c],g=b[c][J.deleted];g!=null&&e(J.deleted,g);for(var i in b[c])i!=J.deleted&&
e(i,b[c][i])}};J.CallbacksBackend.prototype._searchCallbacksInIndex=function(b,c,e,g,i){for(var h=g[1],g=g[0],j=0;j<c.length+1;j++){for(var n=b._||[],q=[],o=0;o<n.length;o++){var t=n[o];this.callbacksMap[t]!=null&&(i[t]=i[t]||{},i[t][e]=i[t][e]||[],i[t][e].push(g),q.push(t))}b._=q;n=c[j];if(b[""+h[n]]!=null)b=b[""+h[n]];else break}};J.CallbacksBackend.prototype.subscribeEmpty=function(b,c){var e=this.emptyNotificationsMap[b]||[];e.push(c);this.emptyNotificationsMap[b]=e};J.CallbacksBackend.prototype.unsubscribeEmpty=
function(b,c){var e=this.emptyNotificationsMap[b];e!=null&&(e=x.remove(e,c));this.emptyNotificationsMap[b]=e};J.CallbacksBackend.prototype.subscribe=function(b,c,e,g,i,h){b=this._tokenizeComponents(b,c,e,g);c={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,c);b=this.engine.normalizeQuad(b,c,!0);e=this._indexForPattern(new W.Pattern(b));c=this.componentOrders[e];e=this.indexMap[e];for(g=0;g<c.length;g++){var j=b[c[g]];if(j==="_"){e._==null&&(e._=[]);this.callbackCounter++;e._.push(this.callbackCounter);
this.callbacksMap[this.callbackCounter]=i;this.callbacksInverseMap[i]=this.callbackCounter;break}else g===c.length-1?(e[j]=e[j]||{_:[]},this.callbackCounter++,e[j]._.push(this.callbackCounter),this.callbacksMap[this.callbackCounter]=i,this.callbacksInverseMap[i]=this.callbackCounter):(e[j]=e[j]||{},e=e[j])}h!=null&&h(!0)};J.CallbacksBackend.prototype.unsubscribe=function(b){var c=this.callbacksInverseMap[b];c!=null&&(delete this.callbacksInverseMap[b],delete this.callbacksMap[c])};J.CallbacksBackend.prototype._tokenizeComponents=
function(b,c,e,g){var i={};i.subject=b==null?J.ANYTHING:b.indexOf("_:")==0?{token:"blank",value:b}:{token:"uri",value:b};i.predicate=c==null?J.ANYTHING:{token:"uri",value:c};i.object=e==null?J.ANYTHING:{token:"uri",value:e};i.graph=g==null?J.ANYTHING:{token:"uri",value:g};return i};J.CallbacksBackend.prototype._indexForPattern=function(b){for(var b=b.indexKey,c=this.indices,e=0;e<c.length;e++)for(var g=c[e],i=this.componentOrders[g],h=0;h<i.length;h++){if(x.include(b,i[h])===!1)break;if(h==b.length-
1)return g}return"SPOG"};J.CallbacksBackend.prototype.observeNode=function(){var b,c,e,g;arguments.length===4?(b=arguments[0],c=arguments[1],e=arguments[2],g=arguments[3]):(b=arguments[0],c=this.engine.lexicon.defaultGraphUri,e=arguments[1],g=arguments[2]);c="CONSTRUCT { <"+b+"> ?p ?o } WHERE { GRAPH <"+c+"> { <"+b+"> ?p ?o } }";var i=this,h={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,h);var j=[];this.engine.execute(c,function(c,q){if(c){var o=!1,t=function(b,c){if(b==="eventsFlushed"&&
o)o=!1,e(q);else if(b!=="eventsFlushed"){o=!0;for(var g=0;g<c.length;g++){var m=c[g],n=u.buildRDFResource(m.subject,j,i.engine,h),t=u.buildRDFResource(m.predicate,j,i.engine,h),m=u.buildRDFResource(m.object,j,i.engine,h);n!=null&&t!=null&&m!=null&&(m=new u.Triple(n,t,m),b===J.added?q.add(m):b===J.deleted&&q.remove(m))}}};i.observersMap[e]=t;i.subscribeEmpty(J.eventsFlushed,t);i.subscribe(b,null,null,null,t,function(){e(q);g&&g(!0)})}else g&&g(!1)})};J.CallbacksBackend.prototype.stopObservingNode=
function(b){return(b=this.observersMap[b])?(this.unsubscribe(b),this.unsubscribeEmpty(J.eventsFlushed,b),!0):!1};J.CallbacksBackend.prototype.observeQuery=function(b,c,e){var g=this.aqt.collectBasicTriples(this.aqt.parseSelect(this.aqt.parseQueryString(b).units[0])),i={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,i);var h,j,n,q=this.queryCounter;this.queryCounter++;this.queriesMap[q]=b;this.queriesInverseMap[b]=q;this.queriesList.push(q);this.queriesCallbacksMap[q]=c;for(var o=
0;o<g.length;o++){j=g[o];if(j.graph==null)j.graph=this.engine.lexicon.defaultGraphUriTerm;j=this.engine.normalizeQuad(j,i,!0);h=new W.Pattern(j);n=this._indexForPattern(h);h=this.componentOrders[n];n=this.queriesIndexMap[n];for(var t=0;t<h.length;t++){var u=j[h[t]];if(typeof u==="string"){n._==null&&(n._=[]);n._.push(q);break}else t===h.length-1?(n[u]=n[u]||{_:[]},n[u]._.push(q)):(n[u]=n[u]||{},n=n[u])}}this.engine.execute(b,function(b,e){b?c(e):console.log("ERROR in query callback "+e)});e!=null&&
e()};J.CallbacksBackend.prototype.stopObservingQuery=function(b){var c=this.queriesInverseMap[b];if(c!=null)delete this.queriesInverseMap[b],delete this.queriesMap[c],this.queriesList=x.remove(this.queriesList,c)};J.CallbacksBackend.prototype._searchQueriesInIndex=function(b,c,e){for(var e=e[1],g=0;g<c.length+1;g++){for(var i=b._||[],h=[],j=0;j<i.length;j++){var n=i[j];x.include(this.pendingQueries,n)&&(x.remove(this.pendingQueries,n),this.matchedQueries.push(n));this.queriesMap[n]!=null&&h.push(n)}b._=
h;i=c[g];if(b[""+e[i]]!=null)b=b[""+e[i]];else break}};J.CallbacksBackend.prototype.dispatchQueries=function(b){var c=this,e,g,i,h;x.repeat(0,this.matchedQueries.length,function(b,n){e=arguments.callee;i=c.matchedQueries[n._i];g=c.queriesMap[i];h=c.queriesCallbacksMap[i];x.recur(function(){c.engine.execute(g,function(c,g){c?h(g):console.log("ERROR executing query callback "+g);b(e,n)})})},function(){b()})};var P={};try{typeof Worker=="undefined"&&(Worker=null)}catch(Fc){Worker=null}if(Worker)P.RDFStoreClient=
function(b,c,e){console.log("trying to load "+b);this.connection=Worker.Worker?new Worker.Worker(b):new Worker(b);this.callbacksCounter=1;var g=this;this.rdf=u.rdf;console.log("The worker");console.log(this.connection);g=this;this.connection.onmessage=function(b){g.receive(b)};this.observingCallbacks={};this.callbacks={0:{cb:function(b,c){b===!0?e(!0,g):e(!1,c)},fn:"create"}};this.connection.postMessage({fn:"create",args:c,callback:"0"})},P.RDFStoreClient.prototype.receive=function(b){event=b.data||
b;if(event.fn==="workerRequest:NetworkTransport:load"){var c=this,e=event.callback,b=event.arguments.concat(function(b,g){c.connection.postMessage({fn:"workerRequestResponse",results:[b,g],callback:e})});T.load.apply(T,b)}else if(b=this.callbacks[event.callback])b.fn==="create"||b.fn==="execute"||b.fn==="insert"||b.fn=="graph"||b.fn==="node"||b.fn==="insert"||b.fn==="delete"||b.fn==="clear"||b.fn==="load"||b.fn==="startObservingQueryEndCb"||b.fn==="registeredGraphs"?(delete this.callbacks[event.callback],
b.cb(event.success,event.result)):b.fn==="startObservingQuery"?b.cb(event.result):b.fn==="startObservingNode"?b.cb(event.result):b.fn==="subscribe"&&b.cb(event.event,event.result)},P.RDFStoreClient.prototype.registerCallback=function(b,c){var e=""+this.callbacksCounter;this.callbacks[e]={fn:b,cb:c};this.callbacksCounter++;return e},P.RDFStoreClient.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],
arguments[1],arguments[2],arguments[3]);else{var b,c;arguments.length===1?(b=arguments[0],c=function(){}):arguments.length===2&&(b=arguments[0],c=arguments[1]);c=this.registerCallback("execute",c);this.connection.postMessage({fn:"execute",args:[b],callback:c})}},P.RDFStoreClient.prototype.insert=function(){var b,c,e;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"insert",args:[c]});else if(arguments.length===2)c=arguments[0],e=arguments[1]||function(){},e=this.registerCallback("insert",
e),this.connection.postMessage({fn:"insert",args:[c],callback:e});else if(arguments.length===3)c=arguments[0],b=arguments[1],e=arguments[2]||function(){},e=this.registerCallback("insert",e),this.connection.postMessage({fn:"insert",args:[c,b],callback:e});else throw"The triples to insert, an optional graph and callback must be provided";},P.RDFStoreClient.prototype.graph=function(){var b=null,c=null;if(arguments.length===1)c=arguments[0]||function(){};else if(arguments.length===2)c=arguments[1]||function(){},
b=arguments[0];else throw"An optional graph URI and a callback function must be provided";var e=this,g=this.registerCallback("insert",function(b,h){if(b){for(var g,m=0;m<h.triples.length;m++)g=h.triples[m],h.triples[m]=new u.Triple(e.adaptJSInterface(g.subject),e.adaptJSInterface(g.predicate),e.adaptJSInterface(g.object));c(b,e.rdf.createGraph(h.triples))}else c(b,h)});b==null?this.connection.postMessage({fn:"graph",args:[],callback:g}):this.connection.postMessage({fn:"graph",args:[b],callback:g})},
P.RDFStoreClient.prototype.node=function(){var b=null,c=null,e=null;if(arguments.length===2)e=arguments[0],c=arguments[1]||function(){};else if(arguments.length===3)e=arguments[0],b=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";var g=this,i=this.registerCallback("insert",function(b,e){if(b){for(var i,q=0;q<e.triples.length;q++)i=e.triples[q],e.triples[q]=new u.Triple(g.adaptJSInterface(i.subject),g.adaptJSInterface(i.predicate),
g.adaptJSInterface(i.object));c(b,g.rdf.createGraph(e.triples))}else c(b,e)});b==null?this.connection.postMessage({fn:"node",args:[e],callback:i}):this.connection.postMessage({fn:"node",args:[e,b],callback:i})},P.RDFStoreClient.prototype.setPrefix=function(b,c){this.rdf.setPrefix(b,c);this.connection.postMessage({fn:"rdf/setPrefix",args:[b,c],callback:null})},P.RDFStoreClient.prototype.setDefaultPrefix=function(b){this.rdf.setDefaultPrefix(b);this.connection.postMessage({fn:"rdf/setDefaultPrefix",
args:[b],callback:null})},P.RDFStoreClient.prototype["delete"]=function(){var b,c,e;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"delete",args:[c]});else if(arguments.length===2)c=arguments[0],e=arguments[1]||function(){},e=this.registerCallback("delete",e),this.connection.postMessage({fn:"delete",args:[c],callback:e});else if(arguments.length===3)c=arguments[0],b=arguments[1],e=arguments[2]||function(){},e=this.registerCallback("delete",e),this.connection.postMessage({fn:"delete",
args:[c,b],callback:e});else throw"The triples to delete, an optional graph and callback must be provided";},P.RDFStoreClient.prototype.clear=function(){var b,c;if(arguments.length===1)c=arguments[0]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[],callback:c});else if(arguments.length===2)b=arguments[0],c=arguments[1]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[b],callback:c});else throw"The optional graph and a callback must be provided";
},P.RDFStoreClient.prototype.setBatchLoadEvents=function(b){this.connection.postMessage({fn:"setBatchLoadEvents",args:[b]})},P.RDFStoreClient.prototype.registerDefaultNamespace=function(b,c){this.connection.postMessage({fn:"registerDefaultNamespace",args:[b,c]})},P.RDFStoreClient.prototype.registerDefaultProfileNamespaces=function(){this.connection.postMessage({fn:"registerDefaultProfileNamespaces",args:[]})},P.RDFStoreClient.prototype.load=function(){var b,c,e,g;if(arguments.length===3)b=arguments[0],
c=arguments[1],g=arguments[2]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[b,c],callback:g});else if(arguments.length===4)b=arguments[0],c=arguments[1],e=arguments[2],g=arguments[3]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[b,c,e],callback:g});else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";},P.RDFStoreClient.prototype.startObservingQuery=
function(b,c,e){e!=null?(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[b]=c,e=this.registerCallback("startObservingQueryEndCb",e),this.connection.postMessage({fn:"startObservingQuery",args:[b],callback:[c,e]})):(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[b]=c,this.connection.postMessage({fn:"startObservingQuery",args:[b],callback:[c]}))},P.RDFStoreClient.prototype.stopObservingQuery=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];
delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingQuery",args:[b],callback:[]})},P.RDFStoreClient.prototype.startObservingNode=function(){var b,c,e;if(arguments.length===2){b=arguments[0];e=arguments[1];var g=this,i=this.registerCallback("startObservingNode",function(b){for(var c,i=0;i<b.triples.length;i++)c=b.triples[i],b.triples[i]=new u.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));e(g.rdf.createGraph(b.triples))});this.observingCallbacks[e]=
i;this.connection.postMessage({fn:"startObservingNode",args:[b],callback:i})}else arguments.length===3&&(b=arguments[0],c=arguments[1],e=arguments[2],g=this,i=this.registerCallback("startObservingNode",function(b){for(var c,i=0;i<b.triples.length;i++)c=b.triples[i],b.triples[i]=new u.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));e(g.rdf.createGraph(b.triples))}),this.observingCallbacks[e]=i,this.connection.postMessage({fn:"startObservingNode",args:[b,
c],callback:i}))},P.RDFStoreClient.prototype.stopObservingNode=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingNode",args:[c],callback:[]})},P.RDFStoreClient.prototype.subscribe=function(b,c,e,g,i){var h=this,j=this.registerCallback("subscribe",function(b,c){for(var e,g=0;g<c.length;g++)e=c[g],c[g]=new u.Triple(h.adaptJSInterface(e.subject),h.adaptJSInterface(e.predicate),h.adaptJSInterface(e.object));
i(b,c)});this.observingCallbacks[i]=j;this.connection.postMessage({fn:"subscribe",args:[b,c,e,g],callback:j})},P.RDFStoreClient.prototype.unsubscribe=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];delete this.callbacks[c];this.connection.postMessage({fn:"unsubscribe",args:[c],callback:[]})},P.RDFStoreClient.prototype.registeredGraphs=function(b){var c=this;this.connection.postMessage({fn:"registeredGraphs",args:[],callback:this.registerCallback("registeredGraphs",function(e,
g){if(e)for(var i=0;i<g.length;i++)graph=g[i],g[i]=c.adaptJSInterface(graph);b(e,g)})})},P.RDFStoreClient.prototype.adaptJSInterface=function(b){if(b.interfaceName==="BlankNode")return new u.BlankNode(b.bnodeId);else if(b.interfaceName==="Literal")return new u.Literal(b.nominalValue,b.language,b.datatype);else if(b.interfaceName==="NamedNode")return new u.NamedNode(b.nominalValue)},P.RDFStoreClient.prototype.isWebWorkerConnection=!0;var G={},xb={MongodbQueryEngine:function(){throw"MongoDB backend not supported in the browser version";
}};G.VERSION="0.5.9";G.connect=function(){var b,c,e;arguments.length==1&&(b=__dirname,c={},e=arguments[0]);arguments.length==2?(typeof arguments[0]==="string"?(b=arguments[0],c={}):(b=__dirname+"/index.js",c=arguments[0]),e=arguments[1]):(b=arguments[0],c=arguments[1],e=arguments[2]);try{Worker?new P.RDFStoreClient(b,c,function(b,c){e(b,c)}):G.create(c,function(b){e(!1,b)})}catch(g){G.create(c,function(b){e(!1,b)})}};G.create=function(){return arguments.length==1?new G.Store(arguments[0]):arguments.length==
2?new G.Store(arguments[0],arguments[1]):new G.Store};G.Store=function(b,c){var e=null,g=null;if(arguments.length==0)g={};else if(arguments.length==1)g={},e=b;else if(arguments.length>1)g=b,e=c;else throw"An optional argument map and a callback must be provided";g.treeOrder==null&&(g.treeOrder=15);this.functionMap={};var i=this;g.engine==="mongodb"?(this.isMongodb=!0,this.engine=new xb.MongodbQueryEngine(g),this.engine.readConfiguration(function(){g.overwrite===!0?i.engine.clean(function(){e(i)}):
e(i)})):new K.Lexicon(function(b){g.overwrite===!0&&b.clear();new Y.QuadBackend(g,function(c){g.overwrite===!0&&c.clear();g.backend=c;g.lexicon=b;i.engine=new F.QueryEngine(g);e&&e(i)})},g.name)};G.Store.prototype.rdf=u.rdf;G.Store.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var b,c;arguments.length===1?(b=arguments[0],
c=function(){}):arguments.length===2&&(b=arguments[0],c=arguments[1]);this.engine.execute(b,c)}};G.Store.prototype.executeWithEnvironment=function(){var b,c,e;if(arguments.length===3){b=arguments[0];var g=function(){};c=arguments[1];e=arguments[2]}else arguments.length===4&&(b=arguments[0],g=arguments[3],c=arguments[1],e=arguments[2]);for(var i=[],h=[],j=0;j<c.length;j++)i.push({token:"uri",value:c[j]});for(j=0;j<e.length;j++)h.push({token:"uri",value:e[j]});this.engine.execute(b,g,i,h)};G.Store.prototype.graph=
function(){var b=null,c=null;if(arguments.length===1)c=arguments[0]||function(){},b=this.engine.lexicon.defaultGraphUri;else if(arguments.length===2)c=arguments[1]||function(){},b=arguments[0];else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(b)!=null&&(b=this.rdf.resolve(b));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+b+"> { ?s ?p ?o } }",c)};G.Store.prototype.node=function(){var b=null,c=null,e=null;if(arguments.length===2)e=arguments[0],
c=arguments[1]||function(){},b=this.engine.lexicon.defaultGraphUri;else if(arguments.length===3)e=arguments[0],b=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI, node URI and a callback function must be provided";this.rdf.resolve(b)!=null&&(b=this.rdf.resolve(b));this.rdf.resolve(e)!=null&&(e=this.rdf.resolve(e));this.engine.execute("CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+b+"> { <"+e+"> ?p ?o } }",c)};G.Store.prototype.startObservingNode=function(){var b,c,e;arguments.length===
2?(b=arguments[0],e=arguments[1],this.engine.callbacksBackend.observeNode(b,e,function(){})):arguments.length===3&&(b=arguments[0],c=arguments[1],e=arguments[2],this.engine.callbacksBackend.observeNode(b,c,e,function(){}))};G.Store.prototype.stopObservingNode=function(b){this.engine.callbacksBackend.stopObservingNode(b)};G.Store.prototype.startObservingQuery=function(b,c,e){e!=null?this.engine.callbacksBackend.observeQuery(b,c,e):this.engine.callbacksBackend.observeQuery(b,c,function(){})};G.Store.prototype.stopObservingQuery=
function(b){this.engine.callbacksBackend.stopObservingQuery(b)};G.Store.prototype.subscribe=function(b,c,e,g,i){var h=function(b,c){for(var e=[],h={blanks:{},outCache:{}},g=[],m=0;m<c.length;m++){var x=c[m],C=u.buildRDFResource(x.subject,g,this.engine,h),E=u.buildRDFResource(x.predicate,g,this.engine,h),x=u.buildRDFResource(x.object,g,this.engine,h);C!=null&&E!=null&&x!=null&&(x=new u.Triple(C,E,x),e.push(x))}i(b,e)};this.functionMap[i]=h;this.engine.callbacksBackend.subscribe(b,c,e,g,h,function(){})};
G.Store.prototype.unsubscribe=function(b){this.engine.callbacksBackend.unsubscribe(this.functionMap[b]);delete this.functionMap[b]};G.Store.prototype.setPrefix=function(b,c){this.rdf.setPrefix(b,c)};G.Store.prototype.setDefaultPrefix=function(b){this.rdf.setDefaultPrefix(b)};G.Store.prototype.insert=function(){var b,c,e;if(arguments.length===1)c=arguments[0];else if(arguments.length===2)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],e=arguments[1]||function(){};else if(arguments.length===
3)c=arguments[0],b=this.rdf.createNamedNode(arguments[1]),e=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var g="",i=this;c.forEach(function(b){g=g+i._nodeToQuery(b.subject)+i._nodeToQuery(b.predicate)+i._nodeToQuery(b.object)+"."});g=b!=null?"INSERT DATA { GRAPH "+this._nodeToQuery(b)+" { "+g+" } }":"INSERT DATA { "+this._nodeToQuery(b)+" { "+g+" }";this.engine.execute(g,e)};G.Store.prototype._nodeToQuery=function(b){if(b.interfaceName===
"NamedNode"){var c=this.rdf.resolve(b.valueOf());return c!=null?"<"+c+">":"<"+b.valueOf()+">"}else{if(b.interfaceName!=="")if(b.lang!=null)return'"'+b.valueOf()+'"@'+b.lang;else if(b.datatype!=null)return'"'+b.valueOf()+'"^^<'+b.datatype+">";return b.toString()}};G.Store.prototype["delete"]=function(){var b,c,e;if(arguments.length===1)c=arguments[0];else if(arguments.length===2)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],e=arguments[1]||function(){};else if(arguments.length===
3)c=arguments[0],b=this.rdf.createNamedNode(arguments[1]),e=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";var g="",i=this;c.forEach(function(b){g=g+i._nodeToQuery(b.subject)+i._nodeToQuery(b.predicate)+i._nodeToQuery(b.object)+"."});g=b!=null?"DELETE DATA { GRAPH "+this._nodeToQuery(b)+" { "+g+" } }":"DELETE DATA { "+this._nodeToQuery(b)+" { "+g+" }";this.engine.execute(g,e)};G.Store.prototype.clear=function(){var b,c;if(arguments.length===
0)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=function(){};else if(arguments.length===1)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0]||function(){};else if(arguments.length===2)b=this.rdf.createNamedNode(arguments[0]),c=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";this.engine.execute("CLEAR GRAPH "+this._nodeToQuery(b),c)};G.Store.prototype.setBatchLoadEvents=function(b){this.engine.eventsOnBatchLoad=
b};G.Store.prototype.registerDefaultNamespace=function(b,c){this.rdf.prefixes.set(b,c);this.engine.registerDefaultNamespace(b,c)};G.Store.prototype.registerDefaultProfileNamespaces=function(){var b=this.rdf.prefixes.values(),c;for(c in b)this.registerDefaultNamespace(c,b[c])};G.Store.prototype.load=function(){var b,c,e,g;if(arguments.length===3)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0],c=arguments[1],g=arguments[2]||function(){};else if(arguments.length===4)b=
arguments[0],c=arguments[1],e=this.rdf.createNamedNode(arguments[2]),g=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if(b==="remote")c=this.rdf.createNamedNode(c),this.engine.execute("LOAD <"+c.valueOf()+"> INTO GRAPH <"+e.valueOf()+">",g);else if(c&&typeof c==="string"&&c.indexOf("file://")===0){b=this.engine.rdfLoader.parsers[b];var i=this;this.engine.rdfLoader.loadFromFile(b,{token:"uri",value:e.valueOf()},
c,function(b,c){b?i.engine.batchLoad(c,g):g(b,c)})}else b=this.engine.rdfLoader.parsers[b],i=this,this.engine.rdfLoader.tryToParse(b,{token:"uri",value:e.valueOf()},c,function(b,c){b?i.engine.batchLoad(c,g):g(b,c)})};G.Store.prototype.registerParser=function(b,c){this.engine.rdfLoader.registerParser(b,c)};G.Store.prototype.registeredGraphs=function(b){if(this.isMongodb)this.engine.registeredGraphs(!0,function(c){for(var e=[],g=0;g<c.length;g++){var i=new u.NamedNode(c[g]);e.push(i)}return b(!0,e)});
else{for(var c=this.engine.lexicon.registeredGraphs(!0),e=[],g=0;g<c.length;g++){var i=new u.NamedNode(c[g]);e.push(i)}return b(!0,e)}};G.Store.prototype._nodeToQuery=function(b){if(b.interfaceName==="NamedNode"){var c=this.rdf.resolve(b.valueOf());return c!=null?"<"+c+">":"<"+b.valueOf()+">"}else return b.toString()};G.Store.prototype.getNetworkTransport=function(){return T};G.Store.prototype.setNetworkTransport=function(b){T=b};RDFStoreWorker={observingCallbacks:{},workerCallbacksCounter:0,workerCallbacks:{}};
RDFStoreWorker.registerCallback=function(b){var c=""+RDFStoreWorker.workerCallbacksCounter;RDFStoreWorker.workerCallbacksCounter++;RDFStoreWorker.workerCallbacks[c]=b;return c};RDFStoreWorker.handleCreate=function(b,c){typeof T!="undefined"&&T!=null&&(T={load:function(b,c,g){var h=RDFStoreWorker.registerCallback(function(b){g.apply(g,b)});postMessage({fn:"workerRequest:NetworkTransport:load",callback:h,arguments:[b,c]})},loadFromFile:function(){}});args=[b];args.push(function(b){RDFStoreWorker.store=
b;postMessage({callback:c,result:"created",success:!0})});G.create.apply(G,args)};RDFStoreWorker.receive=function(b){var c=b.data||b;if(c.fn==="workerRequestResponse"){var e=c.callback,g=RDFStoreWorker.workerCallbacks[e];g!=null&&(delete RDFStoreWorker.workerCallbacks[e],g(c.results))}else if(c.fn==="create"&&c.args!=null)RDFStoreWorker.handleCreate(c.args,c.callback);else if(c.fn==="setBatchLoadEvents")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if(c.fn==="registerDefaultNamespace")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,
c.args);else if(c.fn==="registerDefaultProfileNamespaces")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if((c.fn==="execute"||c.fn==="executeWithEnvironment"||c.fn==="graph"||c.fn==="node"||c.fn==="clear"||c.fn==="load")&&c.args!=null){c.args.push(function(b,e){c.callback!=null&&postMessage({callback:c.callback,result:e,success:b})});try{RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(i){console.log("Error executing method through connection"),console.log(i)}}else if((c.fn===
"insert"||c.fn==="delete")&&c.args!=null)try{c.args.push(function(b,e){c.callback!=null&&postMessage({callback:c.callback,result:e,success:b})});g=c.args[0];for(b=0;b<g.triples.length;b++)e=g.triples[b],g.triples[b]=new u.Triple(RDFStoreWorker.adaptJSInterface(e.subject),RDFStoreWorker.adaptJSInterface(e.predicate),RDFStoreWorker.adaptJSInterface(e.object));c.args[1].interfaceName!=null&&(c.args[1]=RDFStoreWorker.adaptJSInterface(c.args[1]));c.args[0]=RDFStoreWorker.store.rdf.createGraph(g.triples);
RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(h){console.log("Error executing method through connection"),console.log(h)}else c.fn==="rdf/setPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setPrefix(c.args[0],c.args[1]):c.fn==="rdf/setDefaultPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setDefaultPrefix(c.args[0]):c.fn==="startObservingQuery"&&c.args!=null?(e=function(b,e){postMessage({callback:c.callback[0],result:e,success:b})},RDFStoreWorker.observingCallbacks[c.args[0]]=
e,c.args.push(e),c.args.push(function(b,e){c.callback&&c.callback[1]!=null&&postMessage({callback:c.callback[1],result:e,success:b})}),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingQuery"?((e=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[e]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="startObservingNode"&&c.args!=null?(e=function(b){postMessage({callback:c.callback,result:b})},RDFStoreWorker.observingCallbacks[c.callback]=
e,c.args.push(e),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingNode"&&c.args!=null?((e=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[e]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="subscribe"&&c.args!=null?(e=function(b,e){postMessage({callback:c.callback,event:b,result:e})},RDFStoreWorker.observingCallbacks[c.callback]=e,c.args.push(e),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,
c.args)):c.fn==="stopObservingNode"&&c.args!=null?((e=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[e]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="registeredGraphs"&&c.args!=null&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[function(b,e){c.callback!=null&&postMessage({callback:c.callback,result:e,success:b})}])};RDFStoreWorker.adaptJSInterface=function(b){if(b.interfaceName==="BlankNode")return new u.BlankNode(b.bnodeId);
else if(b.interfaceName==="Literal")return new u.Literal(b.nominalValue,b.language,b.datatype);else if(b.interfaceName==="NamedNode")return new u.NamedNode(b.nominalValue)};onmessage=RDFStoreWorker.receive;try{window.rdfstore=G}catch(Gc){}})();
